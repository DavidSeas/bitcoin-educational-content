---
name: Bitcoin Development Accelerator
goal: Отримати всі основи для початку розробки на Bitcoin
objectives:
  - Зрозуміти основні концепції та технології, що лежать в основі Bitcoin.
  - Отримати практичні навички в області безпеки Bitcoin, розробки програмного забезпечення та управління мережею.
  - Розвинути майстерність використання Lightning Network та пов'язаних з ним протоколів.
---

Ласкаво просимо на курси розробки Cubo+ для Bitcoin!

Протягом наступних 20 годин ви глибоко зануритесь у протоколи BTC та LN. Цей курс розроблений для програмістів, які хочуть почати працювати в екосистемі BTC і шукають міцне розуміння різних технологічних стеків BTC та LN.

Відео були записані наживо під час буткемпу CUBO+ 2023 в Ель-Сальвадорі та вдалося зібрати викладачів світового рівня. Цей курс був запропонований безкоштовно завдяки щедрості Fulgure Venture та спільним зусиллям викладачів, офісу Bitcoin, DecouvreBitcoin та багатьох інших учасників.

Насолоджуйтесь!

+++

# Вступ та підготовчі курси

<partId>43a835de-c4e7-542b-9d1a-c92f049e88e6</partId>

## Вступ до курсів CUBO+

<chapterId>dcf2d37e-b32a-5eb8-aaa3-41ac92475ba9</chapterId>

![Відео](https://youtu.be/4VuI9we_XYM)

Філіппо та Маріо проводять вступну бесіду про CUBO+ 2023, задаючи тон для всебічного навчального шляху, який чекає попереду. Вони обговорюють структуру курсів, очікувані результати навчання та як це допоможе студентам у сфері розробки Bitcoin.

### Цілі

Курс має на меті надати учасникам глибоке розуміння основоположних принципів Bitcoin, практичні навички розробки та здатність ефективно навігувати та вносити вклад в екосистему Bitcoin. За допомогою поєднання теоретичних знань та практичних вправ студенти оволодіють основами безпеки Bitcoin, складнощами його програмного стеку та механізмами управління.

### Передумови

Від учасників очікується сильне почуття цікавості, бажання вчитися на професійному рівні та деякі основні знання в розробці. Хоча детальне розуміння Bitcoin не вимагається, базове розуміння принципів кодування та відкритість до занурення в складні технічні концепції є важливими для максимальної користі від акселератора.

#### Інструменти

Протягом курсу учасники використовуватимуть ключові інструменти, які допоможуть їм зрозуміти матеріал та покращити навчальний досвід. Використання Linux, інтерфейсу командного рядка, GitHub та Docker буде невід'ємною частиною для практичного підходу до розробки Bitcoin. Ці інструменти полегшать роботу з програмним стеком Bitcoin, управлінням середовищами розробки та співпрацею над проектами в реальних умовах.

## Чому Bitcoin

<chapterId>89a0aa8b-90bd-58b2-82b3-bc5e1f82eaeb</chapterId>

### Чому Ель-Сальвадору потрібен Bitcoin

![відео](https://youtu.be/VExfKFrGuYw)
Ласкаво просимо на першу лекцію освітньої програми **Cubo Plus**. Сьогодні ми занурюємося у світ Bitcoin під керівництвом Ріккі, засновника **Bitcoin Italia Podcast**. Ріккі - це пристрасний активіст у сфері прав людини, який використовує Bitcoin як інструмент для захисту та просування прав людини. За понад шість років досвіду Ріккі багато подорожував, документуючи прийняття Bitcoin на нових ринках, таких як Сальвадор та Гватемала. Його робота виходить за межі подкастингу; він також активний на YouTube (**Bitcoin Explorers**) та Twitter (**BTC Explorer**, **Ricky6**). Відданість Ріккі Bitcoin випливає з його переконання, що він пропонує фінансову свободу та приватність, викликаючи виклик традиційним, централізованим банківським системам.
![Небанківське населення](assets/en/1/1.webp)
_Глобальне небанківське населення_

### Bitcoin: Фінансова свобода та її вплив на Сальвадор

Ця лекція, **"Чому Сальвадору потрібен Bitcoin,"** надає огляд **протоколу Bitcoin**, його коріння в **русі Cypherpunk**, та його ролі як інструменту для свободи—забезпечуючи **ненсуровані гроші**, **фінансову інклюзію**, та багато іншого.

> **Визначення:**
>
> - _Протокол Bitcoin:_ Правила та структура, які керують тим, як Bitcoin функціонує як децентралізована цифрова валюта.
> - _Рух Cypherpunk:_ Група, яка виступає за використання криптографії для забезпечення приватності та свободи в цифрових просторах.
> - _Фінансова інклюзія:_ Надання доступу до фінансових послуг для людей, які були виключені з традиційних банківських систем, часто згадується як "небанківське" населення.
> - _Ненсуровані гроші:_ Гроші, які не можуть бути контрольовані або обмежені урядами або фінансовими інститутами.

#### Ріккі та його підтримка Bitcoin

Подорож Ріккі у світ Bitcoin ґрунтується на його роботі як активіста прав людини. Він вважає, що Bitcoin може надати людям контроль над їхніми фінансами, дозволяючи їм захищати свою приватність та уникати обмежень централізованих банків. Його дослідження прийняття Bitcoin у місцях, як-от Сальвадор, підкреслює, як ця технологія може наділити людей у нових ринках фінансовою незалежністю.

### Глобальне значення та виклики Bitcoin

Bitcoin набагато більше, ніж просто цифрова валюта. Це інструмент для захисту приватності та забезпечення фінансової свободи. Використовуючи **приватні ключі**, які діють як головні паролі, користувачі можуть безпечно керувати своїм Bitcoin, маючи повний контроль над своїми коштами.

У авторитарних режимах, де фінансове придушення є поширеним, **ненсурована природа** Bitcoin дозволяє людям здійснювати транзакції без страху, що їхні кошти будуть заморожені або конфісковані. Його **відкритий код** сприяє глобальній участі, сприяючи спільноті, яка постійно покращує мережу.

![Зображення](assets/en/1/4.webp)

Незважаючи на свій потенціал, Bitcoin стикається зі значними викликами. У таких регіонах, як Африка та Індія, часто бракує базової інфраструктури, такої як електрика та доступ до Інтернету, що обмежує прийняття. Більше того, **цифрова інклюзія**—забезпечення можливості використання технологій людьми всіх вікових груп та освітніх рівнів—залишається великим бар'єром.

> **Визначення:**
>
> - _Приватні ключі:_ Секретні коди, які дають доступ до Bitcoin користувача.
> - _Відкритий код:_ Програмне забезпечення, яке будь-хто може перевірити, модифікувати та покращувати.

### Випадок Сальвадору

Рішення Сальвадору прийняти Bitcoin як законний платіжний засіб демонструє його трансформаційний потенціал. Використовуючи Bitcoin, країна прагне привернути іноземні інвестиції та сприяти фінансовій стабільності. Проекти, як-от **Bitcoin Beach**, показують, як місцеві економіки можуть рости, приймаючи Bitcoin як засіб обміну.
Проте, глобальне прийняття Bitcoin стикається з перешкодами, такими як незнання, опір новим технологіям та виклики в інфраструктурі. Шлях до більш інклюзивної фінансової системи, де Bitcoin може допомогти підняти рівень розвитку країн, є довгим, але перспективним. Децентралізована та відкрита природа Bitcoin дає надію на майбутнє, де фінансова справедливість доступна кожному.

#### Висновок

Підсумовуючи, Bitcoin має величезний потенціал для фінансового зміцнення та інклюзії, але попереду лежать значні виклики. Залишатися в залученні до спільноти Bitcoin, вчитися та ставити питання буде ключем до реалізації децентралізованого фінансового майбутнього. Через співпрацю та адвокацію, візія справедливішої фінансової системи для всіх може стати реальністю.

### Рух Cypherpunk та Австрійська Економіка

![відео](https://youtube.com/live/KIaC31YQLBA)

#### Рух Cypherpunk

**Рух Cypherpunk** з'явився наприкінці 20-го століття, виступаючи за приватність та свободу через криптографію. Піонери, як-от **Ерік Г'юз** та **Тім Мей**, вважали, що потужне шифрування є життєво необхідним для захисту особистої свободи в цифровому світі. Їхні ідеї сильно вплинули на створення Bitcoin.

> **Визначення:**
>
> - _Cypherpunk:_ Рух, що просуває приватність та свободу за допомогою криптографії.

#### Австрійська Економіка

В той же час, **Австрійська Економіка** надала основу для монетарних принципів Bitcoin. Економісти, як-от **Людвіг фон Мізес** та **Фрідріх Гаєк**, стверджували, що здорова грошова одиниця повинна бути дефіцитною, довговічною та хорошим засобом збереження вартості — основні принципи, що формували дизайн Bitcoin.

> **Визначення:**
>
> - _Дефіцитність:_ Обмежена доступність, створює вартість через потребу в обережному розподілі.

### Створення Bitcoin

**Сатоші Накамото** поєднав ці ідеї, щоб створити Bitcoin у 2008 році як децентралізовану, стійку до цензури цифрову валюту. Об'єднуючи ідеали Cypherpunk про приватність з австрійськими принципами здорової грошової одиниці, Bitcoin пропонує фінансову систему, яка викликає традиційні банки та урядовий контроль.

> **Визначення:**
>
> - _Стійкість до цензури:_ Гроші, які не можуть бути контрольовані або блоковані зовнішніми силами.

#### Основні Економічні Принципи

- **Дефіцитність:** Фіксований запас Bitcoin забезпечує його вартість з часом.
- **Перевага часу:** Заохочує до заощадження на майбутнє, а не до негайного витрачання.
- **Заощадження:** Зберігання вартості для майбутніх потреб, що призводить до інвестицій та інновацій.

> **Визначення:**
>
> - _Перевага часу:_ Віддача переваги теперішнім товарам над майбутніми.
> - _Заощадження:_ Зберігання вартості для майбутнього використання.

### Bitcoin в Ель Сальвадорі

Прийняття Bitcoin в Ель Сальвадорі відображає його потенціал як інструменту для фінансової свободи, узгоджуючись з **Австрійською Економікою** шляхом просування добровільного прийняття та децентралізації. Цей крок викликає традиційні фінансові системи, вирішуючи ключові питання: конкуренцію, монополію та конфіскацію.

![Зображення](assets/en/1/5.webp)

- **Конкуренція**: Bitcoin вводить конкуренцію в фінансовий ландшафт, пропонуючи альтернативу традиційному банкінгу, дозволяючи сальвадорцям обходити фінансових посередників та вибирати послуги, які краще задовольняють їхні потреби.

- **Монополія**: Децентралізуючи фінансовий доступ, Bitcoin руйнує монополію банків та урядових валют, зменшуючи залежність від централізованих інституцій та сприяючи фінансовій інклюзії.

- **Конфіскація**: Стійкість Bitcoin до конфіскації надає сальвадорцям контроль над їхніми активами, захищаючи їхнє багатство від зовнішнього вилучення та підвищуючи фінансовий суверенітет.

Прийняття Bitcoin в Ель Сальвадорі сприяє створенню більш інклюзивної, конкурентоспроможної та безпечної фінансової системи, викликаючи обмеження традиційних фінансів.

#### Висновок
Основи Bitcoin у **русі Cypherpunk** та **Австрійській економіці** роблять його унікальною та революційною формою грошей. Розуміння цих принципів допомагає зрозуміти, чому Bitcoin був створений і як він функціонує сьогодні. Для подальшого читання розгляньте **Стандарт Bitcoin** від **Саїфедіна Аммуса**.
Дякуємо, що ознайомилися з цим матеріалом!

## Як Bitcoin

<chapterId>d800970a-0d8e-5557-810a-7aef845d4a34</chapterId>

### Технологічний стек Bitcoin

![відео](https://youtu.be/5UkjQomJsHU)

На першій лекції курсу 'Як Bitcoin' ми почали досліджувати технологічний стек, який лежить в основі мережі Bitcoin. Ми розглянули такі теми, як **Hashcash**, **транзакції**, **блокчейн**, **Мережа Lightning** та інші ключові компоненти протоколу Bitcoin.

### Технологічний стек Bitcoin Частина 2

![відео](https://youtu.be/UkwbPVhLeIk)
Під час другої лекції 'Як Bitcoin' ми провели більш глибоке дослідження технологічного стеку Bitcoin.

### Структура Bitcoin

Походження Bitcoin базується на кількох ключових інноваціях, починаючи з **Hashcash Адама Бека**, системи доказу роботи (PoW), розробленої для запобігання спаму в електронних листах та атакам відмови в обслуговуванні шляхом вимоги від відправників виконання обчислювальних завдань. Ця концепція PoW стала кутовим каменем безпеки Bitcoin.

Bitcoin покладається на **цифрові підписи** з використанням **еліптичної кривої криптографії** для забезпечення та перевірки транзакцій. **Алгоритм цифрового підпису еліптичної кривої (ECDSA)** гарантує, що лише законний власник Bitcoin може авторизувати транзакції, не розкриваючи свої приватні ключі.

**Сатоші Накамото**, псевдонімний творець Bitcoin, розширив ці ідеї, перевівши модель PoW на децентралізований **блокчейн**. Це дозволило розподіленій мережі вузлів валідувати та записувати транзакції без центральної влади, що стало значним еволюційним кроком від попередніх спроб цифрової валюти.

> **Визначення:**
>
> - _Доказ роботи (PoW):_ Система, в якій учасники повинні розв'язувати обчислювальні головоломки для валідації транзакцій та забезпечення безпеки мережі.
> - _Криптографія еліптичних кривих:_ Метод криптографії, що дозволяє безпечно та ефективно використовувати цифрові підписи.

### Механіка блокчейну та валідація транзакцій

Транзакції Bitcoin валідуються та додаються до блоків **майнерами**, які змагаються за розв'язання криптографічної головоломки, використовуючи алгоритм доказу роботи. Це включає пошук хешу з певною кількістю провідних нулів, шляхом коригування значення **nonce**, поки не буде знайдено правильний хеш.

Кожен **блок** у блокчейні складається з **заголовка** (з даними, як-от хеш попереднього блоку) та списку транзакцій. Перший блок, відомий як **Генезисний блок**, є унікальним, оскільки не має попередника.

![Зображення](assets/en/1/6.webp)

Перед тим, як транзакції будуть включені в блок, вони перебувають у **мемпулі**, де чекають на валідацію. Після валідації ці транзакції додаються до нововидобутого блоку, а потім до блокчейну.

> **Визначення:**
>
> - _Майнінг:_ Процес розв'язання криптографічних головоломок для додавання нових блоків до блокчейну.
> - _Nonce:_ Значення, що використовується для знаходження правильного хешу під час майнінгу.
> - _Мемпул:_ Очікувальна зона для непідтверджених транзакцій перед їх додаванням до блоку.

### Масштабованість, конфіденційність та розвиток в Bitcoin

Bitcoin стикається з викликами, пов'язаними з масштабованістю та конфіденційністю. Обмежена пропускна спроможність блокчейну ускладнює обробку великих обсягів транзакцій. Рішення, такі як **Мережа Lightning**, вирішують ці виклики, дозволяючи проводити транзакції поза ланцюгом через платіжні канали, що збільшує швидкість та конфіденційність.
Запуск **повного вузла** є важливим для забезпечення децентралізації та безпеки, але **вузли спрощеної перевірки платежів (SPV)** дозволяють легшу участь за рахунок деякої безпеки.
Розвиток Bitcoin еволюціонував для покращення продуктивності та безпеки. Основні оновлення включають **Segregated Witness (SegWit)**, який вирішує проблему маніпуляції з транзакціями та збільшує ефективний розмір блоку, та **Taproot**, який покращує конфіденційність та дозволяє створювати більш складні контракти за допомогою **Merkleized Abstract Syntax Trees (MAST)**.

> **Визначення:**
>
> - _SegWit:_ Оновлення Bitcoin, яке відокремлює дані підпису від даних транзакції, покращуючи ефективність.
> - _Taproot:_ Оновлення, яке покращує конфіденційність та масштабованість Bitcoin, дозволяючи створювати більш складні смарт-контракти.
> - _Lightning Network:_ Рішення другого рівня для швидших, дешевших транзакцій Bitcoin за допомогою платіжних каналів.

#### Висновок

Структура Bitcoin та його постійна еволюція демонструють інноваційність та адаптивність його технології. Від **Hashcash** до децентралізованого блокчейну, і від **SegWit** до **Taproot**, Bitcoin продовжує вирішувати проблеми, пов'язані з масштабованістю, конфіденційністю та безпекою. Неперервні зусилля спільноти забезпечують стійкість та децентралізацію Bitcoin, одночасно розвиваючи його, щоб задовольнити вимоги майбутнього.

## Розвінчання міфів про Bitcoin

<chapterId>171ec71d-3028-5820-9b4f-36682113fc81</chapterId>

### Розвінчання міфів про Bitcoin

![відео](https://youtu.be/f0Pf0u1y5F4)

У цій лекції ми розвінчуємо поширені міфи, що оточують **Bitcoin**, **блокчейни** та **криптовалюти**. Давайте розглянемо неправильні уявлення про енергоспоживання Bitcoin, його використання в кримінальних цілях та загальний "FUD" (страх, невизначеність, сумнів), який поширюється навколо цієї технології.

### Bitcoin vs. Blockchain

Поширене неправильне уявлення полягає в тому, що **Bitcoin** та **блокчейн** є одним і тим же. Хоча Bitcoin є цифровою валютою, **блокчейн** є технологією, яка його живить. Блокчейни забезпечують перевірений запис транзакцій, але мають компроміси, такі як повільніші швидкості та вищі витрати, які рішення, такі як **Lightning Network**, вирішують.

> **Визначення:**
>
> - _Блокчейн:_ Основна технологія, що використовується для запису транзакцій у децентралізованому, незмінному реєстрі.
> - _Lightning Network:_ Рішення другого рівня, яке покращує ефективність транзакцій Bitcoin, дозволяючи проводити транзакції поза ланцюгом.

### Bitcoin vs. Crypto

Ще одне ключове розрізнення полягає в тому, що **Bitcoin** був створений з єдиною метою надання децентралізованої, стійкої до цензури форми грошей, вільної від контролю будь-якої компанії чи уряду. Натомість криптовалюти **shitcoins** часто розробляються з централізованим контролем, переважно існуючи для збагачення компаній, що стоять за ними, за допомогою хижацьких практик, схем "накачати та скинути" або відвертих шахрайств. Ці токени зазвичай не мають справжньої мети, крім як швидко збагатити своїх творців за рахунок необізнаних інвесторів. Однак Bitcoin стоїть окремо як єдина справді децентралізована цифрова валюта з доведеним рекордом безпеки та стійкості.

> **Визначення:**
>
> - _Shitcoins:_ Shitcoins - це криптовалюти низької вартості або сумнівної якості, які не мають реальної користі. Вони часто є високоспекулятивними і іноді створюються для шахрайських цілей або без чіткої мети, використовуючи бум на ринку криптовалют.

![Зображення](assets/en/1/2.webp)

### Споживання енергії та вплив на довкілля

Одна з найпоширеніших критик Bitcoin стосується його **споживання енергії**. Хоча майнінг Bitcoin дійсно використовує енергію, він становить менше ніж 1% світового споживання електроенергії та менше ніж 3% втраченої енергії. Більше того, **майнінг Bitcoin** часто використовує невикористані або відновлювані джерела енергії, роблячи його більш екологічним, ніж часто зображається.
**Визначення:**

- _Майнінг Bitcoin:_ Процес валідації транзакцій та забезпечення безпеки мережі шляхом розв'язання криптографічних головоломок, що вимагає обчислювальної потужності.

### Помилкові уявлення про кримінальне використання

Bitcoin часто критикують за використання в кримінальних діях. Однак, аналіз блокчейну показує, що лише невеликий відсоток транзакцій Bitcoin пов'язаний зі злочинністю. Насправді, традиційні фінансові системи бачать набагато більше кримінального використання, ніж Bitcoin.

### Приватність та Фунгібільність

**Приватність** та **фунгібільність** є суттєвими характеристиками Bitcoin. Приватність захищає користувачів у репресивних режимах, а фунгібільність забезпечує, що кожен Bitcoin є рівним, незалежно від його історії. Це робить Bitcoin надійною та справедливою формою грошей.

> **Визначення:**
>
> - _Фунгібільність:_ Властивість грошей, за якої кожна одиниця є взаємозамінною з іншою, забезпечуючи рівну вартість.

### Впорання з FUD та Динамікою Ринку

FUD, що оточує Bitcoin, часто перебільшує занепокоєння щодо його впливу на довкілля, кримінального використання та безпеки. Хоча коливання ринку будуть відбуватися, децентралізована та надійна технологія Bitcoin забезпечує міцну основу для довгострокової стабільності та фінансової свободи, особливо в обмежувальних умовах, як у Венесуелі.

#### Висновок

Розуміння реалій енергоспоживання Bitcoin, функцій приватності та ролі в запобіганні злочинності допомагає розвіяти міфи, що оточують його. Прорізаючи через FUD, ми можемо оцінити потенціал Bitcoin як революційної форми надійних грошей, що сприяє приватності, безпеці та децентралізації.

## Робота з Bitcoin

<chapterId>5f638ec9-a6c1-5716-b27f-d837ab896eb1</chapterId>
<professor>radio-talent</professor>

### Встановлення Bitcoin Core

![Відео](https://youtu.be/fIUU2sRCEj0)

На першій лекції 4-го модуля ми досліджували архітектуру Bitcoin та встановлення вузла Bitcoin Core.

### Запуск вузла Bitcoin

**1. Підсумок Вступу**
Ласкаво просимо назад! На попередньому занятті ми розглянули основні концепції архітектури Bitcoin, включаючи його криптографічні основи та структуру однорангової мережі. Сьогодні ми перейдемо від теорії до практики, демонструючи як встановити та налаштувати вузол Bitcoin.

**2. Огляд Практичного Заняття**
На цьому занятті Алекос проведе нас через процес налаштування вузла Bitcoin за допомогою віртуальної машини. Цей практичний туторіал призначений для ознайомлення вас з кроками, які беруть участь у налаштуванні вашого вузла для участі в мережі Bitcoin.

Запуск вузла Bitcoin включає валідацію транзакцій та блоків, забезпечення дотримання правил консенсусу та підтримку децентралізації мережі. Налаштування вузла забезпечує вам пряме підключення до мережі Bitcoin, дозволяючи вам сприяти її безпеці та цілісності.

На цій лекції ви знайдете керівництво з встановлення та запуску вашого власного Bitcoin Core, дізнаєтесь, як обрізати блокчейн для економії місця, та почнете експериментувати з програмним забезпеченням. Алекос крок за кроком проведе вас через цей захоплюючий процес.

### Що Ви Можете Робити з Bitcoin Core та Його Переваги

Запускаючи Bitcoin Core, ви отримуєте можливість:

- **Валідувати власні транзакції та блоки**: Забезпечення дотримання правил мережі Bitcoin без залучення третіх сторін.
- **Зміцнити мережу**: Беручи участь у мережі, ви допомагаєте зберегти її децентралізованість, роблячи Bitcoin більш стійким до атак.
- **Обрізати блокчейн**: Зменшити вимоги до зберігання, зберігаючи лише найновіші транзакції, що є ідеальним, якщо у вас обмежений дисковий простір.
- **Використовувати розширені функції гаманця**: Керувати вашим Bitcoin з приватністю та безпекою, генерувати приватні ключі в автономному режимі та безпечно підписувати транзакції.
- **Взаємодіяти з мережею Bitcoin безпосередньо**: Використовуючи Bitcoin Core, ви можете безпосередньо підключитися до мережі без посередників, забезпечуючи отримання найточніших даних.
- **Отримайте переваги від збільшення конфіденційності**: Як оператор повного вузла, вам не потрібно довіряти зовнішнім сервісам, захищаючи вашу конфіденційність транзакцій від зовнішнього спостереження.
Переваги від запуску вузла Bitcoin є значними для будь-якого відданого прихильника Bitcoin. Ви не лише допомагаєте забезпечити безпеку мережі та посилити її децентралізацію, але й покращуєте вашу конфіденційність, забезпечуєте цілісність ваших власних транзакцій, та берете активну участь у екосистемі Bitcoin. Запуск вузла є ключовим кроком до досягнення фінансового суверенітету та повного прийняття децентралізованої природи Bitcoin.

### Основні команди

Ось деякі з базових команд при налаштуванні вашого вузла:

- **Перевірте статус демона Bitcoin**:

  ```bash
  sudo systemctl status bitcoind
  ```

- **Запустіть демона Bitcoin:**:

  ```bash
    systemctl start bitcoind
  ```

- **Зупиніть демона Bitcoin:**:

  ```bash
    sudo systemctl stop bitcoind
  ```

  - **Отримайте детальну інформацію**:

  ```bash
    bitcoin-cli getblockchaininfo
  ```

- **Скоротіть блокчейн, щоб заощадити місце на диску, зберігаючи лише найновіші блоки:**:

  ```bash
    prune=550
  ```

- **Увімкніть сервер Bitcoin Core та налаштуйте налаштування RPC:**:

  ```bash
    server=1
    rpcuser=вашеім'якористувача
    rpcpassword=вашпароль
  ```

- **Перевірте статус демона Bitcoin**:

  ```bash
  sudo systemctl status bitcoind
  ```

- **Перевірте баланс вашого гаманця Bitcoin:**:
  ```bash
    sudo systemctl status bitcoind
  ```

### Встановлення C-lightning

![відео](https://youtu.be/zrB1Kc4BqvY)

#### 1. **Підсумок Bitcoin Core**

Почнемо з короткого підсумку кроків, залучених у встановленні Bitcoin Core на хмарному ВМ, оскільки це буде важливо для нашої подальшої налаштування C-Lightning.

**Перевстановлення Bitcoin Core на хмарному ВМ**
Для початку, ви захочете перевстановити Bitcoin Core на вашій віртуальній машині. Для цієї сесії ми пропустимо перевірку бінарних файлів, щоб заощадити час, але пам'ятайте, що у виробничому середовищі, перевірка бінарних файлів є критично важливим кроком для забезпечення безпеки.

**Завантажте та перевірте хеші файлів**
Спочатку завантажте останній випуск Bitcoin Core та перевірте хеші файлів, щоб переконатися, що не було втручань.

```sh
wget https://bitcoin.org/bin/bitcoin-core-22.0/bitcoin-22.0-x86_64-linux-gnu.tar.gz
sha256sum bitcoin-22.0-x86_64-linux-gnu.tar.gz
# Порівняйте отриманий хеш з офіційним хешем
```

**Встановіть бінарний файл та налаштуйте автозапуск за допомогою systemd**
Далі, встановіть бінарний файл та налаштуйте його на автозапуск за допомогою systemd.

```sh
tar -xzf bitcoin-22.0-x86_64-linux-gnu.tar.gz
sudo install -m 0755 -o root -g root -t /usr/local/bin bitcoin-22.0/bin/*
```

**Створіть файл служби systemd:**

```sh
sudo nano /etc/systemd/system/bitcoind.service
```

**Додайте наступну конфігурацію:**

```ini
[Unit]
Description=Bitcoin daemon
After=network.target

[Service]
ExecStart=/usr/local/bin/bitcoind -daemon
User=bitcoin
Group=bitcoin
Type=forking
PIDFile=/var/lib/bitcoind/bitcoind.pid
Restart=on-failure

[Install]
WantedBy=multi-user.target
```

**Створіть та налаштуйте користувача Bitcoin та директорії**
Створіть окремого користувача та налаштуйте директорії для Bitcoin Core.
```sh
sudo adduser --disabled-login --gecos "" bitcoin
sudo mkdir -p /var/lib/bitcoind
sudo chown bitcoin:bitcoin /var/lib/bitcoind
```

**Використовуйте мінімальний дисковий простір, обрізаючи блокчейн**
Щоб заощадити дисковий простір, увімкніть обрізання в файлі конфігурації.

```sh
sudo nano /var/lib/bitcoind/bitcoin.conf
```

Додайте наступні рядки:

```ini
prune=550
```

За допомогою цих кроків ви повинні мати Bitcoin Core, який працює з мінімальним використанням дискового простору, готовий до взаємодії з C-Lightning.

#### 2. **Огляд та встановлення C-Lightning**

**Огляд C-Lightning**

C-Lightning, також відомий як Core-Lightning, це протокол другого рівня, який сприяє швидшим та дешевшим транзакціям за допомогою каналів поза ланцюгом. Він вирізняється завдяки своїй модульній та дружній до розробників архітектурі, яка дозволяє проводити широке налаштування за допомогою плагінів.

**Важливість модульності та розширюваності за допомогою плагінів**
Модульний дизайн C-Lightning означає, що ви можете додавати або видаляти функції за потребою, дозволяючи налаштувати систему для конкретних випадків використання. Приклади випадків використання включають:

- **Обробка платежів**: Спеціальні плагіни можуть обробляти конкретні умови платежів.
- **Комісії за маршрутизацію**: Динамічно коригуйте комісії за маршрутизацію на основі умов мережі.
- **Автоматизація**: Автоматизуйте завдання, такі як управління каналами та забезпечення ліквідності.

### Встановлення C-Lightning

Перейдемо до встановлення C-Lightning.

**Використовуйте останній стабільний реліз**
Для цієї лекції ми використаємо останній стабільний реліз, наприклад, 22.11.1.

```sh
wget https://github.com/ElementsProject/lightning/releases/download/v22.11.1/clightning-v22.11.1.tar.gz
sha256sum clightning-v22.11.1.tar.gz
# Перевірте хеш проти наданого хешу
```

**Перевірте цілісність за допомогою GPG ключів**
Завжди перевіряйте цілісність завантаженого файлу за допомогою GPG ключів.

```sh
gpg --recv-keys <developer-key-id>
gpg --verify clightning-v22.11.1.tar.gz.asc clightning-v22.11.1.tar.gz
```

**Встановіть залежності та скомпілюйте з вихідного коду**
Встановіть необхідні залежності та скомпілюйте C-Lightning з вихідного коду.

```sh
sudo apt-get update
sudo apt-get install -y autoconf automake build-essential git libtool libgmp-dev \
                        libsqlite3-dev python3 python3-mako net-tools zlib1g-dev
tar -xzf clightning-v22.11.1.tar.gz
cd clightning-v22.11.1
./configure
make
sudo make install
```

**Налаштуйте службу systemd для автозапуску**
Створіть файл служби systemd для C-Lightning:

```sh
sudo nano /etc/systemd/system/lightningd.service
```

Додайте наступну конфігурацію:

```ini
[Unit]
Description=C-Lightning daemon
After=network.target bitcoind.service

[Service]
ExecStart=/usr/local/bin/lightningd
User=bitcoin
Group=bitcoin
Type=simple
Restart=on-failure

[Install]
WantedBy=multi-user.target
```

#### 3. **Конфігурація та налаштування**

**Створіть необхідні директорії та конфігураційні файли**
Створіть директорії та конфігураційні файли, необхідні для C-Lightning.

```sh
sudo mkdir -p /var/lib/lightning
sudo chown bitcoin:bitcoin /var/lib/lightning
sudo -u bitcoin nano /var/lib/lightning/config
```
Додайте наступні рядки до файлу конфігурації:
```ini
network=testnet
log-level=debug
plugin=/usr/local/libexec/c-lightning/plugins
```

**Налаштуйте C-Lightning для з'єднання з Bitcoin Core на Testnet**
Переконайтеся, що C-Lightning може з'єднатися з Bitcoin Core, додавши наступні рядки:

```ini
bitcoin-datadir=/var/lib/bitcoind
bitcoin-rpcuser=<rpcusername>
bitcoin-rpcpassword=<rpcpassword>
```

**Забезпечте Сумісність та Синхронізацію**
Запустіть сервіси та переконайтеся, що вони сумісні та синхронізовані.

```sh
sudo systemctl start bitcoind
sudo systemctl start lightningd
sudo systemctl enable bitcoind
sudo systemctl enable lightningd
```

**Налаштуйте Шляхи до Файлів та Дозволи, Особливо для Інтеграції з Tor**
Налаштуйте шляхи до файлів та дозволи для забезпечення безперебійної роботи, особливо якщо використовуєте Tor для приватності.

```sh
sudo apt-get install tor
sudo -u bitcoin nano /var/lib/lightning/config
```

Додайте наступне для інтеграції з Tor:

```ini
proxy=127.0.0.1:9050
```

**Резервне Копіювання HSM Secret для Відновлення Фондів**
Зробіть резервну копію HSM secret для відновлення фондів.

```sh
sudo cp /var/lib/lightning/hsm_secret /path/to/secure/location
```

**Тестуйте З'єднання та Перевірте Операційний Статус Вузла**
Нарешті, перевірте операційний статус вашого вузла, тестуючи з'єднання та переконуючись, що все працює як очікується.

```sh
lightning-cli getinfo
```

Дотримуючись цих кроків, ви матимете повністю функціональну налаштування C-Lightning, підключену до вашого вузла Bitcoin Core, готову для транзакцій на testnet.

#### Висновок та Питання

На завершення, сьогодні ми розглянули основні кроки для перевстановлення Bitcoin Core, за якими слідувала детальна інструкція з інсталяції та налаштування C-Lightning. Якщо у вас є будь-які питання, будь ласка, не соромтеся задавати їх зараз або підготуйте їх для подальшого уточнення на нашому наступному занятті. Пам'ятайте, практичний досвід є критично важливим, тому використовуйте налаштування Testnet, про яке ми говорили, для отримання більш глибоких знань.

### Безпека та Апаратні пристрої

![відео](https://youtu.be/oVaI9WuLkgk)

### Specter та Пристрій Ledger

#### Вступ

Ласкаво просимо на нашу лекцію про безпеку та налаштування пристроїв для Bitcoin. Сьогодні ми зосередимося на розумінні використання інструментів безпеки, зокрема настільного гаманця Specter та апаратного гаманця Ledger, та як ефективно налаштувати їх для підвищення безпеки Bitcoin.

**Інструменти: Настільний Гаманець Specter та Емулятор Ledger**

Specter - це настільний гаманець, призначений для спрощення створення та управління гаманцями Bitcoin, особливо тими, що використовують апаратні пристрої. Для нашої демонстрації ми використаємо емулятор Ledger, який імітує функціональність апаратного гаманця Ledger.

**Різниця Між Пристроєм Ledger та Контроверсією Компанії**

Апаратний гаманець Ledger, який користується популярністю завдяки своїй надійній безпеці, однак компанія, що стоїть за Ledger, зазнала критики через різні контроверсії, пов'язані з приватністю даних користувачів. Розуміння різниці між безпекою фізичного пристрою та практиками компанії є важливим для обізнаного використання.

**Моделі Безпеки: Важливість Гаманців з Мультипідписом та Різноманітних Апаратних Пристроїв**

Ключовим аспектом безпеки Bitcoin є використання гаманців з мультипідписом (multi-sig). Гаманці з мультипідписом вимагають декілька приватних ключів для авторизації транзакції, значно підвищуючи безпеку. Крім того, використання різних типів апаратних гаманців диверсифікує ризики та посилює модель безпеки.

### Налаштування та Конфігурація

**Завантаження та Налаштування Specter**

Першим кроком у нашому процесі налаштування є завантаження Specter з його офіційного репозиторію. Важливо перевірити цілісність завантаження, щоб уникнути скомпрометованого програмного забезпечення. Після завантаження встановіть Specter на свій настільний комп'ютер і запустіть додаток.
**Налаштування Specter для з'єднання з серверами Bitcoin Core або Electrum**
Щоб налаштувати Specter, потрібно підключити його до сервера Bitcoin Core або Electrum. Ці сервери надають необхідні дані блокчейну для операцій з гаманцем. Налаштування включає встановлення адреси сервера в налаштуваннях Specter та забезпечення стабільного з'єднання.

**Пояснення шляхів похідності та отримання публічних ключів**

Розуміння шляхів похідності є важливим для управління гаманцем. Шляхи похідності визначають, як ключі генеруються з майстер-ключа. У Specter ви можете отримати публічні ключі, підключивши ваш апаратний гаманець (або емулятор) та переглядаючи інтерфейс гаманця. Переконайтеся, що ви документуєте ці шляхи для майбутнього використання.

**Практична демонстрація: Використання емулятора Ledger**

Тепер ми використаємо емулятор Ledger для отримання ключів. Це включає підключення емулятора до Specter, перехід до розділу управління ключами та вибір відповідних ключів для створення гаманця.

**Створення та управління гаманцями в Specter**

Створення гаманця в Specter є простим. Доступ до інтерфейсу створення гаманця, введення необхідних деталей та включення отриманих публічних ключів. Після створення ви можете управляти гаманцем, моніторити транзакції та забезпечувати надійні практики безпеки.

**Отримання та моніторинг транзакцій**

Після налаштування гаманця, отримання транзакцій є таким же простим, як і надання вашої адреси гаманця. Specter забезпечує моніторинг вхідних транзакцій в реальному часі, гарантуючи, що ви завжди в курсі стану вашого гаманця.

### Розширені налаштування

**Налаштування віддаленого демона Specter**

Для досвідчених користувачів налаштування віддаленого демона Specter може покращити доступність та безпеку. Це включає конфігурацію віддаленого сервера для запуску бекенду Specter, дозволяючи безпечний доступ з різних пристроїв.

**Використання Tor для конфіденційності**

Для посилення конфіденційності налаштування Specter на використання Tor є високо рекомендованим. Tor анонімізує ваш мережевий трафік, захищаючи вашу IP-адресу від потенційного спостереження. Це особливо важливо для користувачів, які турбуються про конфіденційність та безпеку.

**Безпечне підключення до віддалених вузлів**

При підключенні до віддалених вузлів переконайтеся, що з'єднання є безпечним. Це включає використання сертифікатів SSL/TLS та перевірку автентичності вузла. Безпечні з'єднання запобігають атакам "людина посередині" та забезпечують цілісність даних.

**Виправлення проблем: Практичні техніки**

Неминуче стикатися з проблемами. Практичне виправлення помилок включає перевірку дозволів користувача, перевірку доступу до директорії даних та консультацію з журналами на наявність помилок. Наприклад, переконайтеся, що Specter має необхідні дозволи для доступу до директорії даних Bitcoin Core, щоб уникнути перебоїв у роботі.

**Приклад проблеми: Доступ до директорії даних**

Поширеною проблемою є неправильний доступ до директорії даних. Перевірте, що шлях до вашої директорії даних Bitcoin Core правильно встановлено в конфігурації Specter. Це забезпечує доступ Specter до необхідних даних блокчейну для операцій з гаманцем.

**Наступні кроки та інтеграція**

На завершення, наступні кроки включають інтеграцію Specter з мережею Lightning. Це дозволяє відправляти кошти з Specter на вузол Lightning, сприяючи швидшим та дешевшим транзакціям. Майбутні уроки детально розглянуть цю інтеграцію, покращуючи ваші можливості здійснення транзакцій Bitcoin.

**Варіативність часу блоків**

Розуміння варіативності часу блоків є критично важливим. Блоки Bitcoin можуть бути видобуті з різними інтервалами, що впливає на час підтвердження транзакцій. Цю варіативність необхідно враховувати у всіх налаштуваннях та операціях з гаманцем.

**Навчальні ресурси**

Для додаткового навчання розгляньте ресурси, такі як "Mastering the Lightning Network" та туторіали Rusty Russell. Ці матеріали надають глибокі знання про вузли Lightning та розширені конфігурації Bitcoin.

**Встановлення вузлів та безпека Tor**

Встановлення вузлів, як локально, так і віддалено, отримує вигоду від використання Tor для покращення безпеки. Запуск власного вузла забезпечує персональну валідацію транзакцій, покращуючи безпеку та конфіденційність.

**Філософія: Самодостатність у навчанні**
Прийміть філософію самодостатності. Практичні навички та самоосвіта є найважливішими, часто перевищуючи користь від формальної освіти. Займайтеся практичною діяльністю, щоб поглибити ваше розуміння безпеки Bitcoin.
**Розгляд питань приватності**

Зберігайте приватність, уникаючи сервісів, які відстежують або реєструють транзакції. Анонімність є критично важливою для безпечної роботи з Bitcoin, і ретельний вибір сервісів допомагає захистити вашу ідентичність та історію транзакцій.

Це завершує нашу лекцію про безпеку та налаштування пристроїв для використання Bitcoin за допомогою Specter та Ledger. Не соромтеся задавати будь-які питання або шукати роз'яснення щодо обговорених пунктів.

## Покращення Bitcoin

<chapterId>4fdd032f-2b05-5f24-a094-297d64f939de</chapterId>

### Відкриті проблеми в екосистемі Bitcoin

![відео](https://youtu.be/Vlm2ZdxcidA)

Протягом більше ніж десятиліття Bitcoin довів, що є трансформаційною інновацією у фінансовому світі, успішно функціонуючи на глобальному рівні та відкриваючи нові можливості в цифровій економіці. Однак, він все ще стикається з викликами, які вимагають творчих та спільних рішень. Постійна еволюція Bitcoin представляє унікальну можливість для тих, хто зацікавлений у формуванні майбутнього децентралізованих фінансів.

![Зображення](assets/en/1/8.webp)

#### Відкриті проблеми в користуванні Bitcoin

Bitcoin, незважаючи на своє існування більше десяти років, все ще стикається зі значними викликами у плані користування. Інструменти та інтерфейси, доступні користувачам, часто не мають зрілості та зручності, які можна знайти в більш традиційних фінансових системах. Це особливо помітно в регіонах, таких як Ель-Сальвадор, де уряд підтримав прийняття Bitcoin. Основна проблема тут полягає в необхідності кращих абстракцій, які можуть спростити користувацький досвід, роблячи Bitcoin доступним навіть для осіб з мінімальними технічними знаннями.

#### Відкриті проблеми в масштабованості

Масштабованість залишається постійною проблемою в розвитку Bitcoin. Здатність мережі обробляти велику кількість транзакцій залишається обмеженою, часто призводячи до високих комісій в мережі, які можуть виключити деяких користувачів з участі. Хоча рішення, такі як Lightning Network, пропонують деяке полегшення, дозволяючи проводити транзакції поза ланцюгом, вони не повністю вирішують проблеми масштабованості. Є очевидною потреба в більш комплексних рішеннях, які можуть обробляти зростаючі обсяги транзакцій без компромісів щодо цілісності мережі.

#### Відкриті проблеми в безпеці

Забезпечення безпеки активів Bitcoin є складним завданням, повним викликів. Гарячі гаманці, які часто використовуються для повсякденних транзакцій, становлять значні ризики безпеки, особливо для тих, хто керує вузлами Lightning. Крім того, планування спадщини активів Bitcoin залишається заплутаним і часто небезпечним процесом. Складність цих заходів безпеки може відлякувати потенційних користувачів і ускладнювати широке прийняття.

#### Відкриті проблеми в приватності

Приватність є ще однією критично важливою проблемою в екосистемі Bitcoin. Хоча приватність є суттєвою для безпеки, поточна структура Bitcoin пропонує обмежені можливості приватності. Транзакції в ланцюгу легко відстежуються, що становить ризик для анонімності користувачів. Хоча Lightning Network має потенціал покращити приватність, він все ще вимагає значних удосконалень. Баланс між прозорістю та приватністю є делікатним і вимагає інноваційних рішень для забезпечення безпеки та приватності користувачів.

#### Відкриті проблеми в гнучкості

Гнучкість в протоколі Bitcoin необхідна для сприяння покращенням в приватності, безпеці та масштабованості. Однак, надмірна гнучкість може стати вразливістю, потенційно служачи вектором атаки та загрожуючи децентралізації мережі. Знаходження правильного балансу є критично важливим для збереження цілісності та стійкості протоколу Bitcoin.

### Компроміси в покращенні Bitcoin

#### Зручність користування проти безпеки та приватності

![Зображення](assets/en/1/7.webp)
Зусилля щодо підвищення зручності використання Bitcoin часто йдуть на шкоду безпеці та приватності. Наприклад, зручні для користувача кастодіальні гаманці, такі як Wallet of Satoshi, забезпечують доступний інтерфейс, але значно поступаються в безпеці та приватності. Спрощені системи можуть підвищити зручність використання, але можуть призвести до проблем, таких як повторне використання адрес, що підриває приватність. Тому будь-які покращення в зручності використання мають бути ретельно зважені проти потенційних компромісів у безпеці та приватності.

#### Компроміси між масштабованістю та приватністю

Масштабованість та приватність часто знаходяться в протиріччі в мережі Bitcoin. Покращення, які збільшують масштабованість, такі як більші UTXO або зменшене криптографічне замаскування, зазвичай знижують приватність. Навпаки, техніки, зосереджені на приватності, як наприклад кільцеві підписи Monero, підвищують анонімність користувачів, але негативно впливають на масштабованість. Більше того, введення станових контрактів, як це видно в Ethereum, пропонує збільшену гнучкість за рахунок зниження безпеки та масштабованості. Балансування цих компромісів є складним викликом, який вимагає ретельного розгляду.

### Техніки приватності

Різні підходи до приватності в Bitcoin мають свої набори компромісів. Приватність за допомогою замаскування, яка передбачає додавання більшої кількості інформації для приховування відповідних даних, може підвищити приватність, але може ускладнити мережу. Приклади включають Monero та Zcash. З іншого боку, приватність за допомогою випущення, яка має на меті зменшення інформації в блокчейні, як це видно в Lightning Network, може покращити як приватність, так і масштабованість. Кожен метод має свої переваги та недоліки, що вимагає виваженого підходу до покращення приватності.

### Зміни консенсусу та виклики

Зміна механізму консенсусу Bitcoin є рідкісним і складним завданням через децентралізовану природу мережі. Пропозиції, як-от ChISA (агрегація підписів між входами) та ковенанти, мають на меті ввести складніші правила транзакцій, але їх впровадження супроводжується труднощами. Зміни консенсусу вимагають широкої згоди в спільноті, і необхідна координація може призвести до значного розчарування та вигорання, якщо запропоновані зміни не будуть прийняті. Це підкреслює потребу в обережних та співпрацюючих зусиллях у розробці протоколу.

### Інновації та стандарти в розробці Bitcoin

Дотримання стандартизованих практик у розробці гаманців Bitcoin є критично важливим для забезпечення зручності використання та безпеки. Багато гаманців наразі не слідують встановленим стандартам, що призводить до фрагментації та потенційних вразливостей. Стандартизація може значно покращити досвід користувача та загальну безпеку транзакцій Bitcoin.

Традиційні фрази резервного копіювання з 12 слів, хоча і ефективні для базового використання Bitcoin, не враховують протоколи поза ланцюгом, як-от Lightning Network. Майбутні стандарти резервного копіювання повинні еволюціонувати, щоб забезпечити кращу безпеку та зручність використання для цих розширених функцій, гарантуючи, що користувачі можуть безпечно керувати своїми активами на різних рівнях екосистеми Bitcoin.

Спрощення процесу платежів за допомогою уніфікованих протоколів є суттєвим для покращення досвіду користувача. Існуючі протоколи, як-от BIP70, BIP78, та Payneem, пропонують різні рішення, але є місце для подальших інновацій. Більш струмлінизований та зручний для користувача платіжний протокол може сприяти ширшому прийняттю та зручності використання.

Розробка кращих інструментів та обладнання є життєво важливою для покращення зручності використання та безпеки Bitcoin. Інновації, як-от апаратні гаманці (наприклад, Ledger та Trezor), пропонують надійні рішення для безпеки, але повинні продовжувати еволюціонувати, щоб вирішувати нові загрози. Покращені інструменти можуть зробити Bitcoin більш доступним та безпечним для ширшої аудиторії.

Мінімізація ризиків, пов'язаних з розподілом апаратних гаманців та забезпеченням їх цілісності, є критично важливою. Атаки на ланцюжок постачання становлять значну загрозу для безпеки цих пристроїв. Впровадження ретельних заходів безпеки та забезпечення прозорості у процесі виробництва та розподілу може допомогти мінімізувати ці ризики.

Спрощення взаємодії користувачів з Bitcoin та Lightning Network, зберігаючи при цьому безпеку та ефективність, є ключовою метою. Кращі UX абстракції можуть зробити Bitcoin більш доступним для не технічних користувачів, сприяючи ширшому прийняттю без компромісів у безпеці.
Створення навчальних матеріалів для покращення зручності використання, безпеки та конфіденційності Bitcoin має велике значення. Освіта користувачів про кращі практики та основні принципи Bitcoin може надати їм можливість приймати обізнані рішення та покращити їх загальний досвід роботи з мережею.
![Зображення](assets/en/1/3.webp)

**Зміни на рівні 1 та рівні 2**

Інновації на базовому рівні (рівень 1) є складними, але критично важливими для довгострокової еволюції Bitcoin. Рішення рівня 2, як-от Lightning Network, дозволяють більш експериментальні зміни та можуть гнучкіше вирішувати проблеми масштабованості та конфіденційності. Обидва рівні відіграють вирішальну роль у постійному розвитку Bitcoin.

**Координація консенсусу**

Зміни в протоколі Bitcoin вимагають значної координації та консенсусу спільноти. Децентралізований характер Bitcoin робить цей процес природно складним. Ефективна координація та чітке спілкування є суттєвими для подолання складнощів змін протоколу та забезпечення успішного прийняття покращень.

**Виклики масштабованості**

Досягнення глобального консенсусу та управління складними вторинними рівнями, такими як Lightning Network, ставлять перед собою виклики масштабованості. Ці проблеми потрібно вирішувати, щоб забезпечити можливість Bitcoin обробляти зростаючі обсяги транзакцій, зберігаючи при цьому його основні принципи безпеки та децентралізації.

На завершення, постійне вирішення цих відкритих проблем та інновації в екосистемі Bitcoin є критично важливими для його еволюції. Баланс між зручністю використання, безпекою, конфіденційністю та масштабованістю вимагає ретельного розгляду та спільних зусиль. Вносячи свій вклад у ці розробки, учасники можуть допомогти формувати майбутнє Bitcoin та його роль у глобальному фінансовому ландшафті.

# Основи Bitcoin

<partId>6c0a3691-3ce4-5309-8ad7-e16e4b63c734</partId>

## Мислення в контексті безпеки в Bitcoin

<chapterId>0b97af0c-015a-54e3-a7f0-0f62ceb96c07</chapterId>
<professor>because-drama</professor>

![Відео](https://youtu.be/2f_rK74MB3U)

Ласкаво просимо на сьогоднішню лекцію про **Безпеку та Надійність**. Наша мета - дослідити тонку межу між цими двома фундаментальними аспектами дизайну системи та їх застосування в реальних сценаріях.

### Введення в мислення про безпеку

Мислення про безпеку базується на принципах, розроблених для захисту систем від навмисних атак. Воно включає ідентифікацію потенційних загроз та впровадження заходів для їх пом'якшення. На відміну від цього, надійність зосереджена на забезпеченні коректної роботи систем під вказаними умовами, враховуючи ймовірні збої, а не навмисні спроби порушення безпеки.

#### Взаємозв'язок між безпекою та надійністю

Хоча як безпека, так і надійність мають на меті підтримку цілісності системи, їх підходи значно відрізняються. Інженерія надійності займається ймовірністю збоїв системи через випадкові події та часто використовує статистичні методи для прогнозування та пом'якшення цих збоїв. З іншого боку, безпека має враховувати навмисний та розумний характер атак, вимагаючи багаторівневої стратегії оборони, відомої як "оборона в глибину".

#### Безпека проти Надійності

Класичний приклад інженерії надійності можна простежити ще з 18 століття під час будівництва мосту. Якість використаної сталі, включаючи її склад та процес виробництва, критично впливала на надійність мосту. Інженерам доводилося враховувати одиночні точки збою та використовувати ймовірність та статистику для оцінки та забезпечення надійності мосту з часом.

![Зображення](assets/en/2/1.webp)

На відміну від надійності, безпека стосується навмисних загроз. Наприклад, 256-бітний криптографічний ключ забезпечує математичну гарантію безпеки через неможливість його взлому силою. Заходи безпеки мають враховувати різні моделі загроз, від фізичного втручання до складних кібератак.

### Реальні застосування
Розглянемо процес створення та зберігання ключів Bitcoin за допомогою паперових гаманців. Хоча паперові гаманці можуть бути безпечними, вони схильні до фізичного пошкодження та несанкціонованого втручання. Забезпечення цілісності таких гаманців вимагає методів, що дозволяють виявити втручання, та надійних протоколів перевірки.

У іншому сценарії уявіть зустріч в аеропорту, де водій використовує секретний код для аутентифікації пасажира. Цей простий, але ефективний захід безпеки запобігає обману обох сторін з боку шахраїв.

У Гватемалі маркування часом результатів виборів відіграло критичну роль у забезпеченні цілісності виборчого процесу. Використовуючи криптографічні методи для маркування даних часом, виборчі посадовці могли надати докази, що не допускають втручання, автентичності результатів, стримуючи потенційних маніпуляторів, мотивованих значними фінансовими інтересами.

![Зображення](assets/en/2/2.webp)

### Виявлення та мінімізація потенційних загроз

Моделювання загроз - це процес виявлення потенційних загроз безпеці та створення стратегій їх мінімізації. Це включає розуміння середовища системи, ідентифікацію можливих нападників та розробку безпечних протоколів на основі припущень та ймовірнісного аналізу.

#### Створення безпечних протоколів

Для захисту виборів, наприклад, може бути впроваджений неупереджений нагляд або моніторинг з боку різних партій для забезпечення прозорості та цілісності. Криптографічні методи, такі як маркування часом та перехресна перевірка, допомагають зберігати автентичність даних та запобігати їх підробці.

#### Перевірка довіри

Перевірку довіри можна проілюструвати на прикладі верифікації PGP (Pretty Good Privacy). Верифікуючи відбитки та підписи ключів PGP, користувачі можуть встановити автентичність цифрових ідентифікаторів. Подібні практики є важливими для перевірки цілісності програмного забезпечення за допомогою відповідності хешів (наприклад, SHA-256).

#### Встановлення шляхів довіри

Побудова довіри не є миттєвим процесом; це вимагає з'єднання кількох шляхів довіри та забезпечення резервування. Використання HTTPS та сертифікатів, підтримуваних блокчейном, забезпечує автентичність веб-джерел, ускладнюючи нападникам порушення довіри.

#### Стимули для безпеки

Розуміння ролі стимулів є вирішальним у підтримці безпеки. Наприклад, модель безпеки Bitcoin ґрунтується на стимулах майнерів та валідації учасниками мережі, підкреслюючи важливість економічних стимулів у захисті цифрових екосистем.

#### Забезпечення безпеки Bitcoin гаманців

Стратегії забезпечення безпеки Bitcoin гаманців включають налаштування з кількома підписами та різноманітне зберігання. Ці методи забезпечують, що навіть у разі компрометації одного компонента, загальна безпека залишається недоторканною.

#### Важливість валідації

Нарешті, валідація користувачів є критичною для підтримки безпечної мережі. Роль кожного користувача у валідації транзакцій та перевірці програмного та апаратного забезпечення допомагає зберегти цілісність мережі та запобігти потенційним загрозам.

Підсумовуючи, розуміння та інтеграція принципів безпеки та надійності є суттєвими при проектуванні міцних систем. Вивчаючи історичні приклади, застосовуючи стратегії реального світу та постійно валідуючи довіру, ми можемо створювати системи, які є одночасно безпечними та надійними.

## Вільне та відкрите програмне забезпечення (FLOSS) у Bitcoin

<chapterId>2c59d609-f1ef-53f4-9575-df62e4d066e9</chapterId>
<professor>because-drama</professor>

![Відео](https://youtu.be/ln-FYziKqNY)

Використання вільного та відкритого програмного забезпечення (FLOSS) є критично важливим у екосистемі Bitcoin. Пітер Тодд досліджує значення FLOSS для Bitcoin, розглядаючи історію FLOSS та аналізуючи, як Github дозволяє нам спільно створювати відкрите програмне забезпечення, як-от Bitcoin.

### Природа та значення програмного забезпечення

Програмне забезпечення, у своїй основі, є набором коду та даних, які інструктують обчислювальні пристрої, як виконувати певні завдання. На відміну від апаратного забезпечення, яке вимагає фізичних матеріалів та виробничих процесів для реплікації, програмне забезпечення можна легко копіювати та розповсюджувати майже без витрат. Ця фундаментальна відмінність відіграє ключову роль у розповсюдженні та розвитку програмного забезпечення.
Однією з ключових відмінностей між програмним забезпеченням та апаратним забезпеченням є концепція відкритого коду. Хоча апаратне забезпечення з відкритим кодом існує, воно не так поширене через складності, пов'язані з дублюванням фізичних об'єктів. Натомість, програмне забезпечення з відкритим кодом процвітає завдяки легкості реплікації та розповсюдження. Програмне забезпечення з відкритим кодом дозволяє будь-кому переглядати, модифікувати та розповсюджувати код, сприяючи колаборативному середовищу, яке прискорює інновації та вирішення проблем.
Правова основа, що регулює програмне забезпечення, головним чином обертається навколо законів про авторське право. Ці закони надають творцю програмного забезпечення ексклюзивні права на використання, модифікацію та розповсюдження своєї роботи. Однак, ліцензії з відкритим кодом надають механізм для поділу цих прав з громадськістю на певних умовах. Ця правова структура є суттєвою для розуміння динаміки розповсюдження та модифікації програмного забезпечення.

Підсумовуючи, природа програмного забезпечення як легко реплікованого коду та даних, разом з правовими механізмами, наданими ліцензіями з відкритим кодом, підкреслює його критичну важливість у сучасному цифровому ландшафті. Ця структура не тільки сприяє інноваціям, але й забезпечує можливість вільного обміну та вдосконалення програмного забезпечення глобальною спільнотою.

### Історія Руху за Вільне Програмне Забезпечення

Рух за вільне програмне забезпечення має свої корені на початку 1980-х років, головним чином завдяки баченню Річарда Столлмана щодо свободи програмного забезпечення. Будучи розчарованим обмежувальною природою пропрієтарного програмного забезпечення, Столлман взявся за місію створення програмного забезпечення, яким користувачі могли б вільно користуватися, модифікувати та ділитися. Це призвело до заснування Фонду Вільного Програмного Забезпечення (FSF) у 1985 році.

Одним з значних внесків Столлмана була розробка проекту GNU, який мав на меті створити вільну операційну систему, схожу на Unix. GNU, що означає "GNU's Not Unix", надав багато важливих компонентів повністю вільної операційної системи. Однак, йому бракувало ядра, основної частини операційної системи.

Прогалину заповнив Лінус Торвальдс, створивши ядро Linux у 1991 році. Ядро Торвальдса, поєднане з компонентами GNU, призвело до створення повністю функціональної вільної операційної системи, відомої як GNU/Linux. Ця співпраця між філософським зобов'язанням Столлмана до свободи програмного забезпечення та практичним внеском Торвальдса є прикладом сили підходу з відкритим кодом.

![Зображення](assets/en/2/3.webp)

Рух за вільне програмне забезпечення мав глибокий вплив на індустрію програмного забезпечення, просуваючи ідею, що програмне забезпечення має бути вільним для використання, модифікації та обміну всіма. Його принципи поклали основу для багатьох проектів з відкритим кодом та спільнот, які процвітають сьогодні.

### Економіка та Фінансування в Open Source

Фінансування та підтримка проектів з відкритим кодом ставлять перед собою унікальні виклики та можливості. На відміну від пропрієтарного програмного забезпечення, яке генерує дохід через продажі та ліцензійні збори, проекти з відкритим кодом часто покладаються на альтернативні моделі фінансування.

Одним з успішних прикладів є Bitcoin Core, критична частина інфраструктури Bitcoin. Розробники, які працюють над Bitcoin Core, часто фінансуються через гранти, донати та спонсорство від організацій, які отримують вигоду від успіху проекту. Ця модель дозволяє розробникам зосередитися на вдосконаленні програмного забезпечення без обмежень традиційного комерційного фінансування.

![Зображення](assets/en/2/4.webp)

Іншим помітним прикладом є операційна система Linux. Багато компаній, таких як IBM, Red Hat та Intel, вносять свій вклад у розвиток Linux, оскільки їхні продукти та послуги залежать від надійної та безпечної операційної системи. Ці компанії надають фінансову підтримку, вносять код та надають ресурси для підтримки та покращення екосистеми Linux.

Ліцензії з відкритим кодом, такі як MIT, GPL та AGPL, також відіграють важливу роль у економічній динаміці програмного забезпечення з відкритим кодом. Дозвільні ліцензії, як-от MIT, дозволяють більш гнучке використання коду, включаючи комерціалізацію. Натомість, ліцензії з копілефтом, як-от GPL, забезпечують, що будь-яка похідна робота також має бути з відкритим кодом, сприяючи колаборативному середовищу.

![Зображення](assets/en/2/5.webp)
Висновок: економіка відкритого програмного забезпечення керується внесками спільноти, корпоративними спонсорствами та інноваційними моделями фінансування. Ці механізми забезпечують сталість та постійне вдосконалення проектів з відкритим вихідним кодом, приносячи користь як розробникам, так і користувачам.

## Криптографія в Bitcoin

<chapterId>71867dd2-912c-55ad-b59c-9dbca8a39469</chapterId>
<professor>happy-panda</professor>

![Відео](https://youtu.be/QcK-Cl8B9QU)

Ласкаво просимо! Сьогодні ми зануримося в ключові аспекти криптографії, які кожен розробник Bitcoin повинен знати. Ми зосередимося на основних концепціях та практичних застосуваннях, не перевантажуючи вас надмірними теоретичними деталями. Основна мета - надати вам знання для розуміння, реалізації та вирішення проблем з криптографічними механізмами в Bitcoin ефективно.

### Основні криптографічні концепції для розробників Bitcoin

У цьому розділі ми розглянемо ключові криптографічні концепції, необхідні для розробників Bitcoin, включаючи хеш-функції, дерева Меркла, цифрові підписи та еліптичні криві.

![Зображення](assets/en/2/6.webp)

**Хеш-функції**: Хеш-функція приймає на вхід дані та виробляє рядок байтів фіксованої довжини. У Bitcoin хеш-функції є фундаментальними для забезпечення цілісності даних та безпеки. Криптографічні хеш-функції повинні бути ефективними, генерувати здавалося б випадкові результати та виробляти виходи фіксованої довжини незалежно від розміру вхідних даних. Вони використовуються для перевірки цілісності файлів, забезпечуючи, що дані не були змінені зловмисно.

![Зображення](assets/en/2/7.webp)

**Властивості безпеки**: Криптографічні хеш-функції повинні дотримуватися кількох властивостей безпеки. Стійкість до знаходження оригіналу гарантує, що обчислювально неможливо відтворити оригінальний вхід з виходу хешу. Стійкість до знаходження другого образу означає, що має бути складно знайти інший вхід, який дає той самий хеш-вихід. Стійкість до колізій забезпечує, що малоймовірно знайти два різні вхідні дані, які дають однаковий хеш-вихід.

**Дерева Меркла**: Дерево Меркла - це структура даних, яка дозволяє ефективно та безпечно перевіряти великі набори даних. Елементи даних хешуються парами, а отримані хеші комбінуються ітеративно, формуючи єдиний кореневий хеш. У Bitcoin дерева Меркла є критично важливими при створенні блоків та перевірці транзакцій, зокрема для клієнтів спрощеної перевірки платежів (SPV) та в Taproot (Mast).

![Зображення](assets/en/2/8.webp)

**Цифрові підписи (ECDSA)**: Алгоритм цифрового підпису на еліптичних кривих (ECDSA) використовується для забезпечення автентичності та цілісності в транзакціях Bitcoin. Він передбачає генерацію підпису за допомогою приватного ключа, який можна перевірити за допомогою відповідного публічного ключа. Ключові концепції включають розуміння скінченних полів, дискретних логарифмів та важливості nonce.

**Еліптичні криві**: Еліптичні криві використовуються в криптографії з відкритим ключем через їх ефективність та безпеку. Безпека криптографії на еліптичних кривих залежить від складності розв'язання проблеми дискретного логарифму.

![Зображення](assets/en/2/9.webp)

### Практичне застосування криптографічних концепцій та найкращі практики безпеки в Bitcoin

У цьому розділі ми розглянемо застосування цих концепцій у реальній розробці Bitcoin та найкращі практики безпеки, яких слід дотримуватися.

**Криптографія = Небезпека**: Криптографія є двосічним мечем. Хоча вона захищає від випадкового пошкодження даних та зловмисних дій, неправильна реалізація може призвести до серйозних вразливостей. Розробники повинні глибоко розуміти криптографічні механізми, щоб забезпечити як безпечну реалізацію, так і здатність вирішувати потенційні проблеми. Наприклад, 256-бітний вихід SHA-2 забезпечує, що атаки на знаходження оригіналу вимагають приблизно 2^256 роботи, зі стійкістю до колізій на рівні приблизно 2^128 роботи.

![Зображення](assets/en/2/10.webp)
**Застосування Merkle Tree**: Розуміння логарифмічного розміру доказу та забезпечення ретельного проектування дерева є суттєвими для уникнення недоліків, таких як дублювання хешів при верифікації транзакцій. Merkle trees використовуються у створенні блоків, верифікації транзакцій та вдосконаленнях на кшталт Taproot.
**Криптографія з відкритим ключем**: Дискретні логарифми та скінченні поля є фундаментальними в криптографічних розрахунках у Bitcoin. Протоколи виклику-відповіді використовуються для верифікації знання приватного ключа без його розкриття.

![Зображення](assets/en/2/11.webp)

**Наслідки для безпеки**: Історичні приклади показують значні фінансові втрати через повторне використання nonce. Розуміння важливості генерації унікальних nonce є критично важливим. Використання довірених бібліотек, як-от LibSecP256k1, забезпечує надійні та безпечні криптографічні операції.

**Криптографія на еліптичних кривих (ECC)**: Схеми підпису еволюціонували від протоколів ідентифікації до схем, як-от Schnorr signatures, які зараз використовуються в Bitcoin (BIP 340). Знання еліптичних кривих та арифметики скінченних полів забезпечує безпечні криптографічні реалізації.

**Загальні поради для розробників**: Криптографічні протоколи мають проходити ретельний однолітковий огляд. Розробники мають бути точними та повністю розуміти кожен крок криптографічних процедур. Усвідомлення загальних пасток у криптографічних реалізаціях може запобігти значним вразливостям.

**Еліптичні криві в криптографії**: Коригування ключів та безпека є важливими темами, наприклад, модифікація публічного ключа за допомогою додаткового приватного ключа з забезпеченням безпеки. Специфічна для Bitcoin еліптична крива, SECP256K1, та її параметри (P та N) є фундаментальними для його реалізації.

#### Висновок

У цій лекції ми дослідили фундаментальні криптографічні концепції, які лежать в основі безпеки та функціональності Bitcoin. Від критичних ролей хеш-функцій, Merkle trees та цифрових підписів до складної математики криптографії на еліптичних кривих, ці елементи формують основу децентралізованої мережі Bitcoin. Розуміння цих концепцій не лише про освоєння теорії — це про визнання практичних наслідків та потенційних пасток у реальній розробці.

Як розробники Bitcoin, важливо підходити до криптографічних реалізацій з обережністю та точністю. Безпека мережі Bitcoin сильно залежить від правильного та безпечного застосування цих криптографічних принципів. Чи ви верифікуєте транзакції, проектуєте нові функції, чи забезпечуєте цілісність блокчейна, глибоке знання криптографії дозволить вам створювати більш надійні, безпечні та інноваційні рішення в екосистемі Bitcoin.

Оволодівши цими концепціями та дотримуючись кращих практик, ви будете добре підготовлені для ефективного внеску у постійний розвиток Bitcoin, забезпечуючи його стійкість та безпеку на майбутнє.

## Модель управління Bitcoin

<chapterId>a30ec3e7-b290-5145-a9a9-042224ab20d2</chapterId>
<professor>because-drama</professor>

![Відео](https://youtu.be/g_BcT5YkZUQ)

### Природа Bitcoin

Bitcoin - це цифрова валюта, яка працює на протоколі консенсусу, наборі правил, погоджених учасниками мережі для забезпечення єдності та функціональності. В його основі, Bitcoin є децентралізованим реєстром, відомим як блокчейн, де транзакції записуються та верифікуються мережевими вузлами. Повні вузли, які зберігають повну історію блокчейна Bitcoin, відіграють важливу роль у підтримці цілісності цього реєстру. Інші типи вузлів, такі як архівні вузли, обрізані вузли та вузли SPV (Simplified Payment Verification), також вносять свій вклад у мережу різними способами. Протокол консенсусу забезпечує, що всі ці вузли погоджуються зі станом блокчейна, роблячи Bitcoin стійким до цензури та шахрайства.

#### Запобігання змінам
Управління в Bitcoin є життєво важливим для запобігання довільним або зловмисним змінам у протоколі. Це досягається за допомогою механізму консенсусу, який вимагає широкої згоди серед спільноти. Розробники з програмними знаннями відіграють значну роль у пропонуванні змін, але ці зміни мають бути прийняті ширшою спільнотою, щоб їх було впроваджено.
Bitcoin Core та альтернативні реалізації мають супроводжувачів, які наглядають за розробкою та підтримкою програмного забезпечення. Ці супроводжувачі відповідають за злиття змін коду, переконуючись, що вони дотримуються правил консенсусу і не вводять вразливостей.

#### М'які Форки проти Жорстких Форків

М'які форки - це зміни, які посилюють існуючі правила протоколу Bitcoin, роблячи деякі раніше дійсні транзакції недійсними. Вони сумісні з попередніми версіями, що означає, що вузли, які не оновлені, все ще впізнають нові правила. Прикладом м'якого форку є виправлення помилки переповнення в 2010 році, яке запобігло створенню грошей з повітря.

Жорсткі форки - це зміни, які послаблюють існуючі правила, дозволяючи нові типи транзакцій. Вони не сумісні з попередніми версіями, що означає, що вузли, які не оновлені, не впізнають нові правила. Прикладом жорсткого форку може бути необхідність для проблеми Року 2106, щоб забезпечити продовження функціонування Bitcoin після цієї дати.

![Зображення](assets/en/2/12.webp)

![Зображення](assets/en/2/13.webp)

### Приклади Управління

Декілька прикладів з реального життя ілюструють управління Bitcoin на практиці. Виправлення помилки переповнення в 2010 році було м'яким форком, який вирішив критичний недолік. Проблема Року 2106, ймовірно, потребуватиме жорсткого форку для вирішення її наслідків. Перехід від найдовшого ланцюга до ланцюга з найбільшою кількістю роботи відображає значне рішення управління, яке вплинуло на досягнення консенсусу.

Управління Bitcoin також вирішує реальні зміни у використанні протоколу. Наприклад, введення ординалів та інскрипцій ілюструє, як зміни протоколу можуть не забороняти транзакції. Аналогічно, впровадження повного RBF (Replace-By-Fee) змінило процедури заміни транзакцій без зміни правил консенсусу.

#### Мотивації для Змін та Консенсусу

Зміни в Bitcoin можуть бути мотивовані різними причинами, такими як виправлення критичних помилок, введення нових функцій або обмеження змін з економічних або політичних причин. Ці мотивації часто призводять до дебатів у спільноті про те, що вважається помилкою проти функції та загальний вплив на мережу.

Механізм консенсусу Bitcoin робить його по суті політичним, вимагаючи широкої згоди для прийняття змін. Цей політичний аспект є критично важливим для збереження децентралізованої природи мережі та забезпечення того, щоб будь-які модифікації були в інтересах спільноти.

Запуск вузлів може валідувати правила Bitcoin та брати участь у мережі, навіть з різними протоколами комунікації, як-от Blockstream Satellite. Це підкреслює розділення між механізмом консенсусу Bitcoin та методами передачі даних, які використовує мережа. Економічне значення вузлів, особливо тих, що належать великим суб'єктам, як-от Binance, може впливати на прийняття змін. Ці суб'єкти мають значні економічні інтереси в мережі та можуть впливати на рішення, запускаючи впливові вузли.

### Дебати щодо Розміру Блоку

Дебати щодо розміру блоку були значною проблемою управління, яка оберталася навколо питання про збільшення розміру блоку Bitcoin. Ця суперечка була вирішена з впровадженням SegWit, м'якого форку, який збільшив ефективний розмір блоку та дозволив Lightning Network.

![Зображення](assets/en/2/14.webp)

### Примусові Зміни та Правило Більшості

Були юридичні спроби змусити розробників Bitcoin змінити правила блокчейна на особисту вигоду, такі як позови Крейга Райта. Ці спроби підкреслюють виклики та етичні міркування, що виникають у управлінні Bitcoin.
У Bitcoin вирішальну роль відіграє правило більшості. Якщо 60% майнерів приймають нове правило, їхні блоки будуть відхилені тими, хто використовує оригінальний Bitcoin Core, що призведе до розколу. Прикладом невдалого жорсткого розгалуження через відсутність підтримки спільноти є Bitcoin Satoshi's Vision (BSV).
Давайте коротко розглянемо деякі важливі концепції.

**Примусове м'яке розгалуження (Forced Soft Fork)**: Концепція впровадження обмежувальних правил для зміни Bitcoin може призвести до подальших розколів і проблем управління. Цей підхід ілюструє складності та потенційні конфлікти всередині спільноти Bitcoin.

**Атака 51% (51% Attack)**: Атака 51% описує сценарій, коли більшість обчислювальної потужності може атакувати Bitcoin, майнючи порожні блоки. Це могло б ефективно знищити мережу, якщо спільнота не прийме нові правила консенсусу для вирішення атаки.

**Перевірка-Блокування-Часу-Підтвердження (Check-Lock-Time-Verify, CLTV)**: CLTV є прикладом зміни управління, впровадженої як м'яке розгалуження. CLTV забезпечує, що транзакції є дійсними лише після певного часу, що є корисним для платіжних каналів та резервних ключів. Ця зміна посилила правила, використовуючи опкод, який раніше нічого не робив.

На завершення, майбутнє та зміни в Bitcoin визначаються колективною волею його користувачів. Значні зміни вимагають широкого консенсусу, що відображає децентралізований та політичний характер управління Bitcoin.

# Концепції першого рівня

<partId>5300855f-e5e4-5bca-9afe-2397f7c76260</partId>

## Компоненти вузла в Bitcoin

<chapterId>75ea1d88-ee6f-5f98-af90-e4758c55e606</chapterId>
<professor>happy-panda</professor>

![Відео](https://youtu.be/hGS8Cuj5Zb4)

Адам Гібсон розбирає різні компоненти вузла Bitcoin. Розділ зосереджений на ролі, яку кожен компонент відіграє у підтримці функціональності та цілісності мережі. Зокрема, він зосереджується на тому, чому ми повинні запускати вузол bitcoin, що робить вузол bitcoin, і як функціонують різні компоненти вузла bitcoin.

### Вступ до вузлів Bitcoin

Розуміння ролі вузлів Bitcoin є критично важливим для будь-кого, хто залучений до мережі Bitcoin. Запуск вузла Bitcoin дозволяє користувачам валідувати транзакції, брати участь у консенсусі та контролювати свою приватність. Ця лекція заглиблюється в те, чому запуск вузла Bitcoin є корисним і як це сприяє загальній безпеці та децентралізації мережі Bitcoin.

### Чому запускати вузол Bitcoin?

Запуск вузла Bitcoin є важливим з кількох причин:

1. **Верифікація**: Запускаючи вузол, ви можете самостійно верифікувати транзакції, переконуючись, що Bitcoin, який ви отримуєте, є дійсним, не покладаючись на треті сторони.
2. **Участь у консенсусі**: Вузли відіграють вирішальну роль у визначенні правил мережі Bitcoin, тому участь у консенсусі допомагає підтримувати цілісність і безпеку блокчейна.
3. **Приватність та контроль**: Запуск власного вузла забезпечує, що вам не потрібно покладатися на зовнішні вузли, які можуть порушити вашу приватність, відстежуючи ваші транзакції та баланс гаманця.

### Що робить вузол Bitcoin?

- **Зберігає список пірів**: Вузлам необхідно знаходити та підключатися до інших вузлів у мережі для обміну інформацією.
- **Отримує та відправляє дійсні транзакції та блоки**: Вузли Bitcoin відповідальні за розповсюдження дійсних транзакцій та блоків по всій мережі.
- **Зберігає історію блоків та найважчий ланцюг**: Вузли зберігають власну копію блокчейна, що дозволяє їм валідувати автентичність транзакцій та блоків.
- **Підтримує список дійсних кандидатів; mempool**: Вузлам необхідно зберігати список можливих кандидатів на транзакції у mempool для включення в блоки.

![мережа вузлів](assets/en/3/18.webp)
**ПРИМІТКА**: Mempool - це тимчасова зона зберігання для транзакцій, які були перевірені, але ще не включені до блоку.

### Компоненти вузла

#### Модулі Bitcoin Core

![Модулі Bitcoin core](assets/en/3/19.webp)

- **Виявлення пірів**: Процес, за допомогою якого вузол знаходить інші вузли для підключення.
- **Двигун перевірки**: Двигун перевірки відповідає за перевірку валідності транзакцій та блоків відповідно до правил мережі.
- **RPC (Віддалений Виклик Процедур)**: Bitcoin Core включає інтерфейс RPC, який дозволяє зовнішнім додаткам, таким як гаманці, взаємодіяти з вузлом.
- **Зберігання блоків та Стан Ланцюга**: Bitcoin Core може зберігати весь Blockchain або ні, залежно від того, чи є вузол архівним або обрізаним. Він також зберігає поточний стан мережі (набір UTXO) на диску.

#### Що можемо видалити?

- **Майнер**: Більшість вузлів Bitcoin не беруть участі в майнінгу через високі вимоги до обчислювальної потужності.
- **RPC (Сервер)**: Bitcoin Core реалізує інтерфейс JSON-RPC, до якого можна отримати доступ за допомогою командного рядка bitcoin-cli.
- **Гаманець (disablewallet)**: Якщо ви віддаєте перевагу використанню зовнішнього гаманця, ви можете вимкнути функціональність гаманця в Bitcoin Core. Це дозволяє вам управляти вашими приватними ключами окремо.
- **Mempool (blocksonly)**: Для користувачів, які прагнуть мінімізувати використання пропускної здатності, запуск вузла "blocksonly" може бути рішенням, де вузол обробляє лише блоки, ігноруючи транзакції.

### Стан Ланцюга

#### Де знаходяться монети?

Монети не зберігаються в адресах; вони розташовані в UTXO, які представляють всі виходи транзакцій, що не були витрачені. Цю інформацію можна отримати за допомогою команди:

```Bash
bitcoin-cli gettxoutsetinfo
```

![інформація про набір utxoset](assets/en/3/20.webp)

Ми можемо перевірити, що кількість Bitcoinів вірна.

#### Для кожного UTXO, стан ланцюга має:

- Txid.
- Індекс виходу.
- У якому блоку знаходиться UTXO.
- Чи є це coinbase UTXO.

**ВАЖЛИВО**: Транзакції не те саме, що і UTXO.

![Txs та UTXO](assets/en/3/21.webp)

#### Mempool

Це список непідтверджених транзакцій у кожному вузлі, які називаються кандидатними транзакціями. Зберігається в RAM для швидкого доступу і не є частиною консенсусу.

#### Міркування щодо безпеки для вузлів Bitcoin

Безпека має вирішальне значення при запуску вузла Bitcoin. Ось деякі ключові моменти, які слід враховувати:

#### Уникнення Централізації

Спирання на єдине джерело для даних блокчейна, таке як завантаження всіх блоків з центрального сервера, становить значні ризики. Для збереження децентралізованої природи Bitcoin, вузли повинні підключатися до кількох пірів і перевіряти отримані дані.

#### Попередження Атак Ізоляції

Атаки ізоляції відбуваються, коли вузол обманом змушений підключатися до обмеженої кількості пірів, дозволяючи атакуючому подавати йому некоректні дані. Підключаючись до різноманітного набору пірів і перевіряючи отримані дані, вузли можуть захистити себе від цих атак.

#### Управління Підключеннями до Пірів

Вузлам необхідно ретельно управляти своїми підключеннями до пірів, щоб переконатися, що вони не підключаються до зловмисних акторів. Це включає в себе підтримку списку заблокованих пірів, які проявили підозрілу поведінку, та регулярне оновлення списку пірів, щоб уникнути залежності від невеликої групи вузлів.

#### Важливість Набору UTXO

Набір UTXO представляє поточний стан Bitcoin, перелічуючи всі невитрачені виходи транзакцій. Він має вирішальне значення для перевірки транзакцій і забезпечення того, щоб монети не були витрачені більше одного разу. Збереження цього набору маленьким і легкодоступним є важливим для підтримки ефективності мережі.
#### Висновок
Запуск вузла Bitcoin є потужним способом участі у мережі Bitcoin, надаючи вам можливість верифікувати транзакції, підтримувати приватність та сприяти безпеці та децентралізації блокчейну. Незалежно від того, чи вирішите ви запустити повний вузол або налаштувати своє середовище шляхом обрізання блокчейну або відключення певних компонентів, розуміння основних функцій та міркувань безпеки вузла Bitcoin дозволить вам приймати обізнані рішення та сприяти постійному розвитку Bitcoin.

## Структури даних Bitcoin

<chapterId>5ed314b1-8293-567d-bf03-730e8c9c774b</chapterId>
<professor>radio-talent</professor>

![відео](https://youtu.be/okvV9hqDOtM)

Основна мета цієї лекції - провести вас через процес парсингу блоку Bitcoin, написавши парсер на Rust. Це включає розуміння структури блоків та транзакцій Bitcoin, а також реалізацію необхідної логіки для вилучення та інтерпретації цих даних.

### Парсинг блоків та транзакцій Bitcoin на Rust

#### Компоненти для парсингу

Для парсингу блоку Bitcoin вам потрібно зосередитись на наступних компонентах:

1. **Заголовок блоку**
2. **Транзакції в межах блоку**
3. **Входи та виходи транзакцій**

#### Структура заголовка блоку

Заголовок блоку є каменем основи блоку Bitcoin і містить наступні поля:

- **Версія**: Вказує версію блоку.
- **Попередній блок**: Посилання на попередній блок у блокчейні.
- **Корінь Меркла**: Хеш, що представляє комбінований хеш усіх транзакцій у блоку.
- **Часова мітка**: Час, коли блок був видобутий.
- **Біти**: Цільовий поріг для дійсного хешу блоку.
- **Nonce**: Значення, яке майнери коригують, щоб досягти хешу нижче цільового порогу.
- **Кількість транзакцій**: Кількість транзакцій у блоку.

**Примітка**: Під час майнінгу хешуються лише перші 80 байтів (що складають заголовок блоку).

![Структура заголовка блоку](assets/en/3/1.webp)

#### Спрощення

Щоб наш приклад був зрозумілим:

- Ми зосередимося на парсингу блоків до SegWit (спадкових), уникаючи додаткової складності Segregated Witness.
- Ми пропустимо деякі опкоди в мові скриптів Bitcoin, зосереджуючись на кількох, які нам потрібні для парсингу повного блоку.

#### Структура транзакції

Кожна транзакція в блоку Bitcoin містить наступне:

- **Версія**: Версія транзакції.
- **Кількість входів**: Кількість входів транзакції.
- **Входи**: Список входів.
  - **Попередній вихід (outpoint)**: Посилання на попередній вихід.
    - **Хеш**: Хеш згаданої транзакції.
    - **Індекс**: Індекс конкретного виходу в транзакції, називається "vout".
  - **Довжина скрипта**: Довжина скрипта підпису.
  - **Скрипт підпису**: Скрипт для підтвердження авторизації транзакції.
  - **Послідовність**: Версія транзакції, визначена відправником.
- **Кількість виходів**: Кількість виходів транзакції.
- **Виходи**: Містить значення та ScriptPubKey.
  - **Значення**: Значення транзакції.
  - **Довжина скрипта PubKey**: Довжина скрипта PubKey.
  - **Скрипт PubKey**: Містить публічний ключ як налаштування для претензії на вихід.
- **Час блокування**: Вказує висоту блоку або часову мітку, коли ця транзакція може бути включена в блок.

![Структура транзакції](assets/en/3/2.webp)
![Структура TxIn](assets/en/3/3.webp)
![Структура Outpoint](assets/en/3/4.webp)
![Структура TxOut](assets/en/3/5.webp)

#### Техніки парсингу
У Rust ми можемо використовувати різні техніки для парсингу цих структур:
- Використовуйте `from_le_bytes` для читання даних у форматі Little Endian.
- Реалізуйте власний трейт `parse` для обробки логіки парсингу різних структур.

```Rust
trait Parse: Sized {
    fn parse(bytes: &[u8]) -> Result<(Self, &[u8]), Error>;
}
```

- Реалізуйте узагальнений парсинг для списків та специфічних типів, таких як `VarInt`, `U32`, `U64` тощо.

```Rust
impl Parse for i32 {
    fn parse(bytes: &[u8]) -> Result<(Self, &[u8]), Error> {
        let val = i32::from_le_bytes(bytes[0..4].try_into()?);
        Ok((val, &bytes[4..]))
    }
}
```

### Відлагодження та Тестування

Щоб переконатися, що наш парсер працює правильно:

- Порівняйте розпарсені дані з відомими деталями блоку (наприклад, з mempool.space).
- Перевірте, що кількість розпарсених транзакцій та деталі блоку відповідають очікуваним значенням.

### Обробка Особливих Випадків та Парсинг Скриптів

#### Реалізація Функції 'parse'

Ми реалізуємо функцію `parse` для обробки повного блоку, включаючи заголовок блоку та транзакції. Це включає читання даних блоку та вилучення відповідних полів.

```Rust
impl Parse for Block {
    fn parse(bytes: &[u8]) -> Result<(Self, &[u8]), Error> {
        let (header, bytes) = Parse::parse(bytes)?;
        let (transactions, bytes) = Parse::parse(bytes)?;

        let block = Block {
            header, transactions
        };

        Ok((block, bytes))
    }
}
```

#### Модифікація Заголовка Блоку

Нам потрібно налаштувати нашу логіку парсингу, щоб видалити кількість транзакцій зі структури заголовка блоку, розглядаючи її як окрему сутність.

```Rust
impl Parse for BlockHeader {
    fn parse(bytes: &[u8]) -> Result<(Self, &[u8]), Error> {
        let (version, bytes) = Parse::parse(bytes)?;
        let (prev_block, bytes) = Parse::parse(bytes)?;
        let (merkle_root, bytes) = Parse::parse(bytes)?;
        let (timestamp, bytes) = Parse::parse(bytes)?;
        let (bits, bytes) = Parse::parse(bytes)?;
        let (nonce, bytes) = Parse::parse(bytes)?;

        let header = BlockHeader {
            version, prev_block, merkle_root, timestamp, bits, nonce,
        };

        Ok((header, bytes))
    }
}
```

#### Визначення Структури

Визначте нову структуру `Block`, яка містить як заголовок блоку, так і список транзакцій.

```Rust
struct Block {
    header: BlockHeader,
    transactions: Vec<Transaction>,
}
```

#### Елементи Синтаксису Rust

Введіть елементи синтаксису Rust, такі як знак питання (`?`) для обробки помилок. Це спростить наш код і зробить його більш читабельним.

#### Перевірки

Додайте перевірки, щоб переконатися, що після обробки повного блоку не залишилося нерозпарсених байтів. Це забезпечує цілісність нашого процесу парсингу.

#### Особливі Випадки, як-от Транзакції Coinbase

Транзакції Coinbase, які є першою транзакцією в блоку, використовуваною для отримання винагороди за блок, мають унікальні характеристики. Нам потрібно належним чином обробити ці особливі випадки.

```Rust
struct OutPoint {
    txid: [u8; 32],
    vout: u32,
}

impl OutPoint {
    fn is_coinbase(&self) -> bool {
        self.txid == [0; 32] && self.vout == 0xFFFFFFFF
    }
}
```
Для аналізу скриптів у транзакціях ми зосередимося на поширених опкодах, таких як `OP_CHECKSIG`, `OP_HASH160` та `OP_PUSH`. Аналіз цих скриптів є критично важливим для валідації транзакцій та обробки помилок.
```Rust
enum OpCode {
    False,
    Return,
    Dup,
    Equal,
    CheckSig,
    Hash160,
    EqualVerify,
    Push(Vec<u8>),
}

impl Parse for OpCode {
    fn parse(bytes: &[u8]) -> Result<(Self, &[u8]), Error> {
        match bytes[0] {
            v @ 1..=75 => {
                let data = bytes[1..(v as usize + 1)].iter().cloned().collect();
                Ok((OpCode::Push(data), &bytes[(v as usize + 1)..]))
            },
            76 => {
                let len = bytes[1] as usize;
                let data = bytes[2..(len + 2)].iter().cloned().collect();
                Ok((OpCode::Push(data), &bytes[(len + 2)..]))
            },

            0 => Ok((OpCode::False, &bytes[1..])),

            106 => Ok((OpCode::Return, &bytes[1..])),
            118 => Ok((OpCode::Dup, &bytes[1..])),
            135 => Ok((OpCode::Equal, &bytes[1..])),

            136 => Ok((OpCode::EqualVerify, &bytes[1..])),
            169 => Ok((OpCode::Hash160, &bytes[1..])),
            172 => Ok((OpCode::CheckSig, &bytes[1..])),

            _ => todo!()
        }
    }
}
```

![op_checksig](assets/en/3/6.webp)
![op_hash160](assets/en/3/7.webp)
![op_push](assets/en/3/8.webp)

#### Виклики в аналізі скриптів

Аналіз скриптів може представляти виклики, особливо з транзакціями coinbase. Важливо враховувати крайні випадки та правильно їх обробляти, щоб забезпечити точний аналіз.

```Rust
impl Parse for Script {
    fn parse(bytes: &[u8]) -> Result<(Self, &[u8]), Error> {
        let (len, bytes) = VarInt::parse(bytes)?;
        let mut script_bytes = &bytes[..len.0 as usize];
        let mut opcodes = Vec::new();
        while !script_bytes.is_empty() {
            let (opcode, bytes) = OpCode::parse(script_bytes)?;
            script_bytes = bytes;
            opcodes.push(opcode);
        }

        Ok((Script(opcodes), &bytes[len.0 as usize..]))
    }
}
```

#### Компактні блоки

Наразі використання компактних блоків спрямоване на підвищення ефективності передачі даних між вузлами. Це зменшує використання пропускної здатності та прискорює синхронізацію шляхом надсилання транзакцій, яких бракувало в мемпулі, заповнення їх транзакціями, які вузол вже мав у блоку, а потім їх валідація.

#### Використання існуючих бібліотек

Для додатків, критичних до консенсусу, рекомендується використовувати існуючі бібліотеки, щоб уникнути помилок і забезпечити безпеку, як [rust-bitcoin](https://docs.rs/bitcoin/latest/bitcoin/) або [bitcoin-dev-kit](https://docs.rs/bdk/latest/bdk/). Реалізація власного парсера може бути освітньою, але також ризикованою в виробничих середовищах.

![libraries](assets/en/3/9.webp)

### Ефективність та безпека в майнінгу Bitcoin

#### Ефективність у майнінгу

Майнінг порожніх блоків може бути більш ефективним для майнерів:

- Майнери починають майнити порожні блоки, щоб заощадити час.
- Порожні блоки можуть бути видобуті швидко до переходу на повний блок, як тільки попередній блок підтверджено.
#### Причини видобутку порожніх блоків

Порожні блоки іноді видобуваються через проблеми з часом. Майнери можуть не отримати повний список транзакцій до моменту початку видобутку наступного блоку, тому вони вирішують видобувати порожній блок замість цього.

![порожній блок](assets/en/3/10.webp)

#### Зловмисний видобуток порожніх блоків

Хоча зловмисний видобуток порожніх блоків можливий, він не спостерігався. Основна причина порожніх блоків - це обмеження за часом, а не зловмисний намір.

#### Наслідки порожніх блоків

Поява порожніх блоків є нормальним аспектом процесу видобутку і в основному пов'язана з проблемами часу. Хоча вони не містять транзакцій, вони все ж розширюють блокчейн і сприяють безпеці мережі.

#### Важливість безпеки

Безпека у видобутку Bitcoin є надзвичайно важливою. Дотримуючись кращих практик і використовуючи добре перевірені бібліотеки, майнери та розробники можуть забезпечити цілісність блокчейну та захистити від потенційних вразливостей.

На завершення, аналіз блоків та транзакцій Bitcoin у Rust передбачає розуміння складних структур і впровадження ефективних методів парсингу. Обробка спеціальних випадків та парсинг скриптів вимагає обережного розгляду, і зосередження на ефективності та безпеці забезпечує міцність мережі Bitcoin.

## Огляд програмного забезпечення Bitcoin та реалізації вузлів

<chapterId>96d64781-fc27-5209-88d8-2acf00d05ea8</chapterId>
<professor>mad-salad</professor>

![Відео](https://youtu.be/xOdz9GEiShM)

Даніела Броззоні пропонує всеосяжний огляд програмного стеку Bitcoin Layer 1, пояснюючи шари, які складають основу протоколу Bitcoin (тобто вузли Bitcoin та гаманці Bitcoin) та як будувати програмне забезпечення Bitcoin з введенням у бібліотеки Bitcoin та глибоким зануренням у розробку Bitcoin Development Kit (BDK).

### Огляд програмного забезпечення Bitcoin

Програмний стек Bitcoin є фундаментальним для його функціонування і складається з різних елементів, включаючи вузли та гаманці. Критичною частиною цього екосистеми є Bitcoin Development Kit (BDK), який ми детальніше розглянемо пізніше. Спочатку зосередимося на ролі вузлів у мережі Bitcoin.

#### Вузли Bitcoin

Вузли Bitcoin є кістяком мережі Bitcoin. Вони з'єднуються один з одним, обмінюються транзакціями та блоками, і валідують вхідні дані. Існують різні типи вузлів, кожен з яких виконує унікальну роль:

- **Повні вузли**: Ці вузли зберігають весь блокчейн і валідують усі транзакції та блоки. Вони забезпечують високий рівень безпеки і є незамінними для децентралізації мережі.

  - **Архівні вузли**: Підмножина повних вузлів, архівні вузли зберігають усі дані блокчейну, роблячи їх цінними для історичного аналізу та відлагодження.

  ![архівний вузол](assets/en/3/11.webp)

  - **Обрізані вузли**: Обрізані вузли економлять місце на диску, зберігаючи лише частину блокчейну, видаляючи старі дані, які більше не потрібні для валідації.

  ![обрізаний вузол](assets/en/3/12.webp)

#### Bitcoin Core

Bitcoin Core є найбільш широко використовуваною реалізацією повного вузла. Він виконує подвійні функції як повний вузол, так і гаманець. Ключові аспекти Bitcoin Core включають:

- **Зручність використання**: Його можна використовувати через інтерфейс командного рядка (CLI) та графічний інтерфейс користувача (GUI).
- **Відкритий код**: Код є відкритим, що дозволяє розробникам вносити свій вклад і перевіряти його роботу.
- **Мова**: Написаний на C++ з тестами на Python, забезпечуючи надійну продуктивність і надійність.

![cli-gui](assets/en/3/13.webp)

##### Дослідження Bitcoin Core
Щоб отримати практичний досвід роботи з Bitcoin Core, можна скомпілювати та запустити тести за допомогою Git. Цей процес включає:
- Компіляцію кодової бази для створення виконуваної версії. [bitcoin github](https://github.com/bitcoin/bitcoin) доступ до doc/build-\*.md для інструкцій.

```Bash
./autogen.sh
./configure
make # використовуйте "-j N" для N паралельних завдань
make install # необов'язково
```

- Запуск тестів, щоб переконатися, що все працює правильно. Інструкції можна знайти [тут](https://github.com/bitcoin/bitcoin/blob/master/test/README.md)

```Bash
make check

#індивідуальні тести можна запускати безпосередньо, викликаючи скрипт тесту, наприклад:
test/functional/feature_rbf.py

#запустити всі можливі тести
test/functional/test_runner.py
```

- Створення та виконання тесту на Python для перевірки конкретної функціональності. Файл [example.py](https://github.com/bitcoin/bitcoin/blob/master/test/functional/example_test.py) є детально прокоментованим прикладом тестового випадку, який використовує інтерфейси RPC та P2P.

#### Альтернативні реалізації вузлів

Окрім Bitcoin Core, існує кілька альтернативних реалізацій вузлів:

- **Bitcoin Knots**: Пропонує більш розширені функції, ніж Bitcoin Core, займаючи більше місця та пам'яті.
- **LibBitcoin**: Гнучка та модульна реалізація.
- **btcd**: Написаний на Go, пропонує інші філософії дизайну.

Впровадження цих альтернатив супроводжується власними ризиками, особливо щодо правил консенсусу. Відхилення від встановлених правил валідації може призвести до розгалужень або невідповідностей. Проект Bitcoin Kernel прагне зменшити ці ризики, централізуючи код консенсусу, забезпечуючи уніформність між реалізаціями.

![implementation](assets/en/3/14.webp)

### Bitcoin гаманці та безпека

Bitcoin гаманці є важливими для безпечного управління вашими Bitcoin активами. Вони існують у різних формах, кожна з яких має свої особливості та міркування безпеки.

#### Типи Bitcoin гаманців

1. **Кастодіанські проти Некастодіанських**:

   - **Кастодіанські гаманці**: Управляються третіми сторонами, пропонуючи зручність, але вимагаючи довіри до кастодіана.
   - **Некастодіанські гаманці**: Контролюються користувачами, забезпечуючи вищу безпеку та приватність.

2. **Десктопні проти Мобільних**:

   - **Десктопні гаманці**: Зазвичай мають більше функцій та більш безпечні.
   - **Мобільні гаманці**: Пропонують зручність та портативність.

3. **On-Chain проти Lightning**:

   - **On-Chain гаманці**: Взаємодіють безпосередньо з блокчейном Bitcoin.
   - **Lightning гаманці**: Сприяють швидшим та дешевшим транзакціям поза ланцюгом.

4. **Холодні гаманці проти Гарячих гаманців**:
   - **Холодні гаманці**: Не підключені до інтернету, забезпечуючи вищу безпеку проти хакерських атак.
   - **Гарячі гаманці**: Підключені до інтернету, пропонуючи більшу доступність, але меншу безпеку.

#### Безпека холодних гаманців

Холодні гаманці високо цінуються за їх безпеку. Залишаючись офлайн, вони вроджено стійкі до онлайн-атак. Однак, важливо забезпечити, щоб транзакції, виконані через холодні гаманці, були безпечними та точними, щоб уникнути ненавмисної відправки Bitcoin шахраям.

#### Гаманці лише для перегляду

Гаманці лише для перегляду містять лише публічні ключі, дозволяючи користувачам отримувати Bitcoin та стежити за своїм балансом без можливості витрачати. Ця функція додає додатковий рівень безпеки для тих, хто потребує уважно стежити за своїми активами.

#### Основні функції Bitcoin гаманця

Незалежно від типу, кожен Bitcoin гаманець виконує три основні функції:

1. **Отримання Bitcoin**: Генерація адрес та моніторинг вхідних транзакцій.
2. **Відправлення Bitcoin**: Створення та трансляція транзакцій у мережу.
3. **Показ балансу**: Відображення поточного балансу гаманця.

#### Роль Bitcoin гаманців
- Біткойн-гаманці виступають як брелоки, що зберігають та генерують криптографічні ключі.
![keychain](assets/en/3/15.webp)

- Вони стежать за блокчейном на предмет вхідних транзакцій.

![monitor](assets/en/3/16.webp)

- Створюють транзакції, вибираючи невитрачені виходи транзакцій (UTXOs), встановлюючи входи та виходи, та оптимізуючи з точки зору приватності та комісій.

![tx_builder](assets/en/3/17.webp)

#### Повторне використання логіки гаманця

Враховуючи, що всі біткойн-гаманці мають схожі функції, повторне написання логіки гаманця є неефективним. Тут на допомогу приходить Bitcoin Development Kit (BDK).

### Bitcoin Development Kit (BDK) та Технічні Концепції

Bitcoin Development Kit (BDK) - це бібліотека, призначена для спрощення створення та управління біткойн-гаманцями.

#### Огляд BDK

BDK спрощує створення гаманця, надаючи функціональність вищого рівня на основі Rust Bitcoin. Вона підтримує кілька мов програмування через прив'язки, включаючи Kotlin, Swift та Python.

#### Інші Бібліотеки Bitcoin

Існує безліч бібліотек Bitcoin, які обслуговують різні мови програмування, такі як Python, JavaScript, Java, Go та C. Ці бібліотеки пропонують різноманітні інструменти для розробки Bitcoin.

#### Ключові Технічні Концепції

1. **Дескриптори**: Дескриптори описують, як отримати скрипти та адреси Bitcoin з ключів, дозволяючи більш гнучкі та потужні функції гаманця.
2. **PSBT (Частково Підписані Транзакції Bitcoin)**: PSBT - це формат для транзакцій, які потребують кількох підписів, сприяючи співпраці в транзакціях та підвищеній безпеці.
3. **Синтаксис Rust**: Ключові концепції в Rust, такі як `Option` для безпеки від null та тип `Result` для обробки помилок, є невід'ємною частиною розуміння та ефективного використання BDK.

#### Створення та Управління Транзакціями

BDK спрощує процес побудови, підписання та трансляції транзакцій:

1. **Побудова Транзакцій**: Вказуйте отримувачів, суми та комісії.
2. **Підписання Транзакцій**: Використовуйте PSBT для збору підписів.
3. **Трансляція Транзакцій**: Відправляйте завершені транзакції в мережу.

#### Приклад Робочого Процесу в BDK

- **Налаштування Гаманця**: Ініціалізуйте гаманець з дескрипторами.

```Rust
use bdk::{Wallet, SyncOptions};
use bdk::database::MemoryDatabase;
use bdk::blockchain::ElectrumBlockchain;
use bdk::electrum_client::Client;
use bdk::bitcoin;

fn main() -> Result<(), bdk::Error> {
  let wallet = Wallet::new(
    "tr(tprv8ZgxMBicQKsPf6WJ1Rr8Zmdsr6MaACS5K3tHw3QDQmFbkEsdnG3zAZzhjEgEtetL1jwZ5VAL85UaaFzUpAZPrS7aGkQ3GdM75xPu4sUxSiF/*)",
    None,
    bitcoin::Network::Testnet,
    MemoryDatabase::default(),
  )?;

  Ok(())
}
```

- **Генерація Адрес**: Створюйте нові адреси для отримання Bitcoin з тестнет-крану.

```Rust
//імпортуйте AddressIndex поза головною функцією
use bdk::wallet::AddressIndex;

  //Функція для додавання в головну функцію
  let address = wallet.get_address(AddressIndex::New)?;

```

- **Перевірка Балансу**: Стежте за балансом гаманця, спочатку підключившись до сервера Electrum, синхронізувавши гаманець і отримавши баланс з гаманця.

```Rust
    //підключіться до сервера Electrum і збережіть блокчейн
    let client = Client::new("ssl://electrum.blockstream.info:60002")?;
    let blockchain = ElectrumBlockchain::from(client);
```Rust
//синхронізація гаманця з блокчейном
wallet.sync(&blockchain, SyncOptions::default())?;

    //отримання балансу з вашого гаманця
    let balance = wallet.get_balance()?;
    println!("Це баланс вашого гаманця: {}", balance);
```

- **Створення, підписання та розповсюдження транзакцій**: Конструювання та завершення транзакцій, а потім їх розповсюдження в мережі.

```Rust
//Додайте до імпортів
use bdk::bitcoin::Address;
use bdk::{SignOptions};
use std::str::FromStr;
use bdk::blockchain::Blockchain;

    //створення транзакції psbt
    let mut builder = wallet.build_tx();
    let recipient_address = Address::from_str("tb1qlj64u6fqutr0xue85kl55fx0gt4m4urun25p7q").unwrap();

    builder
        .drain_wallet()
        .drain_to(recipient_address.script_pubkey())
        .fee_rate(FeeRate::from_sat_per_vb(2.0))
        .enable_rbf();
    let (mut psbt, tx_details) = builder.finish()?;
    println!("Це наш psbt: {}", psbt);
    println!("Це деталі нашої транзакції: {:?}", tx_details);

    //Підписання PSBT
    let finalized = wallet.sign(&mut psbt, SignOptions::default())?;
    println!("Чи підписаний мій PSBT? {}", finalized);
    println!("Це мій фіналізований PSBT: {}", psbt);


    let tx = psbt.extract_tx();
    let tx_id = tx.txid();
    println!("це моя Bitcoin транзакція: {}", bitcoin::consensus::encode::serialize_hex(&tx));
    println!("це мій ідентифікатор транзакції: {}", tx_id);

    //Розповсюдження транзакції
    blockchain.broadcast(&tx)?;
```

#### Друк TXID та розповсюдження транзакції

Присвоєння та друк ідентифікатора транзакції (TXID) дозволяє моніторити на платформах на кшталт mempool.space. Розповсюдження транзакції можна здійснити за допомогою методу `Blockchain.broadcast`, і перевірка деталей та статусу транзакції є критично важливою для забезпечення успішного поширення.

#### Утиліти BDK та розгляди приватності

BDK є незамінним для спрощення розробки Bitcoin гаманців. Для підвищення приватності рекомендуються інструменти на кшталт Electrum, Explora та особистих вузлів Bitcoin Core.

#### Мови програмування

При розробці проектів Bitcoin часто віддають перевагу Rust через його безпеку та ефективність. Однак вибір мови може варіюватися в залежності від конкретних вимог проекту та досвіду розробника.

#### Залежності BDK

BDK покладається на кілька ключових залежностей, включаючи Rust-Bitcoin та Rust-Miniscipt. Додаткові бібліотеки можуть бути використані для управління базами даних та криптографією.

Розуміючи ці компоненти, від вузлів Bitcoin та гаманців до Bitcoin Development Kit (BDK), ви можете з більшою впевненістю та компетентністю навігувати в екосистемі Bitcoin. Ці знання надають вам можливість розробляти надійні та безпечні додатки Bitcoin, сприяючи постійному розвитку цієї революційної технології.

# Lightning Network

## Історія платіжних каналів

### Історія платіжних каналів

Ласкаво просимо на нашу лекцію про сучасні платіжні рішення в технології блокчейн. Сьогодні ми розглянемо історичний контекст та ключові розробки мультихопових замків (MHLs) та Lytle Network.
#### Огляд та Історичний Контекст
Багатоступеневі замки (MHLs) та Мережа Lytle є передовими концепціями в технології блокчейн, які сприяють ефективним та безпечним мікроплатежам у мережі. Історично, потреба в цих інноваціях виникла через неефективність та обмеження, спостережувані при первинному впровадженні технологій блокчейн, зокрема Bitcoin. Занурюючись глибше, ви зрозумієте, як структури, засновані на темах, та шаруваті підходи, революціонізували транзакції в блокчейні.

### Структура, Заснована на Темах

Введення MHLs та Мережі Lytle означає зміну парадигми від традиційних, лінійних транзакцій блокчейну до більш складних, багатошарових систем. Шляхом розділення транзакцій на конкретні теми або сегменти, ці інновації дозволяють створити більш масштабовану та безпечну платіжну інфраструктуру, яка вирішує багато вроджених проблем ранніх реалізацій блокчейну.

### Проблеми з Bitcoin

Bitcoin, піонер технології блокчейн, представив децентралізовану систему, де транзакції транслюються по всій мережі. Хоча це було революційно, такий метод є в суті неефективним. Кожен вузол в мережі повинен підтвердити кожну транзакцію, що призводить до значних затримок та заторів, особливо при великих обсягах транзакцій.

Децентралізований процес валідації Bitcoin вимагає значних обчислювальних ресурсів. Кожна транзакція повинна бути перевірена та записана кількома вузлами, що споживає величезні обсяги енергії та обчислювальної потужності. Це не тільки збільшує експлуатаційні витрати, але й створює навантаження на пропускну здатність мережі, що призводить до збільшення комісій за транзакції та сповільнення часу обробки.

Хоча децентралізація Bitcoin є однією з його основних переваг, вона також створює значні виклики. Публічний характер блокчейну означає, що всі транзакції видимі для всіх, що викликає питання конфіденційності. Більше того, потреба в консенсусі серед численних вузлів може призвести до тиску на централізацію, оскільки обчислювальна потужність стає концентрованою в руках кількох великих суб'єктів.

### Платіжні Канали як Рішення

![Золота монета](assets/en/4/1.webp)_Метафора Золотого Стандарту_

Для вирішення неефективності та проблем конфіденційності Bitcoin, платіжні канали були запропоновані як прийнятне рішення. Мікро-платіжні канали дозволяють проводити транзакції поза ланцюгом, знижуючи потребу в постійному обміні даними по всій мережі. Це значно знімає навантаження з блокчейну, дозволяючи проводити швидші та дешевші транзакції.

Основний принцип за платіжними каналами полягає в концепції проведення транзакцій поза ланцюгом. Замість трансляції кожної транзакції по всій мережі, сторони можуть відкрити платіжний канал і провести численні транзакції між собою. Тільки відкриття та закриття каналу записуються в блокчейні, значно покращуючи ефективність та конфіденційність.

Незважаючи на позаланцюгову природу платіжних каналів, залишається можливість здійснення транзакцій в ланцюгу. Якщо виникає спір або одна зі сторін намагається обдурити, останній стан каналу може бути трансльований в блокчейн, забезпечуючи дотримання домовлених транзакцій та правильне розподілення коштів.

Платіжні канали представляють значний крок вперед у технології блокчейну, надаючи масштабований та безпечний метод проведення транзакцій, одночасно вирішуючи багато фундаментальних проблем, асоційованих з Bitcoin. Продовжуючи інновації та будування на цих основах, майбутнє блокчейну виглядає все більш обнадійливим.

На завершення, розуміння історичного контексту та викликів Bitcoin, а також інноваційних рішень, запропонованих через MHLs, Мережу Lytle та платіжні канали, надає всебічний погляд на поточний ландшафт та майбутній потенціал технології блокчейну.

## Історія Атомарного Маршрутизування

<chapterId>28be7b31-e6b2-5eea-a5ed-62ce0a154b6e</chapterId>
<professor>best-lion</professor>

![Відео](https://youtu.be/5OUgGHH6jPY)
У наших попередніх обговореннях ми розглянули основи базових платіжних каналів. Ці канали дозволяють двом учасникам, скажімо, Алісі та Бобу, безперешкодно проводити транзакції між собою. Однак, існує очевидне обмеження цієї моделі: Аліса може проводити транзакції лише з Бобом і не може це робити з іншими учасниками, наприклад, з Чарлі, якщо вона не створить окремі канали з кожним з них. Необхідність мати кілька каналів призводить до неефективності та проблем з масштабуванням, оскільки було б непрактично для Аліси відкривати прямий канал з кожним, з ким їй потрібно проводити транзакції.

### Централізовані Переходи

Щоб вирішити ці обмеження, Менні Розенфельд запропонував концепцію централізованих переходів у 2012 році. Ця модель ввела централізованих платіжних процесорів, таких як TrustPay, для маршрутизації платежів між користувачами. Хоча цей метод може зменшити потребу в кількох прямих каналах, він вводить значні недоліки. Централізовані переходи страждають від проблем безпеки, питань довіри, порушень приватності, потенціалу шахрайства, цензури та проблем надійності. Користувачі повинні довіряти цим централізованим сутностям для здійснення своїх транзакцій, що суперечить етосу децентралізації.

### Hashed Time Lock Contract (HTLC) та Імплементація

Обмеження та недоліки централізованих переходів вимагали більш безпечного та децентралізованого рішення. Ця потреба призвела до розробки Hashed Time Lock Contract (HTLC), запропонованого у 2015 році Джозефом Пуном та Тадеусом Дрейєром як частину Lightning Network. HTLC поєднує принципи часових замків та хеш-замків для забезпечення атомарності та бездовірності в транзакціях. Це означає, що транзакція або повністю завершується, або зовсім не відбувається, зменшуючи ризики, пов'язані з неповними платежами.

Робочий процес HTLC передбачає багатоетапний процес, який забезпечує безпечну маршрутизацію через кілька посередників. Припустимо, Аліса хоче заплатити Еріку через посередників Боба, Керол та Діану. Кожен крок у процесі передбачає створення транзакцій зобов'язань зі зменшенням часових замків та сум. За необхідності, останній крок може бути трансльований в мережу Bitcoin для фіналізації транзакції.

В HTLC Аліса блокує платіж за допомогою хешу секрету "R". Боб, Керол та Діана кожен створюють подібні контракти зі своїми наступними посередниками, забезпечуючи, що вони можуть претендувати на свої кошти лише якщо пред'являть правильний секрет "R". Цей механізм забезпечує атомарність; платіж повністю завершується або зазнає невдачі, захищаючи від часткових втрат коштів.

![Хеш-замок](assets/en/4/2.webp)_Функція хеш-замку_

### Практичні Розгляди та Динаміка Мережі

На практиці, потік платежів Аліси передбачає оплату Еріку через кілька посередників, таких як Боб, Керол та Діана. Кожен учасник у цьому ланцюгу відповідає за залучення коштів від попереднього учасника.

#### Оновлення Стану Каналу

Канали оновлюють свій стан на основі взаємних домовленостей та підписів між учасниками. Наприклад, Аліса та Боб можуть оновити стан свого каналу без використання секрету "R", якщо вони домовляться про умови транзакції.

#### Забезпечення Атомарності

Механізм HTLC забезпечує атомарність за допомогою часових замків та підписів. Цей захід забезпечує, що протокол платежу гарантує або повний успіх, або невдачу, захищаючи від часткових втрат коштів.

![Часовий замок та підписи](assets/en/4/3.webp)_Комбіновані обмеження_

#### Стимули та Відповідальність

Посередники, такі як Діана та Керол, мотивовані діяти правильно в мережі. Якщо вони не виконують свої обов'язки, наслідки, як правило, впливають лише на самого посередника, тим самим сприяючи відповідальній поведінці.

### Практичні Розгляди

Однак, більша кількість переходів у маршруті платежу може збільшити затримку, комісії та потенційну ненадійність. Відкриття кількох каналів може допомогти зменшити кількість переходів, необхідних для маршрутизації, підвищуючи загальну ефективність.

#### Граф Каналу та Ліквідність
Вузли в мережі можуть бути частиною публічно оголошеної графіки каналів або залишатися неоголошеними. Ліквідність цих каналів відіграє вирішальну роль у ефективному маршрутизуванні, оскільки вузлам потрібні достатні баланси для успішного пересилання платежів.

#### Маршрутизація з джерела та конфіденційність

Алісі потрібно знати топологію мережі, щоб вирішити, яким буде маршрут платежу. Маршрутизація з джерела використовується для збереження конфіденційності, незважаючи на складність маршрутизації платежів через кілька посередників.

![Маршрутизація з джерела](assets/en/4/4.webp)_Шлях маршрутизації з джерела_

#### Висновок

Підсумовуючи, належна робота вузла забезпечує атомарні платежі, а Мережа Блискавки прагне вирішити багато проблем, з якими стикаються традиційні платіжні системи, такі як Ripple. Використовуючи HTLCs та стратегічну маршрутизацію, Мережа Блискавки пропонує більш масштабоване, ефективне та безпечне рішення для децентралізованих платежів.

## Огляд BOLT

<chapterId>ba4b09ae-81de-53f2-8c15-316f037aaea9</chapterId>
<professor>another-satoshi</professor>

![Відео](https://youtu.be/1aIuKBkPlkg)

Біткойн-мережа функціонує як система обміну цінностями без довіри, в основному служачи як шар розрахунків, де транзакції записуються в публічний реєстр. Це забезпечує безпеку та незмінність, але має обмеження, особливо з точки зору швидкості транзакцій та комісій. В результаті, Біткойн може бути неефективним для повсякденних невеликих транзакцій.

Тут на сцену виходить Мережа Блискавки, яка функціонує як другий шар поверх блокчейну Біткойн. Ця платіжна мережа призначена для забезпечення швидких та недорогих транзакцій. Відкриваючи платіжний канал між двома сторонами, вони можуть здійснювати транзакції поза ланцюгом, записуючи лише початкові та кінцеві баланси в блокчейні Біткойн. Це значно зменшує навантаження на основну мережу, підвищуючи масштабованість та роблячи мікротранзакції реалізованими.

Щоб краще зрозуміти концепцію, розгляньте аналогію з рахунком у барі. Коли ви відкриваєте рахунок у барі, ви можете продовжувати замовляти напої, не платячи після кожного з них. Врешті-решт, ви розраховуєтеся за загальну суму в кінці вечора. Аналогічно, канал Блискавки дозволяє здійснювати кілька транзакцій поза ланцюгом, які розраховуються в ланцюгу лише після закриття каналу. Інша аналогія - це аеропорт, де маршрутизація платежу через кілька вузлів подібна до пересадок, щоб досягти вашого пункту призначення. Кожен вузол (або "рейс") допомагає спрямувати ваш платіж туди, куди потрібно, забезпечуючи ефективну маршрутизацію.

![аналогія аеропорту](assets/en/4/5.webp)_Аналогія аеропорту LN_

По суті, Мережа Блискавки доповнює Біткойн-мережу, вирішуючи її обмеження, перетворюючи її з простого шару розрахунків на універсальну систему, здатну ефективно обробляти повсякденні транзакції.

### **Специфікації Мережі Блискавки**

Протокол Мережі Блискавки детально визначений через 10 BOLTs (Основи Технології Блискавки). Ці BOLTs були узгоджені під час конференції в Мілані та служать основою для різних реалізацій Мережі Блискавки.

![bolt](assets/en/4/6.webp)_Діаграма BOLT_

#### BOLT 1 (Базовий Протокол)

BOLT 1 окреслює форматування повідомлень за допомогою структури Тип-Довжина-Значення (TLV), що забезпечує однакове розуміння повідомлень у різних реалізаціях. Комунікація зазвичай ведеться через певний TCP порт, і повідомлення можна категоризувати на:

- **Повідомлення комунікації**: Включають `Init`, `Error`, `Warning`, `Ping`, та `Pong` повідомлення, які встановлюють з'єднання, обробляють помилки, перевіряють статус з'єднання та замасковують трафік.
- **Повідомлення налаштування каналу**: Ці повідомлення є критично важливими під час фази встановлення каналу.
- **Повідомлення стану каналу**: Ці повідомлення обробляють оновлення в активних каналах, забезпечуючи синхронізацію обох сторін.
- **Повідомлення Gossip**: Використовуються для виявлення топології мережі та оновлень.
- **Експериментальні повідомлення**: Дозволяють тестувати нові функції без порушення роботи мережі.

#### BOLT 2 (Життєвий цикл каналу)

BOLT 2 занурюється в життєвий цикл каналу, починаючи від створення до нормальної експлуатації та, врешті-решт, закриття. Основні процеси включають:

- **Створення каналу**: На цьому етапі сторони відкривають канал, обмінюються підписами та створюють транзакцію фінансування.
- **Нормальна експлуатація**: Тут стан каналу постійно оновлюється за допомогою Hash Time-Locked Contracts (HTLCs). Повідомлення про зобов'язання та відкликання забезпечують згоду обох сторін щодо поточного стану.
- **Закриття**: Це включає закриття каналу, зазвичай через взаємну згоду та переговори про комісію, для фіналізації транзакцій без входження в нескінченний цикл закриття.

#### Механізм оновлення

HTLCs відіграють ключову роль у маршрутизації платежів у мережі, дозволяючи безпечні транзакції без довіри. Повідомлення про зобов'язання та відкликання забезпечують взаємну згоду щодо стану каналу та запобігають шахрайству.

#### Спеціальні повідомлення

Специфічні повідомлення, як-от `Update Fee`, коригують комісії майнерів для транзакцій зобов'язань, тоді як повідомлення `Channel Reestablish` забезпечують синхронізацію обох учасників після роз'єднань.

#### Закриття каналів

Канали можна закрити через взаємну згоду, односторонню дію або покарання, якщо виявлено шахрайство. Належне закриття безпечно фіналізує транзакції.

#### Обміни для управління ліквідністю

Обміни дозволяють виведення коштів на ланцюг та ефективне управління ліквідністю без закриття каналів. Майбутні рішення, як-от сплайсинг, розробляються для покращення цього процесу.

#### Заходи безпеки

Транзакції зобов'язань включають механізми, як-от nLockTime, OPCheckSequenceVerify та ключі відкликання, для забезпечення безпеки коштів та запобігання крадіжці.

### Маршрутизація та Onion маршрутизація

![onion routing](assets/en/4/7.webp)_Діаграма Onion маршрутизації_

Платежі маршрутизуються за допомогою Onion маршрутизації, яка включає створення зашифрованих пакетів, що надсилаються через кілька вузлів. HTLCs забезпечують безпеку транзакції, гарантуючи приватність та безпеку.

### Структура інвойсу

Інвойси Lightning Network (BOLT 11) кодуються в Bech32 та включають деталі, як-от хеш платежу, опис та термін дії. Кожен інвойс має використовуватися один раз, щоб запобігти проблемам повторного використання.

![Структура інвойсу](assets/en/4/8.webp)_BOLT11 Інвойс_

#### Шифрування та аутентифікація

Процедури рукостискання та шифрування (Chacha20) з аутентифікацією (Poly1305) забезпечують цілісність повідомлень та приватність у транзакціях Lightning.

#### Альтернативи

Інші методи запиту платежів, як-от LNURL, KeySend, та BOLT 12, пропонують різні функції та рівні адаптації, забезпечуючи гнучкість у мережі.

#### Відкриття мережі

Відкриття мережі в Lightning Network еволюціонувало від первинного використання IRC (Internet Relay Communication) до більш складного протоколу, визначеного BOLT 7. Цей протокол використовує специфічні повідомлення Lightning—зазвичай згадувані як повідомлення gossip—для виявлення та підтримки топології мережі.

#### Повідомлення Bolt7

Ключові повідомлення BOLT 7 включають:

- **Оголошення вузла**: Це повідомлення транслює існування вузла.
- **Оголошення каналу**: Це повідомлення інформує мережу про створення нового каналу.
- **Підпис оголошення**: Це забезпечує автентичність трансльованих повідомлень.
- **Оновлення каналу**: Це повідомлення передає оновлення щодо каналу, такі як структури комісій та максимальні суми HTLC.

#### Процес оголошення каналу

Процес починається з обміну місцевими учасниками даними про ідентичність та деталями каналу. Після перевірки підписів та транзакцій фінансування, вони оголошують канал своїм мережевим пірам, забезпечуючи оновлення всієї мережі з найсвіжішими змінами топології.

#### DNS Bootstrap

Відкриття вузлів Lightning спрощується за допомогою DNS та запитів до Bitcoin DNS seed, які надають інформацію про IP та вузли. Цей первинний механізм відкриття допомагає вузлам швидко підключитися до мережі.

#### Оголошення функцій
Вузли можуть транслювати свої підтримувані функції, забезпечуючи зворотну сумісність, а також дозволяючи впровадження необов'язкових покращень. Така гнучкість забезпечує гладку взаємодію всіх вузлів, навіть коли протокол розвивається.

#### Обробка Bolt11 Рахунків-фактур

Мережа забезпечує унікальність рахунків-фактур BOLT 11, щоб уникнути кількох платежів за один і той же рахунок-фактуру. Якщо рахунок-фактура використовується повторно, вузли мережі перехоплюють і запобігають подвійним платежам, зберігаючи цілісність транзакції.

#### Передача Голосових Даних

Хоча це можливо, передача голосових даних через Lightning Network сильно стиснута і обмежена розміром повідомлення. Прикладом застосування є Sphinx, який досліджує інноваційне використання Lightning для передачі даних.

#### Сценарії Використання та Дебати

Мета Lightning Network є предметом постійних дебатів. Хоча вона спочатку була розроблена для платежів, інші сценарії використання, такі як передача даних, також досліджуються, хоча і не мають універсального прийняття. Спільнота постійно обговорює потенційні застосування мережі та покращення протоколу.

#### Обговорення Спільноти

Спільнота Lightning Network є активною, ведучи постійні дебати та обговорення щодо сценаріїв використання, застосувань протоколу та потенційних покращень. Це співробітницьке середовище сприяє інноваціям, одночасно забезпечуючи розвиток мережі, щоб задовольнити потреби користувачів.

На завершення, розуміння Важливості Другого Рівня, Специфікацій Lightning Network та Механізмів Відкриття Мережі є критично важливим для кожного, хто прагне заглибитися в тонкощі Lightning Network. Це складна, але високо винагороджувана сфера, яка обіцяє трансформувати майбутнє цифрових транзакцій.

## Основні Клієнти LN

<chapterId>a2ad8db4-aea2-5231-927c-616c53db31bf</chapterId>
<professor>another-satoshi</professor>

![Відео](https://youtu.be/a0Q_5dzpqKw)

Lightning Network (LN) представляє значний прорив у масштабованості та швидкості транзакцій Bitcoin. Клієнти LN, які зазвичай називаються Lightning гаманцями, є спеціалізованим програмним забезпеченням або додатками, що дозволяють користувачам здійснювати транзакції через Lightning Network. Ці гаманці служать важливим інтерфейсом між користувачем та LN, сприяючи миттєво врегульованим транзакціям з низькою комісією за допомогою шляхів поза ланцюгом.

Гаманці Lightning розроблені так, щоб процес був зручним для користувача, дозволяючи навіть тим, хто має мінімальні технічні знання, користуватися розширеними функціями Bitcoin. Забезпечуючи швидкі та економічно вигідні мікротранзакції, ці гаманці значно сприяють ширшому прийняттю Bitcoin для повсякденних транзакцій.

![Клієнти LN](assets/en/4/9.webp)_Гаманці Lightning_

### Гаманці Bitcoin vs. Гаманці Lightning

Гаманці Bitcoin та гаманці Lightning фундаментально відрізняються своєю архітектурою та сценаріями використання, хоча вони мають спільну особливість управління приватним ключем:

#### Гаманці Bitcoin:

- **Турбота про Приватний Ключ**: Основна увага гаманців Bitcoin приділяється тому, хто володіє приватним ключем. Це визначає безпеку та контроль над коштами користувача.
- **Складність Транзакцій**: Гаманці Bitcoin обробляють різні скрипти транзакцій, такі як Segregated Witness (SegWit) та Taproot, які оптимізують розмір транзакцій та покращують приватність та безпеку.

#### Гаманці Lightning:

- **Управління Приватним Ключем**: Подібно до гаманців Bitcoin, контроль над приватними ключами залишається критично важливим.
- **Управління Ліквідністю**: Відмінною особливістю гаманців Lightning є необхідність управління ліквідністю, що включає балансування локальної (вихідної) та віддаленої (вхідної) ліквідності для забезпечення гладкого маршрутизування транзакцій. Це вимагає від користувачів розуміння та оптимізації своїх каналів для забезпечення ефективного пересилання платежів.

#### Управління Ліквідністю в Гаманцях Lightning

Ефективне управління ліквідністю є каменем спотикання успішної роботи Lightning Network. Воно передбачає стратегічний баланс двох основних типів ліквідності:

#### Локальна (Вихідна) Ліквідність:

- Це представляє суму Bitcoin, яку користувач може відправити зі своїх Lightning каналів. Це критично важливо для ініціації платежів та забезпечення можливості маршрутизації транзакцій до одержувача.
- Це вказує на кількість Bitcoin, яку користувач може отримати через свої канали. Це також має велике значення, оскільки забезпечує можливість іншим відправляти платежі користувачу.
#### Приклад управління ліквідністю:

![Приклад ліквідності](assets/en/4/10.webp)_Ліквідність Lightning_

Розглянемо сценарій з Алісою, Бобом, Чарлі та Деном - типовими користувачами LN, які взаємопов'язані через різні канали:

- Аліса хоче заплатити Дену, але не має достатньої локальної ліквідності у своєму каналі з Бобом.
- Якщо у Боба є достатній баланс і канал з Чарлі, а у Чарлі є канал з Деном, платіж Аліси може бути перенаправлений через Боба та Чарлі до Дена.

![Приклад ліквідності](assets/en/4/11.webp)_Ліквідність Lightning_

Однак, якщо будь-який з цих каналів зіткнеться з проблемами з ліквідністю або з'єднанням, транзакція може зазнати невдачі. Це ілюструє важливість підтримки збалансованої ліквідності по всій мережі.

#### Виклики в мережі Lightning:

- **Виснаження каналу**: З часом канали можуть стати незбалансованими, з концентрацією коштів на одному боці, що обмежує можливості транзакцій.
- **Проблеми з'єднання**: Ефективне маршрутизування транзакцій вимагає надійних мережевих з'єднань, що може бути складно підтримувати.

Для вирішення цих викликів, Провайдери Послуг Ліквідності (LSPs) пропонують послуги для управління ліквідністю, часто за плату, забезпечуючи користувачам оптимальні баланси каналів для плавних транзакцій.

### Різні гаманці та їх функції

Доступні різні гаманці Lightning, кожен з яких задовольняє різні потреби та переваги користувачів. Ось деякі приклади:

#### Гаманець Satoshi:

- **Функції**: Повністю опікунський, зручний для користувача, але закритий код з потенційними проблемами конфіденційності.

#### Albi:

- **Функції**: Розширення для браузера, відкритий код, підтримує як опікунські, так і неопікунські моделі, збільшуючи універсальність.

#### Breeze:

- **Функції**: Легкий вузол на телефоні, відкритий код, поєднує самоопіку з управлінням ліквідністю, забезпечуючи баланс контролю та зручності.

#### Phoenix:

- **Функції**: Схожий на Breeze, використовує модель LSP для ліквідності, відкритий код, зосереджений на простоті користувача та ефективному управлінні ліквідністю.

#### Відкритий Bitcoin Гаманець (OBW):

- **Функції**: Інтегрує гаманці на ланцюжку та Lightning, підтримує хостовані канали, відкритий код з розширеними функціями, підходить для досвідчених користувачів.

### Матриця опіки та управління ліквідністю

Гаманці можна класифікувати на основі того, хто володіє приватними ключами та хто управляє ліквідністю. Ця матриця допомагає користувачам вибирати гаманці, які відповідають їхнім перевагам щодо безпеки та зручності:

- **Опікунські Гаманці**: Третя сторона володіє приватними ключами, зазвичай пропонують автоматичне управління ліквідністю. Приклади включають Гаманець Satoshi.
- **Неопікунські Гаманці**: Користувачі володіють приватними ключами, може знадобитися ручне управління ліквідністю. Приклади включають Breeze та OBW.

![Ліквідність Lightning](assets/en/4/12.webp)_2x2 Матриця клієнтів LN_

### Критика та області для покращення

Незважаючи на їхні переваги, гаманці Lightning зіткнулися з кількома критиками та областями для покращення:

- **Конфіденційність**: Закриті гаманці та деякі опікунські моделі викликають занепокоєння щодо конфіденційності.
- **Легкість використання**: Збалансування розширених функцій з простотою використання залишається викликом.
- **Розвиток відкритого коду**: Різні рівні внесків відкритого коду впливають на довіру користувачів та темпи інновацій.

### Додаткові інсайти та випадки використання

#### Виклики алгоритмів:

Поточні алгоритми для знаходження оптимального шляху в мережі Lightning часто є субоптимальними, включаючи методи проб та помилок. Потрібні покращення для підвищення ефективності маршрутизації.

#### Багаточастинні платежі:

Розбиття більших платежів на менші транзакції може полегшити проблеми з ліквідністю та пошуком шляху, забезпечуючи плавніші транзакції.

#### Заробіток на маршрутизації:

Заробітки через комісійні за маршрутизацію зазвичай мінімальні, що робить менш привабливим для індивідуальних користувачів запуск вузлів маршрутизації для отримання прибутку.
#### Різні приклади гаманців:
- **Blink Wallet**: Базується в Ель-Сальвадорі, кастодіальний, потребує номер телефону, має стабільні сати, але не має розширених функцій Lightning Network.
- **Blitz Wallet**: Відкритий код, само-кастодіальний, вимагає управління ліквідністю користувачем, пропонує розширену інформацію для досвідчених користувачів.
- **SwissBitcoinPay**: Розроблений для торговців, кастодіальний до 24 годин, мінімальні комісії для користувачів з великим обсягом транзакцій.

#### Випадки використання гаманців:

Різні гаманці служать різним цілям, від простоти використання для початківців до розширених функцій для досвідчених користувачів. Не існує єдиного "найкращого" гаманця; вибір залежить від індивідуальних потреб та переваг.

#### Внесок у відкритий код:

Відгуки користувачів та їх внесок у проекти з відкритим кодом є незамінними для розвитку та особистісного зростання навичок, сприяючи колаборативному та інноваційному середовищу.

На завершення, розуміння різних аспектів клієнтів Lightning Network, їх відмінностей від традиційних Bitcoin гаманців, та важливість ефективного управління ліквідністю є критично важливим для використання повного потенціалу Lightning Network. Вибираючи правильний гаманець та активно беручи участь в екосистемі, користувачі можуть значно покращити свій досвід транзакцій з Bitcoin.

# Виклики LN

<partId>ca58c9d7-ba7e-5392-8488-6a21a9850e6a</partId>

## Практичні виклики LN

<chapterId>014c7c40-aef7-58ac-b51f-33784463f482</chapterId>
<professor>another-satoshi</professor>

**(відео буде доступне незабаром)**

У цій сесії Asi0 розглядає практичні виклики, з якими стикаються при роботі з Lightning Network (LN). Незважаючи на його революційний підхід до масштабування Bitcoin транзакцій, Lightning Network представляє кілька практичних викликів, з якими мають справу як користувачі, так і розробники. Зокрема, ми розглянемо чотири основні виклики: **управління ліквідністю**, **абстракція Шару 1/Шару 2**, **отримання платежів в офлайні**, та **управління резервними копіями**.

Кожен з цих викликів розглядається з двох точок зору: **користувача** та **розробника**, оскільки виклики та рішення відрізняються залежно від ролі, яку ви відіграєте в екосистемі.

---

### Виклик 1: Управління ліквідністю

#### **З точки зору користувача:**

У Lightning Network, **ліквідність** відноситься до наявності коштів у платіжних каналах, які необхідні для здійснення або отримання платежів. Користувачам потрібно забезпечити достатню вхідну та вихідну ліквідність для успішних транзакцій. Наприклад, якщо ви хочете отримувати платежі, у вас має бути доступна вхідна ліквідність, що означає, що інший вузол має виділити частину свого балансу для вашого каналу. Аналогічно, якщо ви хочете відправляти платежі, вам потрібна вихідна ліквідність у вашому каналі.

- **Практична проблема**: Користувачі часто знаходять важким балансувати свої канали та підтримувати достатню ліквідність. Крім того, перебалансування каналів може викликати витрати.
- **Можливі рішення**: Деякі гаманці Lightning почали інтегрувати автоматичне перебалансування каналів, але ця функція все ще розробляється. Користувачі також покладаються на **Провайдерів Послуг Lightning (LSPs)** для допомоги в управлінні ліквідністю.

#### **З точки зору розробника:**

Розробники стикаються з викликом імплементації безшовного управління ліквідністю в додатках. Вони повинні створювати інструменти, які автоматизують перебалансування та зменшують тертя для користувачів, оптимізуючи при цьому комісії та уникаючи боттлнеків ліквідності.

- **Практична проблема**: Реалізація ефективних алгоритмів для маршрутизації платежів через мережу зі змінною ліквідністю може бути складною та обчислювально інтенсивною.
- **Можливі рішення**: Розробники досліджують розширені алгоритми для **маршрутизації ліквідності** та використовують **двосторонньо фінансовані канали** для забезпечення наявності ліквідності на обох кінцях транзакції.

> **Визначення**:
- **Ліквідність**: Наявність коштів у каналі Lightning для здійснення або отримання платежів.
- **LSP (Lightning Service Provider)**: Сервіс, який допомагає користувачам управляти ліквідністю та каналами в мережі Lightning.

---

### Виклик 2: Абстракція L1/L2

#### **З точки зору користувача:**

Взаємодія між **Layer 1 (L1)** (базовим шаром Bitcoin) та **Layer 2 (L2)** (мережею Lightning) часто не є повністю абстрагованою для користувачів. Наприклад, відкриття та закриття каналів вимагає транзакцій в мережі Bitcoin (L1), і користувачі повинні платити комісії за ці дії в мережі. Це вносить додаткову складність та потенційні затримки, коли мережа Bitcoin перевантажена.

- **Практична Проблема**: Користувачі часто стикаються зі складністю розуміння, коли вони взаємодіють з базовим шаром Bitcoin проти шару Lightning. Це може призвести до плутанини щодо комісій, часу транзакцій та безпеки.
- **Можливі Рішення**: Покращення дизайну гаманців, які абстрагують взаємодію L1/L2 та управляють відкриттям/закриттям каналів на задньому плані. Деякі гаманці вже дозволяють користувачам безперешкодно перемикатися між транзакціями в мережі та Lightning залежно від обставин.

#### **З точки зору розробника:**

Розробникам доручено абстрагувати складнощі L1 та L2 для користувачів, створюючи гладкі та інтуїтивно зрозумілі інтерфейси, які ефективно обробляють транзакції. Виклик полягає в оптимізації користувацького досвіду, зберігаючи при цьому цілісність та безпеку протоколу Lightning.

- **Практична Проблема**: Забезпечення того, щоб користувач був захищений від технічних складнощів управління каналами та транзакціями в мережі, зберігаючи при цьому прозорість, коли це необхідно.
- **Можливі Рішення**: Розробники працюють над такими функціями, як **splicing** (що дозволяє додавати або видаляти кошти з каналу без його закриття) та автоматичні інструменти управління каналами.

> **Визначення**:
>
> - **L1 (Layer 1)**: Основний блокчейн-шар Bitcoin.
> - **L2 (Layer 2)**: Мережа Lightning, яка працює поверх Bitcoin для забезпечення швидших та дешевших транзакцій.
> - **Splicing**: Техніка, яка дозволяє змінювати баланс каналу Lightning без необхідності його закриття.

---

### Виклик 3: Отримання Платежів в Офлайні

#### **З точки зору користувача:**

Однією з проблем у мережі Lightning є **отримання платежів, коли користувач не в мережі**. На відміну від базового шару Bitcoin, де транзакції можуть бути отримані в будь-який час, Lightning вимагає, щоб як платник, так і отримувач були в мережі для завершення транзакції. Це є значним обмеженням для багатьох користувачів, які хочуть використовувати платежі через Lightning у повсякденних ситуаціях.

- **Практична Проблема**: Користувачі не можуть отримувати платежі, якщо їх вузол не в мережі та не підключений до мережі, що створює незручності для тих, хто хоче використовувати Lightning як метод платежу на щоденній основі.
- **Можливі Рішення**: Деякі обхідні шляхи включають використання опікунських гаманців або спирання на послуги третіх сторін, які виступають як посередники платежів, поки вузол отримувача не підключиться до мережі.

#### **З точки зору розробника:**

Розробники шукають способи дозволити користувачам отримувати платежі через Lightning, навіть коли їхні вузли не в мережі. Це вимагає творчих рішень для збереження децентралізованої природи Lightning, одночасно вирішуючи практичну проблему постійного підключення.

- **Практична Проблема**: Розробка протоколу або системи, яка дозволяє користувачам отримувати платежі в офлайні без компрометації безпеки або децентралізації, є значним технічним викликом.
- **Можливі Рішення**: Дослідження **офлайн-векселів на оплату**, які дозволили б отримувачам заявляти платежі, як тільки вони знову підключаються до мережі, триває.

> **Визначення**:
>
> - **Офлайн Платежі**: Платежі, відправлені або отримані, коли одна зі сторін не підключена до мережі Lightning.
- **Кастодіальні Гаманці**: Гаманці, де третя сторона контролює приватні ключі та керує транзакціями від імені користувача.
---

### Виклик 4: Управління Резервними Копіями

#### **З Погляду Користувача:**

Резервне копіювання каналів Lightning є критично важливим для користувачів, щоб відновити свої кошти у випадку, якщо їх вузол вийде з ладу або дані будуть втрачені. Однак, процес резервного копіювання для каналів Lightning є складнішим, ніж для Bitcoin, оскільки канали є становими, тобто вони змінюються з кожною транзакцією.

- **Практична Проблема**: Користувачам потрібно переконатися, що їх резервні копії каналів є актуальними, оскільки використання застарілої резервної копії може призвести до втрати коштів або покарання мережею.
- **Можливі Рішення**: Гаманці, такі як Phoenix та інші, впровадили автоматичне резервне копіювання каналів, але ці функції ще не є універсальними серед усіх гаманців Lightning.

#### **З Погляду Розробника:**

Розробникам потрібно впроваджувати рішення для резервного копіювання, які дозволяють користувачам безпечно та надійно відновлювати свої кошти навіть після катастрофічних збоїв. Виклик полягає в тому, щоб забезпечити, що ці рішення є безпечними та простими у використанні, одночасно зберігаючи цілісність протоколу Lightning.

- **Практична Проблема**: Розробка систем резервного копіювання, які є безпечними, децентралізованими та зручними для користувача, становить значний виклик, оскільки резервні копії мають бути постійно оновлювані з кожною зміною стану в каналі.
- **Можливі Рішення**: **Статичні Резервні Копії Каналу (SCB)** були розроблені для спрощення відновлення, але потрібні більш передові рішення для повністю автоматизованого та безпечного резервного копіювання.

> **Визначення**:
>
> - **Статична Резервна Копія Каналу (SCB)**: Тип резервної копії, який дозволяє користувачам відновити свої кошти з каналу Lightning у випадку збою, відновлюючи останній стан каналу.

---

#### Висновок

Мережа Lightning пропонує значні переваги з точки зору швидкості та економічної ефективності для транзакцій Bitcoin, але також представляє кілька практичних викликів. Ці виклики—**управління ліквідністю**, **абстракція L1/L2**, **прийом платежів в офлайні**, та **управління резервними копіями**—вимагають інноваційних рішень як від користувачів, так і від розробників. Оскільки мережа продовжує еволюціонувати, подолання цих перешкод буде ключовим для досягнення широкого прийняття та покращення загального досвіду користувача.

Звертаючись до цих викликів, мережа Lightning продовжить дозрівати, стаючи більш надійним та ефективним рішенням для масштабування Bitcoin.

## Майбутнє Еволюції LN

<chapterId>c06763dd-bb26-5fec-8ac4-3e446e9517cd</chapterId>
<professor>best-lion</professor>

![Відео](https://youtu.be/VXMON_nD650)

### Стійкість та Еволюція Bitcoin

**Талісман Bitcoin: Барсук-Медоїд**
Bitcoin часто персоніфікується барсуком-медоїдом, твариною, відомою своєю витривалістю та стійкістю. Цей символ влучно представляє міцну та непохитну природу Bitcoin. Так само, як барсук-медоїд може витримувати отруйні укуси та продовжувати процвітати, Bitcoin продемонстрував надзвичайну стійкість перед різними негараздами, включаючи регуляторні виклики, волатильність ринку та технічні атаки.

**Природа Bitcoin: Постійна Еволюція**
На відміну від уявлення про статичність, Bitcoin перебуває в стані постійної еволюції. Його протокол та екосистема безперервно вдосконалюються та покращуються глобальною спільнотою розробників та дослідників. Цей еволюційний процес спрямований на підвищення безпеки, масштабованості та функціональності, забезпечуючи лідерство Bitcoin у ландшафті криптовалют.

### Інновації в Мережі Lightning

**Мережа Lightning: Швидкий Розвиток**
Мережа Lightning, другий рівень рішення Bitcoin для масштабування та прискорення транзакцій, переживає швидкий розвиток. Цей рівень дозволяє здійснювати швидкі та недорогі транзакції, активуючи платіжні канали поза ланцюгом. Значні інновації інтегруються для посилення її ефективності та зручності використання.

**Двосторонньо Фінансовані Канали**
Традиційно канал Lightning фінансується однією стороною. Однак, канали з подвійним фінансуванням дозволяють обом сторонам (наприклад, Алісі та Бобу) внести свій вклад у ліквідність каналу. Це покращення забезпечує більшу гнучкість у можливостях відправлення та отримання коштів і вимагає попереднього спілкування та нових протоколів для управління спільним фінансуванням.
**Сплайсинг**
Сплайсинг - це функція, яка дозволяє користувачам змінювати розмір каналу Lightning без його закриття. Ця функціональність дозволяє додавати або видаляти кошти з існуючого каналу, забезпечуючи безперервний спосіб управління ліквідністю каналу. Сплайсинг сприяє взаємодії між транзакціями в блокчейні та каналами Lightning, підвищуючи загальну ефективність мережі.

**Механізм L2**
Механізм L2 вводить новий метод для анулювання старих станів каналу без покладання на механізм штрафів. Це оновлення залежить від SIGHASH_ANYPREVOUT, функції, яка вимагає м'якого форку Bitcoin. Механізм L2 обіцяє спростити управління каналами та покращити безпеку.

**Bolt 12**
Bolt 12 вирішує обмеження поточних інвойсів Bolt 11, які використовуються в мережі Lightning. Він вводить повторно використовувані інвойси та автоматизує процеси, усуваючи необхідність в HTTP та веб-серверах, працюючи виключно в межах мережі Lightning. Це нововведення спрощує транзакції та покращує досвід користувачів.

### Покращення приватності та ефективності в транзакціях Bitcoin

**Taproot, MuSig та підписи Schnorr**
Taproot є значним оновленням, яке об'єднує складність транзакцій та покращує приватність. У поєднанні з MuSig (протокол для транзакцій з мультипідписом) та підписами Schnorr, Taproot покращує ефективність транзакцій. Ці досягнення дозволяють транзакціям Lightning нагадувати звичайні транзакції Bitcoin, спрощуючи процес та зміцнюючи приватність.

**Маршрутизація PTLC**
Point Time Locked Contracts (PTLC) є покращенням існуючих Hash Time Lock Contracts (HTLC). PTLC використовують підписи Schnorr та покращують приватність, замінюючи спільні секрети публічними ключами, що зменшує потенціал для кореляції та неправильного використання платежів.

**Фабрики каналів**
Фабрики каналів дозволяють створювати багатосторонні канали (наприклад, 4-з-4 multisig), які можуть породжувати нові 2-з-2 платіжні канали поза ланцюгом. Ця система дозволяє швидко та без комісій створювати та закривати канали, хоча вимагає співпраці всіх учасників. Фабрики каналів збільшують загальну масштабованість та гнучкість мережі Lightning.

**Вартові**
Вартові - це сторонні суб'єкти, які моніторять блокчейн на предмет старих станів каналу. Якщо порушення виявлено, вони публікують транзакції-штрафи для забезпечення безпеки мережі. Хоча вартові покращують безпеку, запобігаючи неправильній поведінці, вони також вносять занепокоєння щодо приватності через моніторинг транзакцій.

**Замасковані шляхи**
Замасковані шляхи призначені для покращення приватності одержувачів у мережі Lightning. Вони приховують адресу кінцевого одержувача, забезпечуючи, щоб тільки відправник знав проміжний вузол, а кожен вузол знав тільки свої сусідні вузли. Цей метод захищає ідентичність одержувача та покращує загальну приватність.

**Провайдери послуг Lightning (LSP)**
Концепція, розроблена Breeze Wallet, провайдери послуг Lightning (LSP) прагнуть покращити досвід користувачів, дозволяючи миттєво отримувати кошти. LSP відкривають канали для користувачів, подібно до того, як провайдери інтернет-послуг пропонують послуги зв'язку. Це нововведення спрощує процес входу користувачів та забезпечує безперебійну взаємодію в мережі Lightning.

**Ресурси для постійного оновлення**
Щоб бути в курсі останніх технічних інновацій у Bitcoin та мережі Lightning, важливо використовувати цінні ресурси. Новинний листок Bitcoin OpTec, поштовий список lightning dev та матеріали від експертів галузі, таких як Jason Lopp, надають огляди та оновлення щодо триваючих досягнень та досліджень у цій швидко розвиваючій сфері.
Розуміючи та цінуючи ці розвитки, ми можемо визнати багатогранний прогрес і потенціал, які Bitcoin та Lightning Network тримають для майбутнього цифрових транзакцій.

## Протоколи на основі LN

<chapterId>f4d147bb-f146-5b36-a994-b9b70da83744</chapterId>
<professor>radio-talent</professor>

![Відео](https://youtu.be/KqBfPaXqU2U)

### Розширення та Інтеграція Платежів через Lightning

#### Розуміння Платежів через Lightning

Перед тим, як заглиблюватися в розширення та інтеграції платежів через Lightning, важливо зрозуміти базову операцію платежу через Lightning. Звичайний платіж через Lightning включає кілька ключових компонентів: **платника**, **одержувача**, та саму **мережу Lightning**. Платник ініціює платіж одержувачу, генеруючи **рахунок-фактуру**, який включає критичну інформацію, таку як сума до оплати та призначення (вузол одержувача).

Процес покладається на **Контракти з Хеш-Часовим Замком (HTLCs)**, які забезпечують, що платежі можуть бути заявлені лише законним одержувачем протягом визначеного часового проміжку. Два важливі елементи в цьому механізмі - **Маршрутизація Onion** та **Ланцюг HTLC**:

- **Маршрутизація Onion**: Забезпечує конфіденційність, інкапсулюючи дані транзакції в шари, забезпечуючи, що кожен посередник знає лише свої попередні та наступні вузли, але не весь маршрут.
- **Ланцюг HTLC**: Серія контрактів, які блокують кошти до завершення платежу або його скасування.

Новіший протокол, який покращує можливості мережі Lightning, - **Keysend**. На відміну від традиційних методів, які вимагають попереднього спілкування між відправником та одержувачем для генерації рахунку-фактури, Keysend дозволяє **ініційовані відправником платежі**, спрощуючи процес та покращуючи досвід користувача.

Однак, традиційні рахунки-фактури мають свої обмеження. Наприклад:

- **Одноразове використання**: Рахунки-фактури, як правило, використовуються лише для однієї транзакції, що може бути незручно.
- **Обмеження розміру**: Великі рахунки-фактури можуть бути важко обробити у формі QR-коду, роблячи їх непрактичними для певних застосувань.

> **Визначення**:
>
> - **Рахунок-фактура**: Запит на оплату в мережі Lightning, який зазвичай містить суму та деталі одержувача.
> - **HTLC (Контракт з Хеш-Часовим Замком)**: Тип розумного контракту, який використовується для забезпечення умовних платежів протягом обмеженого часу.
> - **Маршрутизація Onion**: Техніка конфіденційності, де дані транзакції шаруються, як цибуля, для захисту ідентичності відправника та одержувача.

### Протоколи та Випадки Використання

Щоб подолати обмеження традиційних рахунків-фактур, з'явилося кілька протоколів, які розширюють та покращують платежі через Lightning.

- **LNURL**: Протокол, який спрощує генерацію рахунків-фактур, дозволяючи створювати їх динамічно, підтримує фіатну деномінацію та дозволяє використовувати **адреси Lightning**. Цей підхід значно покращує досвід користувача, пропонуючи більш гнучкі методи оплати та інтеграцію з різними випадками використання.

- **BOLT 12 Offers**: Цей протокол схожий на LNURL, але використовує **Onion повідомлення** для покращення конфіденційності. BOLT 12 дозволяє користувачам автоматично отримувати рахунки-фактури без ручного втручання, покращуючи конфіденційність та зручність використання.

Одна з помітних інтеграцій платежів через Lightning - у **Nostr**, децентралізованій соціальній медіа платформі. Nostr інтегрує платежі через Lightning для включення чайових та мікротранзакцій, демонструючи, як Lightning може бути вбудований у різноманітні застосування.

Інший протокол, **RGB**, далі розширює функціональність Lightning, дозволяючи **переказ активів** через мережу Lightning. RGB дозволяє переказувати різноманітні активи, включаючи токени, через канали Lightning, розширюючи обсяг того, що можна транзакціонувати.
**Провайдери послуг забезпечення ліквідності в мережі Lightning (LSPs)** також відіграють критичну роль у розширенні платежів через Lightning. LSPs забезпечують ліквідність для отримання платежів, допомагають відкривати **двосторонньо фінансовані канали** та забезпечують безперебійні транзакції, перехоплюючи платежі та відкриваючи канали на льоту.
> **Визначення**:
>
> - **LNURL**: Протокол, який дозволяє динамічно створювати інвойси, роблячи платежі легшими та більш гнучкими.
> - **BOLT 12**: Розширення Lightning, яке використовує Onion-меседжінг для забезпечення конфіденційності, одночасно автоматизуючи отримання інвойсів.
> - **Nostr**: Децентралізована платформа, що інтегрує Lightning платежі для мікротранзакцій.
> - **RGB Protocol**: Протокол, що дозволяє передавати активи, як-от токени, через мережу Lightning.
> - **LSP (Провайдер послуг Lightning)**: Суб'єкт, який забезпечує ліквідність та відкриває канали для транзакцій через Lightning, роблячи мережу доступнішою для користувачів.

### Бізнес-моделі та розширені протоколи

Розвиток платежів через Lightning відкрив шлях для нових бізнес-моделей, особливо для **Провайдерів послуг Lightning (LSPs)**. LSPs покращують досвід користувачів, відкриваючи канали лише тоді, коли виявляються платежі, тим самим знижуючи складність попередньої налаштування.

Одним з прикладів бізнес-моделі, що сприяється Lightning, є **аукціонна модель**. Тут сервер утримує найвищу ставку і відхиляє нижчі ставки, утримуючи платежі в очікуванні до завершення аукціону. Це уникає потреби у поверненнях коштів і оптимізує процес аукціону.

Інший практичний приклад - у **покерних іграх**, де сервер керує платежами, утримуючи ставки до завершення гри, забезпечуючи плавний процес ставок.

Платежі через Lightning також інтегруються в платформи, як-от **Nostr** та сервіси подкастів, демонструючи універсальність цих протоколів. Крім того, **попередні зображення** платежів можуть використовуватися як **ключі доступу** для розблокування контенту або послуг, додаючи додаткову користь мережі Lightning.

Розширені протоколи, як-от **Point Time-Locked Contracts (PTLCs)**, ведуть Lightning ще далі, дозволяючи виконувати більш складні криптографічні операції. PTLCs пропонують покращення в маршрутизації та розподілі платежів, підвищуючи безпеку та ефективність.

Протоколи, як-от **LNURL** та **BOLT 12**, спрощують платежі, зменшуючи необхідність у ручних взаємодіях, забезпечуючи, щоб мережа Lightning ставала більш дружньою для користувачів та широко прийнятою.

> **Визначення**:
>
> - **PTLC (Point Time-Locked Contract)**: Криптографічний примітив, який покращує HTLCs, дозволяючи більш гнучкі та безпечні платежі.
> - **Попереднє зображення**: Значення, що використовується для розблокування HTLC, яке також може служити ключем доступу до послуг.
> - **Аукціонна модель**: Модель платежу, де платежі утримуються в очікуванні під час аукціону та випускаються лише тоді, коли приймається найвища ставка.

### Висновок

Розширення та інтеграція платежів через Lightning за допомогою різних протоколів та варіантів використання демонструють динамічний розвиток мережі Lightning. Від покращення базової функціональності платежів до введення розширених бізнес-моделей та криптографічних протоколів, майбутнє Lightning має значні обіцянки для інновацій та широкого прийняття.

# Бонус

<partId>4c5c74d7-40a9-5292-9b82-e3f3d79875e1</partId>

## Основи майнінгу Bitcoin

<chapterId>a4eacfc3-7b37-5fa3-abd1-b1fc48b645f0</chapterId>
<professor>diamond-jar</professor>

![Відео](https://youtu.be/W3Ra0cdG02I)

#### Вступ

Ajelex зосереджується на бізнес-аспекті майнінгу Bitcoin, аналізуючи стратегії підтримки прибутковості на конкурентному ринку. Обговорення включає аналіз оперативних витрат, заходів ефективності та економіки, що керує індустрією майнінгу.
### 1. Складність видобутку та фактори прибутковості
#### Технічні та стратегічні фактори

Складність видобутку в контексті Bitcoin переважно включає технічні та стратегічні елементи, які визначають прибутковість операцій з видобутку. Важливо розуміти, що видобуток - це не просто гра на удачу, а складний процес, який вимагає ретельного планування та постійної оптимізації.

#### Основні фактори прибутковості

![вартість енергії](assets/en/bonus/mining/1.webp)

1. **Вартість електроенергії**: Один з найважливіших факторів, що впливає на прибутковість видобутку, - це вартість електроенергії. У регіонах, як-от Франція, електроенергія може бути відносно дорогою порівняно з країнами, як-от Сальвадор, де нижчі витрати забезпечують конкурентну перевагу для майнерів.
2. **Ефективність обладнання**: Ефективність обладнання для видобутку, яка вимірюється його хешрейтом та споживаною потужністю, відіграє ключову роль. Сучасні ASIC-майнери, як-от S19J Pro, набагато ефективніші, ніж старі моделі, такі як Antminer S9.
3. **Період часу**: Bitcoin-видобуток спонукає до довгострокового планування.
4. **Ціна BTC**: Ціна BTC є важливою для визначення прибутковості видобутку.
5. **Складність мережі**: Складність мережі представляє середню кількість хешрейту, необхідного для видобутку блоку за 10 хвилин.
6. **Стратегічні інструменти**: Інструменти, як-от [braiins.com](https://insights.braiins.com), незамінні для розрахунку прибутковості та допомоги майнерам у прийнятті рішень на основі даних.

#### Практичне застосування

З особистого досвіду, я навіть використовував видобуток для обігріву своєї квартири у Франції, творчо компенсуючи витрати на електроенергію під час видобутку Bitcoin. Цей приклад підкреслює практичність інтеграції операцій з видобутку в повсякденне життя для додаткових вигод.

#### Вузькі місця у видобутку

Майнери стикаються з трьома основними вузькими місцями: доступністю обладнання, доступом до енергії та капіталом, необхідним для підтримки операцій. Дефіцит ASIC через високий попит часто призводить до довгих очікувань і завищених цін, що додатково ускладнює ландшафт видобутку.

- Приклад **енергетичного вузького місця**.
  У 2021 році китайський уряд заборонив видобуток на своїй території, що призвело до втрати доступу до енергії майнінговими компаніями в Китаї. Це призвело до **50%** падіння хешрейту протягом двох тижнів.

![падіння хешрейту](assets/en/bonus/mining/4.webp)

---

### 2. Еволюція та ефективність обладнання для видобутку

#### Історична еволюція

Шлях обладнання для видобутку був монументальним, починаючи від простого майнінгу на CPU до високоспеціалізованих ASIC-майнерів, які ми використовуємо сьогодні.

![еволюція обладнання](assets/en/bonus/mining/3.webp)

1. **Майнінг на CPU**: На ранніх етапах видобуток виконувався за допомогою звичайних процесорів комп'ютерів (CPU). Цей метод швидко втратив актуальність, оскільки мережа росла.
2. **Майнінг на GPU**: Графічні процесори (GPU) забезпечили значне підвищення ефективності видобутку, зробивши CPU застарілими для цілей майнінгу.
3. **Майнінг на FPGA**: Програмовані вентильні матриці (FPGA) пропонували ще кращу продуктивність та енергоефективність, ніж GPU.
4. **Майнінг на ASIC**: Спеціалізовані інтегральні схеми (ASIC) представляють вершину ефективності обладнання для видобутку, розроблені спеціально для операцій з видобутку з неперевершеною продуктивністю.

#### Детальне порівняння: S19J Pro проти Antminer S9

- **S19J Pro**: Відомий своєю високою ефективністю та надійністю, S19J Pro пропонує вищий хешрейт з меншим споживанням енергії, роблячи його ідеальним для масштабних операцій.
- **Antminer S9**: Хоча старіший і менш ефективний, Antminer S9 залишається популярним для менших установок та хобістів завдяки його доступності та прийнятній продуктивності.

![s19j pro проти antminer s9](assets/en/bonus/mining/2.webp)

#### Ефективність видобутку та навчання
Гірництво не лише надає фінансові винагороди, але й цінний практичний досвід. Отримання біткойнів без KYC через майнінг може бути привабливою пропозицією для тих, хто турбується про приватність.
#### Розширені інструменти та техніки

Післяпродажне програмне забезпечення може підвищити ефективність та функціональність обладнання для майнінгу. Інструменти, які пропонують оптимізацію та можливості автоналаштування, забезпечують максимальну ефективність роботи кожного чіпа, ефективно балансуючи хешрейт та споживання енергії.

---

### 3. Регуляторні та ринкові динаміки в операціях з майнінгу

#### Регуляторний вплив

Регулювання відіграє значну роль у формуванні ландшафту майнінгу. Наприклад, заборона майнінгу в Китаї мала глибокі наслідки для глобальних операцій з майнінгу, спричинивши значне зниження мережевого хешрейту та призвела до перерозподілу майнінгової потужності між різними регіонами.

#### Ринкові динаміки

1. **Доступність та вартість обладнання**: Ціна та доступність ASIC-майнерів залежать від ринкової ціни біткойна. Високий попит під час бичачих ринків призводить до дефіциту та завищених цін.
2. **Хеш-вартість та ціна хешу**: Важливо розуміти різницю між хеш-вартістю (сатоші, зароблені за терахеш на день) та ціною хешу (грошова вартість хешрейту). Обидва показники впливаються мережевою складністю та ринковою ціною біткойна.

#### Майнінгові пули та механізми винагород

1. **Майнінгові пули**: Об'єднуючи ресурси, майнінгові пули забезпечують стабільніші винагороди, зменшуючи варіативність та ризик, пов'язаний з соло-майнінгом.
2. **Схеми винагород**: Різні механізми винагород, як-от Pay-Per-Share (PPS) та пропорційні винагороди, пропонують різні профілі ризику та винагороди для майнерів.

   - **Pay per share**: Pay-Per-Share винагороджує майнерів за кожну дійсну частку, яку вони подають, незалежно від того, чи знайшов пул блок. **Частки** - це одиниці доказу, що майнери виконали необхідну роботу, і пул перевіряє ці частки.

   ![pps](assets/en/bonus/mining/6.webp)

   - **Пропорційний**: Залежить від того, чи знайшов пул блок, щоб розподілити винагороду рівномірно згідно з внеском майнера в загальний хешрейт пулу.

   ![prop](assets/en/bonus/mining/5.webp)

#### Майбутнє майнінгу

Оскільки винагороди за блоки зменшуються, майнери все більше покладатимуться на транзакційні збори. Це зміщення викликає занепокоєння щодо того, чи будуть транзакційні збори достатніми стимулами для майнерів продовжувати забезпечувати безпеку мережі.

#### Хостинговий майнінг

Послуги хостингового майнінгу можуть пропонувати нижчі експлуатаційні витрати, але мають ризики, такі як відсутність контролю та потенціал шахрайства. Необхідна належна перевірка для мінімізації цих ризиків.

#### Безпека та ефективність

Розширені протоколи безпеки та використання відновлювальної енергії не лише підвищують прибутковість, але й сприяють сталому розвитку екосистеми майнінгу.

На завершення, світ майнінгу біткойнів - це складна, багатогранна сфера, яка вимагає глибокого розуміння технічних, стратегічних, регуляторних та ринкових динамік. Чи ви досвідчений майнер, чи лише починаєте, залишатися обізнаним та адаптивним є ключем до процвітання в цій постійно змінюваній галузі. Дякую за вашу увагу, і я з нетерпінням чекаю на ваші питання та обговорення.

## Розуміння Joinmarket

<chapterId>f109f64f-9b73-5fbf-8870-5d34d5b69df8</chapterId>
<professor>happy-panda</professor>

![Відео](https://youtu.be/VFjccozVwc8)

Адам Гібсон надає інформацію про Joinmarket, детально описуючи, як ця реалізація CoinJoin покращує приватність та функціональність біткойна. Він обговорює, як Joinmarket сприяє співпраці, бездовірним та анонімним транзакціям у екосистемі біткойна. Потім, у другій частині, він показує, як запустити Joinmarket в Signet.

## Перший рік хакатону Cubo+
<chapterId>3faf7daa-ea42-5b68-bcaf-04b70b2e02dd</chapterId>
### Група 1 Хакатон - Спадщина Сатоші

![Відео](https://youtu.be/NiaahH57N1w)

Група "Спадщина Сатоші" представляє свою роботу над створенням електронної комерції Lightning з Shopify, React JS та Hydrogen і платіжним шлюзом IBEX.

### Група 2 Хакатон - Honey Badger

![Відео](https://youtu.be/dds0-SV8ltE)

Група "Honey Badger" представляє своє рішення для блогу з вбудованими мікроплатежами Lightning за допомогою LnBits та Next.js, Node.js та Hydrogen.

### Група 3 Хакатон

![Відео](https://youtu.be/2YjrrDMGU9c)

Третя група представляє панель керування вузла мережі Lightning через користувацький API, LND, vue.js, node.js, Bootstrap.

### Група 4 Хакатон - Співтовариство Сатоші

![Відео](https://youtu.be/mxLKiHa0mes#)

Група "Співтовариство Сатоші" представляє ігровий додаток LN, що використовує LnBits та MongoDB, Poetry, Node.js.

### Група 5 Хакатон - Lighting Walker

![Відео](https://youtu.be/IiY5PmkGNVo)

Група "Lightning Walker" представляє своє рішення для сервісу грошових переказів, що використовує MySQL, JavaScript та API ZDB.

## Дайте нам зворотній зв'язок про цей курс

<chapterId>7f4f46e2-de71-5387-8609-9785fb9e5946</chapterId>
<isCourseReview>true</isCourseReview>

## Подяки

<chapterId>33cb95cf-91d1-555b-a33b-0e3bd6745c33</chapterId>

Ми хотіли б висловити подяку нашим викладачам:

- Пітер Тодд
- Адам Гібсон
- Алекос Філіні
- Даніела Броццоні
- Ajelex
- Asi0
- Габріель Конт

Їхній досвід був незамінним для успіху цього курсу. Це був перший курс на базі 1-го видання ініціативи Cubo+, проведений у липні 2023 року. Дякуємо всім учасникам та викладачам за участь у цій піонерській освітній подорожі. Це позначає початок того, що ми сподіваємося буде довгою та плідною подорожжю у світ розробки Bitcoin. Як перша когорта, ваша участь задала стандарт для майбутніх класів.

Продовжуйте досліджувати, вчитися та вносити свій вклад у екосистему Bitcoin. Здобуті знання тут - це лише початкова точка. Продовжуйте копати кролячу нору, і ви відкриєте все більший світ можливостей.