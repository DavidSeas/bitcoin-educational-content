---
name: Boltzmann Calculator
description: Розуміння концепції ентропії та використання Boltzmann
---
![cover](assets/cover.webp)

***УВАГА:** Після арешту засновників Samourai Wallet та конфіскації їх серверів 24 квітня, вебсайт KYCP.org наразі недоступний. Gitlab, який розміщував код Boltzmann Calculator на Python, також був конфіскований. Наразі завантажити цей інструмент більше неможливо. Однак, можливо, що код може бути повторно опублікований іншими особами в найближчі тижні. Тим часом, ви все ще можете скористатися цим навчальним посібником, щоб зрозуміти принципи роботи Boltzmann Calculator. Індикатори, які надає цей інструмент, застосовні до будь-якої транзакції Bitcoin і також можуть бути розраховані вручну. Я надам всі необхідні розрахунки в цьому навчальному посібнику. Якщо ви вже завантажили Python-інструмент на свій комп'ютер або якщо ви користуєтесь RoninDojo, ви можете продовжувати користуватися інструментом і слідувати цьому навчальному посібнику як зазвичай, він все ще працює.*

_Ми уважно слідкуємо за розвитком цієї справи, а також за розвитком пов'язаних інструментів. Будьте впевнені, що ми оновимо цей навчальний посібник, як тільки з'явиться нова інформація._

_Цей навчальний посібник надається лише для освітніх та інформаційних цілей. Ми не підтримуємо або заохочуємо використання цих інструментів для кримінальних цілей. Кожен користувач несе відповідальність за дотримання законів у своїй юрисдикції._

---

Boltzmann Calculator - це інструмент для аналізу транзакції Bitcoin шляхом вимірювання її рівня ентропії разом з іншими розширеними метриками. Він надає уявлення про зв'язки між входами та виходами транзакції. Ці індикатори пропонують кількісну оцінку приватності транзакції та допомагають ідентифікувати потенційні помилки.

Цей Python-інструмент був розроблений командами Samourai Wallet та OXT, але його можна використовувати для будь-якої транзакції Bitcoin.

## Як користуватися Boltzmann Calculator?
Щоб скористатися Boltzmann Calculator, вам доступні два варіанти. Перший - встановити Python-інструмент безпосередньо на ваш комп'ютер. Альтернативно, ви можете скористатися вебсайтом KYCP.org (_Know Your Coin Privacy_), який пропонує спрощену платформу використання. Для користувачів RoninDojo зазначимо, що цей інструмент вже інтегрований у ваш вузол.

Користування сайтом KYCP досить просте: просто введіть ідентифікатор транзакції (TXID), яку ви хочете проаналізувати, у пошукову строку та натисніть `ENTER`.
![KYCP](assets/1.webp)
Після цього ви знайдете різну інформацію про транзакцію, включаючи зв'язки між входами та виходами. Клікніть на `deterministic links`.
![KYCP](assets/2.webp)
Ви потрапите на сторінку, присвячену індикаторам Boltzmann Calculator.
![KYCP](assets/3.webp)
Для тих, хто віддає перевагу використанню інструменту безпосередньо з їх вузла RoninDojo, він доступний через `RoninCLI > Samourai Toolkit > Boltzmann Calculator`.

Як і на сайті KYCP.org, після встановлення Python-інструменту, вам просто потрібно буде вставити TXID транзакції, яку ви хочете проаналізувати.

![KYCP](assets/7.webp)

Потім натисніть клавішу `ENTER`, щоб отримати результати.

![KYCP](assets/8.webp)

## Які індикатори Boltzmann Calculator?
### Комбінації / Інтерпретації:
Перший індикатор, який розраховує програмне забезпечення, - це загальна кількість можливих комбінацій, вказана під `nb combinations` або `interpretations` у інструменті.
Враховуючи значення UTXO, які беруть участь у транзакції, цей індикатор розраховує кількість способів, якими входи можуть бути асоційовані з виходами. Іншими словами, він визначає кількість правдоподібних інтерпретацій, які транзакція може викликати з точки зору зовнішнього спостерігача, що аналізує її. Наприклад, coinjoin, структурований відповідно до моделі Whirlpool 5x5, представляє `1,496` можливих комбінацій: ![KYCP](assets/4.webp)
Coinjoin Whirlpool Surge Cycle 8x8, з іншого боку, представляє `9,934,563` можливих інтерпретацій: ![KYCP](assets/5.webp)
Навпаки, більш традиційна транзакція з 1 входом і 2 виходами матиме лише одну інтерпретацію: ![KYCP](assets/6.webp)

### Ентропія:
Другий розрахований індикатор - це ентропія транзакції, позначена як `Entropy`.

У загальному контексті криптографії та інформації, ентропія - це кількісна міра невизначеності або непередбачуваності, пов'язаної з джерелом даних або випадковим процесом. Іншими словами, ентропія - це спосіб вимірювання складності передбачення або вгадування інформації.

У специфічному контексті аналізу ланцюгів, ентропія також є назвою індикатора, похідного від ентропії Шеннона та [винайденого LaurentMT](https://gist.github.com/LaurentMT/e758767ca4038ac40aaf), який розраховується за допомогою інструменту Boltzmann.

Коли транзакція представляє велику кількість можливих комбінацій, часто більш відповідно посилатися на її ентропію. Цей індикатор дозволяє виміряти незнання аналітиків про точну конфігурацію транзакції. Іншими словами, чим вища ентропія, тим складніше завдання ідентифікації рухів біткоїнів між входами та виходами стає для аналітиків.

На практиці, ентропія виявляє, чи представляє транзакція з точки зору зовнішнього спостерігача кілька можливих інтерпретацій, ґрунтуючись лише на сумах входів та виходів, не враховуючи інші зовнішні або внутрішні моделі та евристики. Висока ентропія тоді є синонімом кращої конфіденційності для транзакції.

Ентропія визначається як двійковий логарифм кількості можливих комбінацій. Ось використовувана формула:
```plaintext
E: ентропія транзакції
C: кількість можливих комбінацій для транзакції

E = log2(C)
```

У математиці, двійковий логарифм (логарифм за основою 2) відповідає оберненій операції піднесення до степеня 2. Іншими словами, двійковий логарифм `x` - це показник степеня, до якого потрібно підняти `2`, щоб отримати `x`. Таким чином, цей індикатор виражається в бітах.

Давайте розглянемо приклад розрахунку ентропії для транзакції coinjoin, структурованої відповідно до моделі Whirlpool 5x5, яка, як зазначалося раніше, пропонує кількість можливих комбінацій `1,496`:
```plaintext
C = 1,496
E = log2(1,496)
E = 10.5469 біт
```
Таким чином, ця транзакція coinjoin відображає ентропію `10.5469 біт`, що вважається дуже задовільним. Чим вище це значення, тим більше різних інтерпретацій допускає транзакція, тим самим зміцнюючи її рівень приватності.
Для транзакції coinjoin 8x8, яка представляє `9,934,563` інтерпретацій, ентропія була б:
```plaintext
C = 9,934,563
E = log2(9,934,563)
E = 23.244 біт
```
Давайте розглянемо ще один приклад з більш традиційною транзакцією, яка має один вхід і два виходи: [1b1b0c3f0883a99f1161c64da19471841ed12a1f78e77fab128c69a5f578ccce](https://mempool.space/tx/1b1b0c3f0883a99f1161c64da19471841ed12a1f78e77fab128c69a5f578ccce) У випадку цієї транзакції, єдина можлива інтерпретація: `(In.0) > (Out.0 ; Out.1)`. Відповідно, її ентропія встановлена на `0`:```plaintext
C = 1
E = log2(1)
E = 0 біт
```

### Ефективність:
Третій індикатор, який надає Калькулятор Больцмана, називається `Ефективність Гаманця`. Цей індикатор оцінює ефективність транзакції, порівнюючи її з оптимальною транзакцією, яку можна було б уявити в ідентичній конфігурації.

Це приводить нас до обговорення концепції максимальної ентропії, яка відповідає найвищій ентропії, яку конкретна структура транзакції теоретично може досягти. Ефективність транзакції потім розраховується шляхом порівняння цієї максимальної ентропії з фактичною ентропією аналізованої транзакції.

Формула використовується наступна:
```plaintext
ER: фактична ентропія транзакції, виражена в бітах
EM: максимально можлива ентропія для даної структури транзакції, виражена в бітах
Ef: ефективність транзакції в бітах

Ef = ER - EM
```

Наприклад, для структури монетного з'єднання типу Whirlpool 5x5 максимальна ентропія встановлена на `10.5469`:
```plaintext
ER = 10.5469
EM = 10.5469
Ef = 10.5469 - 10.5469 = 0 біт
```

Цей індикатор також виражається у відсотках, його формула тоді:
```plaintext
CR: фактична кількість можливих комбінацій
CM: максимальна кількість можливих комбінацій з тією ж структурою
Ef: ефективність, виражена у відсотках

Ef = CR / CM
Ef = 1,496 / 1,496
Ef = 100%
```

Ефективність `100%` таким чином вказує на те, що транзакція максимізує свій потенціал для приватності відповідно до своєї структури.

### Щільність Ентропії:
Четвертий індикатор - це щільність ентропії, позначена на інструменті як `Щільність Ентропії`. Він надає перспективу щодо ентропії відносно кожного входу або виходу транзакції. Цей індикатор корисний для оцінки та порівняння ефективності транзакцій різного розміру. Для його розрахунку просто поділіть загальну ентропію транзакції на загальну кількість входів та виходів, що беруть участь:
```plaintext
ED: щільність ентропії, виражена в бітах
E: ентропія транзакції, виражена в бітах
T: загальна кількість входів та виходів у транзакції

ED = E / T
```

Давайте розглянемо приклад монетного з'єднання Whirlpool 5x5:
```plaintext
T = 5 + 5 = 10
E = 10.5469
ED = 10.5469 / 10 = 1.054 біта
```

Також розрахуємо щільність ентропії для монетного з'єднання Whirlpool 8x8:
```plaintext
T = 8 + 8 = 16
E = 23.244
ED = 23.244 / 16 = 1.453 біта
```
П'ята частина інформації, яку надає Калькулятор Больцмана, це таблиця відповідностей ймовірностей між вхідними та вихідними даними. Ця таблиця вказує, через оцінку Больцмана, умовну ймовірність того, що певний вхід пов'язаний з даною виходом.
Таким чином, це кількісна міра умовної ймовірності асоціації між входом та виходом у транзакції, заснована на співвідношенні кількості сприятливих випадків цієї події до загальної кількості можливих випадків у наборі інтерпретацій.

Беручи за приклад знову Whirlpool coinjoin, таблиця умовних ймовірностей підкреслить шанси зв'язку між кожним входом та виходом, надаючи кількісну міру неоднозначності асоціацій у транзакції:

| %       | Вихід 0 | Вихід 1 | Вихід 2 | Вихід 3 | Вихід 4 |
| ------- | -------- | -------- | -------- | -------- | -------- |
| Вхід 0 | 34%      | 34%      | 34%      | 34%      | 34%      |
| Вхід 1 | 34%      | 34%      | 34%      | 34%      | 34%      |
| Вхід 2 | 34%      | 34%      | 34%      | 34%      | 34%      |
| Вхід 3 | 34%      | 34%      | 34%      | 34%      | 34%      |
| Вхід 4 | 34%      | 34%      | 34%      | 34%      | 34%      |

Тут ми можемо чітко бачити, що кожен вхід має рівний шанс бути асоційованим з будь-яким виходом, що підвищує конфіденційність транзакції.
Розрахунок оцінки Больцмана включає ділення кількості інтерпретацій, у яких відбувається певна подія, на загальну кількість доступних інтерпретацій. Таким чином, для визначення оцінки, яка асоціює вхід №0 з виходом №3 (`512` інтерпретацій), використовується наступна процедура:
```plaintext
Інтерпретації (ВХ.0 > ВИХ.3) = 512
Загальна кількість інтерпретацій = 1496
Оцінка = 512 / 1496 = 34%
```

Беручи за приклад Whirlpool 8x8 coinjoin (цикл збільшення), таблиця Больцмана виглядала б так:

|       | ВИХ.0 | ВИХ.1 | ВИХ.2 | ВИХ.3 | ВИХ.4 | ВИХ.5 | ВИХ.6 | ВИХ.7 |
|-------|-------|-------|-------|-------|-------|-------|-------|-------|
| ВХ.0  | 23%   | 23%   | 23%   | 23%   | 23%   | 23%   | 23%   | 23%   |
| ВХ.1  | 23%   | 23%   | 23%   | 23%   | 23%   | 23%   | 23%   | 23%   |
| ВХ.2  | 23%   | 23%   | 23%   | 23%   | 23%   | 23%   | 23%   | 23%   |
| ВХ.3  | 23%   | 23%   | 23%   | 23%   | 23%   | 23%   | 23%   | 23%   |
| IN.4  | 23%   | 23%   | 23%   | 23%   | 23%   | 23%   | 23%   | 23%   |
| IN.5  | 23%   | 23%   | 23%   | 23%   | 23%   | 23%   | 23%   | 23%   |
| IN.6  | 23%   | 23%   | 23%   | 23%   | 23%   | 23%   | 23%   | 23%   |
| IN.7  | 23%   | 23%   | 23%   | 23%   | 23%   | 23%   | 23%   | 23%   |

Однак, у випадку простої транзакції з одним входом і двома виходами, ситуація інша:

| %       | Вихід 0 | Вихід 1 |
|---------|----------|----------|
| Вхід 0 | 100%     | 100%     |

Тут спостерігається, що ймовірність кожного виходу походити від входу №0 становить `100%`. Нижча ймовірність, таким чином, перекладається на більшу приватність шляхом розмивання прямих зв'язків між входами та виходами.

### Детерміновані зв'язки:
Шостий шматок інформації, що надається, це кількість детермінованих зв'язків, доповнена співвідношенням цих зв'язків. Цей індикатор виявляє, скільки з'єднань між входами та виходами в аналізованій транзакції є незаперечними, з ймовірністю `100%`. Співвідношення, з іншого боку, пропонує перспективу щодо ваги цих детермінованих зв'язків у межах всього набору зв'язків транзакції.
Наприклад, транзакція типу Whirlpool-coinjoin не має детермінованих зв'язків, і тому показує індикатор та співвідношення `0%`. Навпаки, у нашій другій розглянутій простій транзакції (з одним входом і двома виходами) індикатор встановлено на `2`, а співвідношення досягає `100%`. Таким чином, нульовий індикатор сигналізує про відмінну конфіденційність завдяки відсутності прямих і незаперечних зв'язків між входами та виходами.

**Зовнішні ресурси:**

- Boltzmann Code на Samourai
- [Bitcoin Transactions & Privacy (Частина I) автора Laurent MT](https://gist.github.com/LaurentMT/e758767ca4038ac40aaf)
- [Bitcoin Transactions & Privacy (Частина II) автора Laurent MT](https://gist.github.com/LaurentMT/d361bca6dc52868573a2)
- [Bitcoin Transactions & Privacy (Частина III) автора Laurent MT](https://gist.github.com/LaurentMT/e8644d5bc903f02613c6)
- Вебсайт KYCP
- [Стаття на Medium про введення в Boltzmann Script автора Laurent MT](https://medium.com/@laurentmt/introducing-boltzmann-85930984a159)