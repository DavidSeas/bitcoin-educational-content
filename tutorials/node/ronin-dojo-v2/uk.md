---
name: RoninDojo v2
description: Встановлення вашого Bitcoin вузла RoninDojo v2 на Raspberry Pi
---
![обкладинка RoninDojo v2](assets/cover.webp)

***ПОПЕРЕДЖЕННЯ:** Після арешту засновників Samourai Wallet та конфіскації їх серверів 24 квітня, деякі функції RoninDojo, такі як Whirlpool, більше не працюють. Однак, можливо, що ці інструменти можуть бути відновлені або запущені по-іншому в найближчі тижні. Оскільки код RoninDojo був розміщений на GitLab Samourai, який також був конфіскований, наразі неможливо завантажити код дистанційно. Команди RoninDojo, ймовірно, працюють над повторною публікацією коду.*

_Ми уважно слідкуємо за розвитком цієї справи, а також за розвитком пов'язаних інструментів. Будьте впевнені, що ми оновимо цей навчальний посібник, як тільки з'явиться нова інформація._

_Цей навчальний посібник надається лише для освітніх та інформаційних цілей. Ми не підтримуємо або не заохочуємо використання цих інструментів для кримінальних цілей. Кожен користувач несе відповідальність за дотримання законів у своїй юрисдикції._

---

> "*Використовуйте Bitcoin з приватністю.*"

У попередньому навчальному посібнику ми вже пояснили процедуру встановлення та використання RoninDojo v1. Однак, протягом останнього року, команди RoninDojo запустили версію 2 своєї реалізації, що стало значним поворотним моментом в архітектурі програмного забезпечення. Справді, вони відмовилися від дистрибутиву Linux Manjaro на користь Debian. Відповідно, вони більше не пропонують попередньо налаштованого образу для автоматичного встановлення на Raspberry Pi. Але все ще існує метод для проведення ручного встановлення. Я використовував цей метод для свого власного вузла, і з того часу RoninDojo v2 чудово працює на моєму Raspberry Pi 4. Тому я пропоную новий навчальний посібник про те, як вручну встановити RoninDojo v2 на Raspberry Pi.

https://planb.network/tutorials/node/ronin-dojo

## Зміст:
- Що таке RoninDojo?
- Яке обладнання вибрати для встановлення RoninDojo v2?
- Як зібрати Raspberry Pi 4?
- Як встановити RoninDojo v2 на Raspberry Pi 4?
- Як користуватися вашим вузлом RoninDojo v2?

## Що таке RoninDojo?
Dojo спочатку є повною реалізацією Bitcoin вузла, заснованою на Bitcoin Core, та розробленою командами Samourai Wallet. Це рішення можна встановити на будь-яке обладнання. На відміну від інших реалізацій Core, Dojo було спеціально оптимізовано для інтеграції з Android додатковим середовищем Samourai Wallet. Що стосується RoninDojo, то це утиліта, призначена для полегшення встановлення та управління Dojo, а також різних інших доповнюючих інструментів. Коротше кажучи, RoninDojo збагачує базову реалізацію Dojo, інтегруючи безліч додаткових інструментів, одночасно спрощуючи її встановлення та управління.

Ronin також пропонує [рішення "вузол-в-коробці", зване "*Tanto*"](https://ronindojo.io/en/products), пристрій з вже встановленим RoninDojo на системі, зібраній їхньою командою. Tanto є платною опцією, яка може бути цікавою для тих, хто хоче уникнути технічних складнощів. Але оскільки вихідний код RoninDojo є відкритим, його також можна розгорнути на власному обладнанні. Ця альтернатива, більш економічна, все ж вимагає деяких додаткових маніпуляцій, які ми розглянемо в цьому навчальному посібнику.
RoninDojo є Dojo, отже, він дозволяє легко інтегрувати Whirlpool CLI у ваш Bitcoin вузол, щоб забезпечити найкращий можливий досвід coinjoin. З Whirlpool CLI стає можливим постійно реміксувати ваші біткоїни, 24 години на добу, 7 днів на тиждень, без необхідності залишати ваш особистий комп'ютер увімкненим.
Окрім Whirlpool CLI, RoninDojo включає різноманітні інструменти для покращення функціональності вашого Dojo. Серед них, калькулятор Boltzmann аналізує рівень приватності ваших транзакцій, сервер Electrum дозволяє підключати ваші Bitcoin гаманці до вашого вузла, а сервер Mempool дозволяє переглядати ваші транзакції локально, без витоку інформації.

У порівнянні з іншими рішеннями для вузлів, такими як Umbrel, RoninDojo чітко зосереджений на on-chain рішеннях та інструментах приватності. На відміну від Umbrel, RoninDojo не підтримує налаштування Lightning вузла ані інтеграцію більш загальних серверних додатків. Хоча RoninDojo пропонує менш універсальні інструменти, ніж Umbrel, він має всі необхідні функціональні можливості для управління вашою on-chain активністю.

Якщо вам не потрібні загальні функціональні можливості або ті, що пов'язані з Lightning Network, як пропонує Umbrel, і ви шукаєте простий, стабільний вузол з основними інструментами, такими як Whirlpool або Mempool, RoninDojo може бути ідеальним рішенням. Тоді як Umbrel схиляється до міні-сервера з мультизадачністю, орієнтованого на Lightning Network і універсальність, RoninDojo, відповідно до філософії Samourai Wallet, зосереджений на фундаментальних інструментах для приватності користувачів.

Тепер, коли ми окреслили RoninDojo, давайте разом подивимося, як налаштувати цей вузол.

## Яке обладнання вибрати для встановлення RoninDojo v2?
RoninDojo пропонує образ для автоматичного встановлення свого програмного забезпечення на [RockPro64](https://ronindojo.io/en/download). Однак, наш посібник зосереджений на ручній процедурі встановлення на Raspberry Pi 4. Хоча Raspberry Pi 5 було нещодавно запущено, і цей посібник теоретично повинен бути сумісним з цією новою моделлю, я ще не мав можливості особисто її протестувати, і я не знайшов відгуків від спільноти. Як тільки я придбаю Pi 5 та сумісні компоненти, я оновлю цей посібник, щоб тримати вас в курсі. Тим часом, я рекомендую віддати перевагу Pi 4, оскільки він ідеально працює для мого вузла.
Зі свого боку, я запускаю RoninDojo на Raspberry Pi з 8 ГБ оперативної пам'яті. Хоча деякі члени спільноти змогли запустити його на пристроях лише з 4 ГБ оперативної пам'яті, я особисто не тестував цю конфігурацію. Враховуючи невелику різницю в ціні, здається розумним вибрати версію з 8 ГБ оперативної пам'яті. Це також може виявитися корисним, якщо ви плануєте в майбутньому використовувати ваш Raspberry Pi для інших цілей.
Важливо зазначити, що команди RoninDojo повідомляли про часті проблеми, пов'язані з корпусом та адаптером SSD. Я сам стикався з цими проблемами. **Тому настійно рекомендується уникати корпусів, оснащених USB-кабелем для SSD вашого вузла.** Замість цього віддайте перевагу карті розширення пам'яті, спеціально розробленій для вашого Raspberry Pi:

![карта розширення пам'яті RPI4](assets/notext/1.webp)
Для зберігання блокчейну Bitcoin вам знадобиться SSD, сумісний з карткою розширення пам'яті, яку ви обрали. Наразі (лютий 2024 року) ми перебуваємо у фазі переходу. Очікується, що за кілька місяців диски об'ємом 1 ТБ вже не будуть достатніми для зберігання зростаючого розміру блокчейну, особливо враховуючи різноманітні додатки, які ви плануєте інтегрувати у свій вузол. Тому деякі рекомендують інвестувати в SSD об'ємом 2 ТБ для спокою на довгострокову перспективу. Однак, з огляду на знижувальну тенденцію цін на SSD з року в рік, інші пропонують задовольнятися диском на 1 ТБ, який має бути достатнім на один або два роки, аргументуючи це тим, що до часу, коли він стане застарілим, вартість моделей на 2 ТБ, ймовірно, знизиться. Вибір, таким чином, залежить від ваших особистих переваг. Якщо ви плануєте тримати свій RoninDojo протягом значного часу і хочете уникнути будь-яких технічних втручань у найближчі роки, опція SSD на 2 ТБ здається найбільш обережним вибором, оскільки вона пропонує вам комфортний запас на майбутнє.
Крім того, вам знадобляться різні дрібні компоненти:
- Корпус з вентилятором для розміщення вашого Raspberry Pi та карти розширення пам'яті. В інтернеті доступні набори, що включають як карту розширення SSD, так і сумісний корпус;
- Кабель живлення для вашого Raspberry Pi;
- Мікро SD-карта щонайменше на 16 ГБ (хоча технічно достатньою може бути і 8 ГБ, але різниця в ціні між картами на 8 та 16 ГБ часто незначна);
- Кабель Ethernet RJ45 для підключення до мережі.

![node material](assets/notext/2.webp)

## Як зібрати Raspberry Pi 4?
Збірка вашого вузла буде варіюватися залежно від обраного обладнання, особливо типу корпусу. Однак, загальний план кроків, які слід виконати, залишається загалом схожим.
Почніть з встановлення вашого SSD на карту розширення пам'яті, попередньо закріпивши два замкових гвинти ззаду.

![assembly1](assets/notext/3.webp)

Потім прикріпіть ваш Raspberry Pi до карти розширення.

![assembly2](assets/notext/4.webp)

Також прикріпіть вентилятор до Raspberry Pi.

![assembly3](assets/notext/5.webp)

Підключіть різні компоненти, звертаючи увагу на використання правильних пінів, згідно з інструкцією до вашого корпусу. Виробники корпусів часто пропонують відеоуроки, щоб допомогти вам у збірці. У моєму випадку, у мене є додаткова карта розширення, оснащена кнопкою включення/виключення. Це не є суттєвим для створення вузла Bitcoin. Я в основному використовую її для наявності кнопки живлення.

Якщо, як і я, у вас є карта розширення з кнопкою включення/виключення, не забудьте встановити маленький перемикач "Auto Power On". Це дозволить вашому вузлу автоматично запускатися, як тільки він буде підключений до живлення. Ця функція особливо корисна у випадку відключення електроенергії, оскільки дозволяє вашому вузлу перезапускатися самостійно, без ручного втручання з вашого боку.

![assembly4](assets/notext/6.webp)

Перед тим, як вставити весь обладнання в корпус, важливо перевірити правильну роботу вашого Raspberry Pi, карти розширення пам'яті та вентилятора, ввімкнувши їх.

![assembly5](assets/notext/7.webp)
Нарешті, встановіть ваш Raspberry Pi у його корпус. Зверніть увагу, що на наступному етапі вам потрібно буде додати мікро SD карту в відповідний порт на Raspberry Pi. Якщо ваш корпус оснащений отвором, який дозволяє вставити SD карту без необхідності відкривати його (як це є у мого, показаного на фото), ви можете зараз закрити корпус. Однак, якщо ваш корпус не має прямого доступу до порту мікро SD, вам доведеться почекати, поки ви підготуєте мікро SD карту для вставки перед тим, як завершити збірку.
![assembly6](assets/notext/8.webp)

## Як встановити RoninDojo v2 на Raspberry Pi 4?

### Крок 1: Підготуйте завантажувальну мікро SD
Після збірки вашого обладнання наступним кроком буде встановлення RoninDojo. Для цього ми підготуємо завантажувальну мікро SD карту з вашого комп'ютера, записавши на неї відповідний образ диска.
Вам потрібно буде використати програмне забезпечення _**Raspberry Pi Imager**_, призначене для спрощення завантаження, налаштування та запису операційних систем на мікро SD карту для використання з Raspberry Pi. Спочатку встановіть це програмне забезпечення на ваш особистий ПК:
- Для Ubuntu/Debian: https://downloads.raspberrypi.org/imager/imager_latest_amd64.deb
- Для Windows: https://downloads.raspberrypi.org/imager/imager_latest.exe
- Для Mac: https://downloads.raspberrypi.org/imager/imager_latest.dmg

Після встановлення програмного забезпечення відкрийте його та вставте вашу мікро SD карту до вашого особистого комп'ютера. З інтерфейсу Raspberry Pi Imager виберіть `CHOOSE OS`:

![choose OS](assets/notext/9.webp)

Далі перейдіть до меню `Raspberry Pi OS (other)`:

![choose OS others](assets/notext/10.webp)

Виберіть операційну систему під назвою `Raspberry Pi OS (Legacy, 64-bit) Lite`, яка має розмір `0.3 GB`:

![choose OS Legacy Lite](assets/notext/11.webp)

Після вибору операційної системи вас перенаправлять до головного меню Raspberry Pi Imager. Натисніть на `CHOOSE STORAGE`:

![choose storage](assets/notext/12.webp)

Виберіть вашу мікро SD карту:

![choose micro sd](assets/notext/13.webp)

Після вибору операційної системи та мікро SD картки натисніть на `NEXT`:

![choose next](assets/notext/14.webp)

З'явиться нове вікно. Виберіть `EDIT CONFIGURATION`:

![edit settings](assets/notext/15.webp)

У цьому вікні перейдіть до вкладки `GENERAL` та зробіть наступні налаштування (які дуже важливі для його роботи):
- Активуйте опцію та присвойте `RoninDojo` як ім'я хоста;
- Активуйте `Set username and password`, введіть `pi` як ім'я користувача, виберіть пароль та запишіть цю інформацію, оскільки вона буде потрібна пізніше. Ці облікові дані є тимчасовими і будуть видалені після цього;
- Вимкніть `Configure Wi-Fi`;
- Активуйте `Set locale settings` та виберіть ваш часовий пояс, а також тип клавіатури, що відповідає вашому комп'ютеру;

![general settings](assets/notext/16.webp)

У вкладці SERVICES натисніть на поле `Enable SSH` та виберіть `Use a password for authentication`:

![services settings](assets/notext/17.webp)

Також переконайтеся, що у вкладці `OPTIONS` телеметрія вимкнена:

![options settings](assets/notext/18.webp)

Натисніть на `SAVE`:
![налаштування збереження](assets/notext/19.webp)Підтвердіть натисканням на `YES`, щоб розпочати створення завантажувальної micro SD карти:
![налаштування так](assets/notext/20.webp)

Повідомлення повідомить вас, що всі дані на micro SD карті будуть видалені. Підтвердіть натисканням на `YES`, щоб розпочати процес:

![перезапис micro SD](assets/notext/21.webp)

Зачекайте, поки програмне забезпечення завершить підготовку вашої micro SD карти:

![запис micro SD](assets/notext/22.webp)

Коли з'явиться повідомлення про завершення процесу, ви можете вийняти micro SD карту з вашого комп'ютера:

![запис micro SD завершено](assets/notext/23.webp)

### Крок 2: Завершення збірки вузла
Тепер ви можете вставити micro SD карту в відповідний порт вашого Raspberry Pi.

![micro SD](assets/notext/24.webp)

Потім підключіть ваш Raspberry Pi до роутера за допомогою Ethernet кабелю. Нарешті, увімкніть ваш вузол, підключивши кабель живлення та натиснувши кнопку живлення (якщо ваша конфігурація її включає).

### Крок 3: Встановлення SSH з'єднання з вузлом
Спочатку необхідно знайти IP адресу вашого вузла. Ви можете скористатися інструментом, таким як _[Advanced IP Scanner](https://www.advanced-ip-scanner.com/)_ або _[Angry IP Scanner](https://angryip.org/)_, або перевірити адміністративний інтерфейс вашого роутера. IP адреса повинна бути у форматі `192.168.1.??`. **Для всіх наступних команд замініть `[IP]` на фактичну IP адресу вашого вузла**, (видаливши дужки).

Запустіть термінал.

Щоб видалити можливий ключ, вже асоційований з IP адресою вашого вузла, виконайте команду: 
`ssh-keygen -R [IP]`. 

Помилка після цієї команди не є серйозною; це просто означає, що ключа не існує у вашому списку відомих хостів (що досить ймовірно). Наприклад, якщо IP вашого вузла є `192.168.1.40`, команда стає: `ssh-keygen -R 192.168.1.40`.

Далі, встановіть SSH з'єднання з вашим вузлом, виконавши команду: 
`ssh pi@[IP]`.
З'явиться повідомлення про автентичність хоста: `The authenticity of host '[IP]' can't be established.` Це вказує на те, що автентичність пристрою, до якого ви намагаєтесь підключитися, не може бути перевірена через відсутність відомого публічного ключа. При підключенні через SSH до нового хоста вперше, це повідомлення завжди з'являється. Ви повинні відповісти `yes`, щоб додати його публічний ключ до вашого локального каталогу, що запобігатиме появі цього попереджувального повідомлення під час майбутніх SSH з'єднань з цим вузлом. Тому наберіть `yes` та натисніть `enter`, щоб підтвердити.
Потім вас попросять ввести ваш пароль, який був раніше встановлений як тимчасовий на кроці 1. Підтвердіть натисканням `enter`. Тепер ви підключені до вашого вузла через SSH.

Узагальнено, ось команди, які потрібно виконати:
- `ssh-keygen -R [IP]`
- `ssh pi@[IP]`
- `yes`
- Введіть тимчасовий пароль і підтвердіть.

### Крок 4: Оновлення та підготовка
Тепер ви підключені до вашого вузла через SSH сесію. У вашому терміналі командний рядок повинен бути: `pi@RoninDojo:~ $`. Для початку, оновіть список доступних пакетів та встановіть оновлення для існуючих пакетів за допомогою наступної команди:
`sudo apt update && sudo apt upgrade -y`
Після завершення оновлень, приступіть до встановлення *Git* та *Dialog* за допомогою команди: `sudo apt install git dialog -y`

Далі, клонуйте гілку `master` Git репозиторію _RoninOS_, виконавши:
`sudo git clone --branch master https://code.samourai.io/ronindojo/RoninOS.git /opt/RoninOS`

Запустіть скрипт `customize-image.sh` за допомогою команди:
`cd /opt/RoninOS/ && sudo ./customize-image.sh`

**Важливо дозволити скрипту працювати без перерв і терпляче чекати на завершення його процесу**, що займає близько 10 хвилин. Коли з'явиться повідомлення `Setup is complete`, ви можете перейти до наступного кроку.

### Крок 5: Запуск RoninOS
Запустіть RoninOS за допомогою команди:
`sudo systemctl start ronin-setup`

Відобразіть рядки файлу журналу за допомогою команди:
`tail -f /home/ronindojo/.logs/setup.logs`

На цьому етапі **важливо дозволити RoninOS запуститися і дочекатися** завершення його роботи. Це займає близько 40 хвилин. Коли з'явиться `All RoninDojo feature installations complete!`, ви можете перейти до кроку 6.

### Крок 6: Доступ до RoninUI та Зміна Паролів
Після завершення встановлення, щоб підключитися до вашого вузла через браузер, переконайтеся, що ваш особистий комп'ютер підключений до тієї ж локальної мережі, що й ваш вузол. Якщо ви використовуєте VPN на вашому пристрої, тимчасово вимкніть його. Щоб отримати доступ до інтерфейсу вузла у вашому браузері, введіть у адресному рядку:
- Безпосередньо IP-адресу вашого вузла, наприклад, `192.168.1.??`;
- Або, наберіть `ronindojo.local`.

Перебуваючи на домашній сторінці RoninUI, вас попросять розпочати налаштування. Для цього натисніть кнопку `Let's start`.

![lets start](assets/notext/25.webp)

На цьому етапі RoninUI представить вам ваш пароль `root`. Важливо зберегти його в безпеці. Ви можете вибрати фізичне зберігання, на папері, або зберегти його в [менеджері паролів](https://planb.network/courses/secu101/4/2).

![root password](assets/notext/26.webp)

Після збереження пароля `root`, відмітьте поле `I have backed up Root user credentials` і натисніть на `Continue`, щоб продовжити.

![confirm root password](assets/notext/27.webp)

Наступний крок передбачає створення пароля користувача, який буде використовуватися як для доступу до веб-інтерфейсу RoninUI, так і для встановлення SSH-сесій з вашим вузлом. Виберіть надійний пароль і переконайтеся, що ви зберегли його в безпеці. Вам потрібно буде ввести цей пароль двічі, перш ніж натиснути на `Finish`, щоб підтвердити. Що стосується імені користувача, рекомендується зберегти вибір за замовчуванням, `ronindojo`. Якщо ви вирішите його змінити, не забудьте відповідно скоригувати команди на наступних кроках.

![user credentials](assets/notext/28.webp)

Після завершення цих дій, дочекайтеся ініціалізації вашого вузла. Потім ви отримаєте доступ до веб-інтерфейсу RoninUI. Ви майже на фініші процесу, залишилося лише кілька маленьких кроків!
![Ronin UI](assets/notext/29.webp)

### Крок 7: Видалення Тимчасових Паролів
Відкрийте новий термінал на вашому особистому комп'ютері та встановіть SSH-з'єднання з вашим вузлом за допомогою наступної команди:
`SSH ronindojo@[IP]`
Якщо, наприклад, IP-адреса вашого вузла `192.168.1.40`, відповідною командою буде: `SSH ronindojo@192.168.1.40`

Якщо ви змінили своє ім'я користувача на попередньому кроці, замінивши стандартне ім'я користувача (`ronindojo`) на інше, переконайтеся, що використовуєте це нове ім'я в команді. Наприклад, якщо ви обрали `planb` як ім'я користувача і IP-адреса `192.168.1.40`, командою для введення буде:
`SSH planb@192.168.1.40`
Вас попросять ввести пароль користувача. Введіть його, а потім натисніть `enter`, щоб підтвердити. Після цього ви отримаєте доступ до інтерфейсу RoninCLI. Використовуйте стрілки на клавіатурі для навігації до опції `Exit RoninDojo` та натисніть `enter`, щоб вибрати її.
![RoninCLI](assets/notext/30.webp)

На цьому етапі ви перебуваєте в терміналі свого вузла, з командним рядком, схожим на: `ronindojo@RoninDojo:~ $`. Щоб видалити тимчасового користувача, створеного під час налаштування завантажувальної micro SD картки, введіть наступну команду та натисніть `enter`:
`sudo deluser --remove-home pi`

Вас попросять підтвердити пароль користувача. Введіть його та підтвердіть, натиснувши `enter`. Зачекайте, поки операція завершиться, а потім використовуйте команду `exit`, щоб залишити термінал.

Вітаємо! Ваш вузол RoninDojo v2 тепер налаштований і готовий до використання. Він розпочне IBD (*Initial Block Download*), продовжуючи завантаження та перевірку блокчейну Bitcoin з Genesis блоку. Цей крок включає отримання всіх транзакцій Bitcoin, здійснених з 3 січня 2009 року, і займає деякий час. Після повного завантаження блокчейну індексатор приступить до стиснення бази даних. Тривалість IBD може значно варіюватися. Ваш вузол RoninDojo буде повністю функціональним після завершення цього процесу.

**Якщо ви мігруєте зі старого вузла RoninDojo v1** на цю нову версію з цим посібником, зберігаючи той самий SSD, ваш вузол автоматично виявить та використає існуючі дані на диску, звільняючи вас від необхідності виконувати IBD знову. У цьому випадку вам просто потрібно буде зачекати, поки ваш вузол ресинхронізується з останніми блоками.

### Крок 8: "veth* fix"
Якщо ви зіткнулися з помилкою у вашому вузлі RoninDojo v2 на Raspberry Pi, коли після безпроблемної інсталяції ваш вузол раптово стає недоступним через SSH, але відновлюється після простого перезапуску, тоді вам потрібно виконати цей крок 8. Цю поширену помилку можна легко виправити з рішенням, розробленим спільнотою: "_veth fix_". Це незначне виправлення назавжди усуває раптові відключення. Ось як це застосувати.

Відкрийте новий термінал на вашому особистому комп'ютері та встановіть з'єднання SSH з вашим вузлом, використовуючи наступну команду:
`SSH ronindojo@[IP]`

Якщо, наприклад, IP-адреса вашого вузла `192.168.1.40`, відповідною командою буде:
`SSH ronindojo@192.168.1.40`

Вас попросять ввести пароль користувача. Введіть його та натисніть `enter`, щоб підтвердити. Після цього ви отримаєте доступ до інтерфейсу RoninCLI. Використовуйте стрілки на клавіатурі для навігації до опції `Exit RoninDojo` та натисніть `enter`, щоб вибрати її.
На цьому етапі ви знаходитесь у терміналі свого вузла, з командним рядком, схожим на: `ronindojo@RoninDojo:~ $`. Щоб застосувати виправлення для veth*, введіть наступну команду та натисніть `enter`: `sudo nano /etc/dhcpcd.conf`

Підтвердіть свій пароль знову та натисніть `enter`.

Ви потрапите до файлу `dhcpcd.conf`. Вам потрібно скопіювати наступний текст, не забуваючи про зірочку, та додати його в кінець файлу: 
`denyinterfaces veth*`

Для цього, перейдіть до кінця файлу, використовуючи стрілку вниз на клавіатурі, потім використайте праву кнопку миші, щоб вставити текст на окремий рядок.

Після додавання тексту, натисніть `ctrl X`, щоб почати вихід, за ним `ctrl Y`, щоб підтвердити збереження змін, і натисніть `enter`, щоб завершити та повернутися до командного рядка. Щоб переконатися, що модифікація була правильно застосована, знову відкрийте файл `dhcpcd.conf`, використовуючи відповідну команду.

Щоб завершити застосування виправлення, перезавантажте свій вузол, виконавши: 
`sudo reboot now`

На цьому етапі ви можете закрити свій термінал. Дайте необхідний час для перезавантаження вашого RoninDojo, після чого ви зможете знову підключитися через графічний інтерфейс вашого браузера. Цей процес має виправити зустрінуту помилку.

## Як користуватися вашим вузлом RoninDojo v2?

### Підключення вашого програмного гаманця до Electrs
Перше використання вашого щойно встановленого та синхронізованого вузла буде для трансляції ваших транзакцій в мережу Bitcoin. Ви, ймовірно, захочете підключити свої різні гаманці до вашого вузла, щоб конфіденційно транслювати ваші транзакції. Ви можете зробити це через Electrum Rust Server (electrs). Ця програма зазвичай попередньо встановлена на вашому вузлі RoninDojo. Якщо ні, ви можете вручну встановити її через інтерфейс RoninCLI в `Applications > Manage Applications > Install Electrum Server`.

Щоб отримати адресу Tor вашого Electrum Server, з веб-інтерфейсу RoninUI перейдіть до:
`Pairing > Electrum server > Pair now`
![Pairing](assets/notext/31.webp)
![Electrs](assets/notext/32.webp)
Потім вам потрібно буде ввести адресу `Hostname`, що закінчується на `.onion`, у ваше програмне забезпечення гаманця, разом з портом `50001`. ![hostname](assets/notext/33.webp)
Наприклад, у Sparrow Wallet, просто перейдіть до вкладки:
`File > Preferences > Server > Private Electrum`

![Sparrow](assets/notext/34.webp)

### Підключення вашого програмного гаманця до Samourai Dojo
Як альтернативу використанню Electrs, Dojo дозволяє підключити ваш програмний гаманець безпосередньо до вашого вузла RoninDojo. Гаманці, такі як Samourai Wallet та Sentinel, пропонують цю функціональність.

Для встановлення з'єднання вам просто потрібно буде відсканувати QR-код вашого Dojo. Щоб отримати доступ до цього QR-коду через RoninUI, перейдіть до:
`Pairing > Samourai Dojo > Pair now`
![Samourai Dojo](assets/notext/35.webp)
Щоб з'єднати ваш Samourai Wallet з вашим Dojo, просто відскануйте цей QR-код під час встановлення додатку:

![Samourai Wallet connection](assets/notext/36.webp)
Якщо ви вже мали гаманець Samourai до налаштування вашого Ronin Dojo, необхідно зробити резервну копію вашого гаманця, видалити та потім перевстановити додаток Samourai Wallet, перш ніж відновити ваш гаманець. Після запуску перевстановленого додатку, у вас буде можливість підключитися до нового Dojo. **Будьте обережні, цей процес несе ризик втрати ваших біткойнів, якщо він не виконаний правильно!** Переконайтеся, що у вас є резервна копія вашого гаманця Samourai у ваших файлах та перевірте валідність вашої парольної фрази через `Settings > Troubleshoot > Passphrase`. Також важливо мати читабельну резервну копію вашої фрази відновлення та вашої парольної фрази. Для більшої точності в цій операції рекомендується слідувати цьому детальному навчальному посібнику: [https://wiki.ronindojo.io/en/setup/v2_0_0-upgrade/reconnectsamourai](https://wiki.ronindojo.io/en/setup/v2_0_0-upgrade/reconnectsamourai).
### Використання власного експлорера блоків Mempool.space
Експлорер блоків перетворює сиру інформацію з блокчейну Bitcoin у структурований та легко читабельний формат. З інструментами на кшталт *Mempool.space*, можливо аналізувати транзакції, шукати конкретні адреси, або навіть консультуватися з середніми ставками комісій мемпулів мережі в реальному часі.

Однак, використання онлайн експлорерів блоків становить ризики для вашої приватності та передбачає довіру до даних, наданих третіми сторонами. Дійсно, використовуючи ці послуги без проходження через власний вузол, ви можете ненавмисно розкрити інформацію про ваші транзакції та мусите покладатися на точність інформації, представленої власником сайту.
Щоб зменшити ці ризики, рекомендується використовувати власний екземпляр *Mempool.space* через мережу Tor, безпосередньо розміщений на вашому вузлі. Це рішення забезпечує збереження вашої приватності та автономії ваших даних.
Для цього спочатку встановіть *Mempool Space Visualizer* з RoninUI. На веб-інтерфейсі перейдіть до вкладки `Dashboard` та натисніть на `Manage` нижче `Mempool Space`:
`Dashboard > Mempool Space > Manage`
![Керування mempool](assets/notext/37.webp)
Потім натисніть на кнопку `Install Mempool visualizer`:
![встановлення mempool](assets/notext/38.webp)
Підтвердіть свій пароль користувача:
![пароль mempool](assets/notext/39.webp)
Дочекайтеся завершення встановлення, потім знову натисніть на кнопку `Manage`:
![Керування Mempool](assets/notext/40.webp)
Ви отримаєте посилання `.onion` для доступу до вашого власного екземпляру *Mempool.space* через мережу Tor.
![Посилання Mempool](assets/notext/41.webp)
Я раджу вам зберегти це посилання у ваших улюблених у браузері Tor або додати його до додатку Tor Browser на вашому смартфоні для легкого та безпечного доступу з будь-якого місця. Якщо у вас ще немає браузера Tor, ви можете завантажити його тут: [https://www.torproject.org/download/](https://www.torproject.org/download/)
![Mempool Tor](assets/notext/42.webp)

### Використання Whirlpool для міксування ваших біткойнів
Ваш вузол RoninDojo також інтегрує _WhirlpoolCLI_, інтерфейс командного рядка, який дозволяє автоматизувати Whirlpool coinjoins, та _WhirlpoolGUI_, графічний інтерфейс, призначений для взаємодії з _WhirlpoolCLI_.
Виконання coinjoin через Whirlpool вимагає, щоб застосунок, який використовується, був активним для проведення реміксів. Ця умова може бути обмежувальною для тих, хто бажає досягти високих рівнів анонімності. Дійсно, пристрій, на якому розміщено застосунок, що інтегрує Whirlpool, має залишатися увімкненим безперервно. Це означає, що для участі в реміксах 24 години на добу, ваш комп'ютер або смартфон має залишатися увімкненим з постійно відкритими Samourai або Sparrow. Рішенням цієї проблеми є використання _WhirlpoolCLI_ на машині, яка завжди увімкнена, наприклад, на Bitcoin вузлі, що дозволяє вашим монетам реміксуватися без перерви, і без необхідності тримати інший пристрій увімкненим.
Детальний навчальний посібник готується, щоб крок за кроком провести вас через процес coinjoining з Samourai Wallet і RoninDojo v2, від А до Я.

Для глибшого розуміння coinjoin та його використання на Bitcoin, я також запрошую вас ознайомитися з цією іншою статтею: Розуміння та використання coinjoin на Bitcoin, де я детально описую все, що вам потрібно знати про цю техніку.

https://planb.network/tutorials/privacy/coinjoin-dojo
### Використання Whirlpool Stat Tool (WST)

Після виконання coinjoins з Whirlpool, корисно точно оцінити рівень приватності, досягнутий для ваших змішаних UTXO. Для цього ви можете використовувати інструмент Python *Whirlpool Stat Tool*. Цей інструмент дозволяє вам вимірювати як перспективні, так і ретроспективні оцінки ваших UTXO, аналізуючи їхню швидкість розповсюдження в басейні.

Щоб поглибити ваше розуміння механізмів розрахунку цих анонсетів, я рекомендую прочитати статтю: REMIX - WHIRLPOOL, яка детально описує функціонування цих індексів.

https://planb.network/tutorials/privacy/remix-whirlpool

Щоб отримати доступ до інструменту WST, перейдіть до RoninCLI. Для цього відкрийте термінал на вашому особистому комп'ютері та встановіть SSH з'єднання з вашим вузлом за допомогою наступної команди:
`SSH ronindojo@[IP]`

Якщо, наприклад, IP-адреса вашого вузла є `192.168.1.40`, відповідною командою буде:
`SSH ronindojo@192.168.1.40`

Якщо ви змінили своє ім'я користувача під час кроку 6, замінивши стандартне ім'я користувача (`ronindojo`) на інше, переконайтеся, що використовуєте це нове ім'я в команді. Наприклад, якщо ви обрали `planb` як ваше ім'я користувача і IP-адреса є `192.168.1.40`, командою для введення буде:
`SSH planb@192.168.1.40`

Вам буде запропоновано ввести пароль користувача. Введіть його та натисніть `enter`, щоб підтвердити. Після цього ви отримаєте доступ до інтерфейсу RoninCLI. Використовуйте клавіші зі стрілками на клавіатурі для навігації до меню `Samourai Toolkit` та натисніть `enter`, щоб вибрати його:

![Samourai Toolkit](assets/notext/43.webp)

Потім виберіть `Whirlpool Stat Tool`:

![WST](assets/notext/44.webp)

Після ініціалізації WST, інструмент приступить до своєї автоматичної інсталяції. Зачекайте під час цього кроку. Інструкції щодо використання будуть прокручуватися. Після завершення інсталяції натисніть будь-яку клавішу, щоб отримати доступ до терміналу WST:

![WST commands](assets/notext/45.webp)

Буде відображено наступний командний рядок:
`wst#/tmp>`

Якщо ви бажаєте вийти з цього інтерфейсу та повернутися до меню RoninCLI, просто введіть:
`quit`

Спочатку необхідно налаштувати проксі для використання Tor, щоб забезпечити конфіденційність при витягуванні даних з OXT. Введіть команду:
`socks5 127.0.0.1:9050`
Далі приступіть до завантаження інформації про пул, яка містить вашу транзакцію:
`download 0001`
Замініть `0001` на код номіналу пулу, який вас цікавить. Коди номіналів наступні на WST:
- Пул 0.5 біткоїнів: `05`
- Пул 0.05 біткоїнів: `005`
- Пул 0.01 біткоїнів: `001`
- Пул 0.001 біткоїнів: `0001`

Після завантаження завантажте дані, замінивши `0001` на код вашого пулу в цій команді: `load 0001`

![WST loading](assets/notext/46.webp)

Зачекайте, поки завантаження завершиться, що може зайняти кілька хвилин. Як тільки дані будуть завантажені, щоб дізнатися оцінки анонімності вашої монети, виконайте команду `score` за якою слідує ваш TXID (без дужок):
`score [TXID]`

![WST score](assets/notext/47.webp)

WST потім покаже ретроспективну оцінку (_Метрики, що дивляться назад_), за якою слідує перспективна оцінка (_Метрики, що дивляться вперед_). Крім оцінок анонімності, WST також вкаже швидкість розповсюдження вашої транзакції в пулі, відносно її анонімності.

**Важливо зазначити, що перспективна оцінка вашої монети повинна бути розрахована з TXID вашого початкового міксу, а не з вашого найновішого міксу. Навпаки, ретроспективна оцінка UTXO розраховується з TXID останнього циклу.**

### Використання калькулятора Больцмана
Калькулятор Больцмана - це інструмент для аналізу біткоїн-транзакції, який дозволяє вимірювати її рівень ентропії серед інших передових метрик. Ці дані надають кількісну оцінку приватності транзакції та допомагають ідентифікувати потенційні недоліки. Цей інструмент вже інтегрований у ваш вузол RoninDojo, що робить його легким у доступі та використанні.

Перед детальним описом процедури використання калькулятора Больцмана, важливо зрозуміти значення цих індикаторів, метод їх розрахунку та їх користь. Хоча ці індикатори застосовні до будь-якої біткоїн-транзакції, вони особливо корисні для оцінки якості транзакції coinjoin.

**Перший індикатор**, який розраховує програмне забезпечення, - це загальна кількість можливих комбінацій, вказана під `nb combinations` у інструменті. Виходячи з значень UTXO, що беруть участь, цей індикатор кількісно визначає кількість способів, якими входи можуть бути асоційовані з виходами. Іншими словами, він визначає кількість правдоподібних інтерпретацій, які може генерувати транзакція. Наприклад, coinjoin, структурований відповідно до моделі Whirlpool 5x5, представляє `1496` можливих комбінацій:
![combinations](assets/notext/50.webp)
Кредит: KYCP

**Другий індикатор**, який розраховується, - це ентропія транзакції, позначена як `Entropy`. Коли транзакція має велику кількість можливих комбінацій, часто більш відповідно посилатися на її ентропію. Вона визначається як двійковий логарифм кількості можливих комбінацій. Ось формула, що використовується:
- $E$: ентропія транзакції;
- $C$: кількість можливих комбінацій для транзакції.
$$E = \log_2(C)$$
У математиці, бінарний логарифм (логарифм за основою 2) відповідає оберненій операції піднесення 2 до степеня. Іншими словами, бінарний логарифм $x$ є показником степеня, до якого потрібно підняти 2, щоб отримати $x$. Тому, цей показник виражається в бітах. Візьмемо приклад розрахунку ентропії для транзакції coinjoin, структурованої відповідно до моделі Whirlpool 5x5, яка, як було зазначено раніше, пропонує число можливих комбінацій `1496`:$$ C = 1496 $$
$$ E = \log_2(1496) $$
$$ E \approx 10.5469 \text{ біт}$$

Таким чином, ця транзакція coinjoin демонструє ентропію 10.5469 біт, що вважається дуже задовільним. Чим вище це значення, тим більше різних інтерпретацій допускає транзакція, тим самим підвищуючи її рівень приватності.

Розглянемо додатковий приклад з більш традиційною транзакцією, яка має один вхід і два виходи: [1b1b0c3f0883a99f1161c64da19471841ed12a1f78e77fab128c69a5f578ccce](https://mempool.space/en/tx/1b1b0c3f0883a99f1161c64da19471841ed12a1f78e77fab128c69a5f578ccce)
У випадку цієї транзакції, єдина можлива інтерпретація: `(inp 0) > (Outp 0 ; Outp 1)`. Відповідно, її ентропія встановлена на `0`:
$$ C = 1 $$
$$ E = \log_2(1) $$
$$ E \approx 0 \text{ біт}$$
**Третій показник**, наданий калькулятором Boltzmann, називається `Ефективність гаманця`. Цей показник оцінює ефективність транзакції, порівнюючи її з оптимальною транзакцією, яку можна було б уявити в ідентичній ситуації. Це приводить нас до обговорення концепції максимальної ентропії, яка відповідає найвищій ентропії, яку конкретна структура транзакції теоретично може досягти. Таким чином, для структури coinjoin Whirlpool 5x5 максимальна ентропія встановлена на `10.5469`. Ефективність транзакції потім розраховується шляхом порівняння цієї максимальної ентропії з фактичною ентропією аналізованої транзакції. Формула використовується наступна:
- $ER$: фактична ентропія транзакції, виражена в бітах;
- $EM$: максимально можлива ентропія для даної структури транзакції, також у бітах;
- $Ef$: ефективність транзакції, у бітах.
$$Ef = ER - EM$$ $$Ef = 10.5469 - 10.5469$$
$$Ef = 0 \text{ біт}$$

Цей показник також виражається у відсотках, його формула тоді:
- $CR$: кількість фактично можливих комбінацій;
- $CM$: максимальна кількість можливих комбінацій з тією ж структурою;
- $Ef$: ефективність, виражена у відсотках.
$$Ef = \frac{CR}{CM}$$
$$Ef = \frac{1496}{1496}$$
$$Ef = 100\%$$

Ефективність `100%` таким чином вказує на те, що транзакція максимізує свій потенціал для приватності на основі своєї структури.
**Четвертий індикатор**, густина ентропії, або `Entropy Density`, пропонує перспективу щодо ентропії відносно кожного входу або виходу транзакції. Цей індикатор виявляється корисним для оцінки та порівняння ефективності транзакцій різного розміру. Для його розрахунку просто поділіть загальну ентропію транзакції на загальну кількість входів та виходів, що беруть участь. Взявши приклад Whirlpool 5x5 coinjoin:
- $ED$: густина ентропії, виражена в бітах;
- $E$: ентропія транзакції, виражена в бітах;
- $T$: загальна кількість входів та виходів у транзакції.
$$T = 5 + 5 = 10$$
$$ED = \frac{E}{T}$$
$$ED = \frac{10.5469}{10}$$
$$ED = 1.054 \text{ біт}$$
**П'ята інформація**, яку надає Калькулятор Больцмана, це таблиця ймовірностей співставлення між входами та виходами. Ця таблиця вказує, через `Boltzmann score`, ймовірність того, що конкретний вхід пов'язаний з певним виходом. Взявши приклад Whirlpool coinjoin, таблиця ймовірностей підкреслить шанси зв'язку між кожним входом та виходом, надаючи кількісну міру невизначеності або передбачуваності асоціацій у транзакції:

| %       | Вихід 0 | Вихід 1 | Вихід 2 | Вихід 3 | Вихід 4 |
|---------|----------|----------|----------|----------|----------|
| Вхід 0  | 34%      | 34%      | 34%      | 34%      | 34%      |
| Вхід 1  | 34%      | 34%      | 34%      | 34%      | 34%      |
| Вхід 2  | 34%      | 34%      | 34%      | 34%      | 34%      |
| Вхід 3  | 34%      | 34%      | 34%      | 34%      | 34%      |
| Вхід 4  | 34%      | 34%      | 34%      | 34%      | 34%      |

Тут очевидно, що кожен вхід має рівний шанс бути асоційованим з будь-яким виходом, що посилює невизначеність та конфіденційність транзакції. Однак, у випадку простої транзакції з одним входом та двома виходами, ситуація інша:

| %       | Вихід 0 | Вихід 1 |
|---------|----------|----------|
| Вхід 0  | 100%     | 100%     |

Тут ми бачимо, що ймовірність кожного виходу походити від входу 0 становить 100%. Нижча ймовірність таким чином перекладається на більшу конфіденційність, розмиваючи прямі зв'язки між входами та виходами.

**Шоста інформація**, яка надається, це кількість детермінованих зв'язків, доповнена співвідношенням цих зв'язків. Цей індикатор виявляє, скільки з'єднань між входами та виходами в аналізованій транзакції є незаперечними, з ймовірністю 100%. Співвідношення, в свою чергу, пропонує перспективу ваги цих детермінованих зв'язків у загальній кількості зв'язків транзакції.

Наприклад, транзакція типу Whirlpool coinjoin не має детермінованих зв'язків, і тому показує індикатор та співвідношення 0%. З іншого боку, у нашій другій розглянутій транзакції (з одним входом та двома виходами) індикатор встановлено на 2, а співвідношення досягає 100%. Таким чином, нульовий індикатор сигналізує про відмінну конфіденційність завдяки відсутності прямих та незаперечних зв'язків між входами та виходами.
**Як отримати доступ до Калькулятора Больцмана на RoninDojo?** Щоб отримати доступ до інструменту *Калькулятор Больцмана*, перейдіть до RoninCLI. Для цього відкрийте термінал на вашому персональному комп'ютері та встановіть SSH-з'єднання з вашим вузлом, використовуючи наступну команду: `SSH ronindojo@[IP]`

Якщо, наприклад, IP-адреса вашого вузла є `192.168.1.40`, відповідна команда буде:
`SSH ronindojo@192.168.1.40`

Якщо ви змінили своє ім'я користувача під час кроку 6, замінивши стандартне ім'я користувача (`ronindojo`) на інше, переконайтеся, що використовуєте це нове ім'я в команді. Наприклад, якщо ви обрали `planb` як ваше ім'я користувача та IP-адреса є `192.168.1.40`, команда для введення буде:
`SSH planb@192.168.1.40`

Вас попросять ввести пароль користувача. Введіть його та натисніть `enter`, щоб підтвердити. Після цього ви отримаєте доступ до інтерфейсу RoninCLI. Використовуйте стрілки на клавіатурі для навігації до меню `Samourai Toolkit` та натисніть `enter`, щоб вибрати його:

![Samourai Toolkit](assets/notext/43.webp)

Потім виберіть `Boltzmann Calculator`:

![boltzmann](assets/notext/49.webp)

Ви потрапите на домашню сторінку програми:

![boltzmann home](assets/notext/51.webp)

Введіть TXID транзакції, яку ви хочете дослідити, та натисніть клавішу `enter`:

![boltzmann txid](assets/notext/52.webp)

Після цього калькулятор надасть вам всі індикатори, про які ми раніше говорили:

![boltzmann result](assets/notext/53.webp)

### Інші функції вашого RoninDojo v2
Ваш вузол RoninDojo інтегрує різноманітні інші функції. Зокрема, у вас є можливість сканувати специфічну інформацію, щоб врахувати її. Наприклад, іноді ваш гаманець Samourai, підключений до RoninDojo, може не відображати біткойни, які ви насправді маєте. Якщо баланс вказує 0, тоді як ви впевнені, що маєте біткойни в цьому гаманці, кілька причин можуть пояснити цю ситуацію, такі як помилка в шляхах похідності. Але однією з причин також може бути те, що ваш вузол не належним чином моніторить ваші адреси. Щоб вирішити цю проблему, ви можете переконатися, що ваш вузол дійсно слідкує за вашим `xpub`, використовуючи інструмент _xpub tool_. Щоб отримати доступ до цього інструменту через RoninUI, слідуйте шляху:
`Maintenance > XPUB Tool`

Введіть `xpub`, який викликає проблему, та натисніть на кнопку `Check`, щоб перевірити цю інформацію:
![xpub tool](assets/notext/54.webp)
Переконайтеся, що всі транзакції належним чином перелічені. Також важливо перевірити, чи тип похідності, який використовується, відповідає вашому гаманцю. Якщо це не так, натисніть на `Retype`, а потім виберіть з `BIP44`, `BIP49`, або `BIP84` згідно з вашими потребами.
Крім цього інструменту, вкладка `Maintenance` RoninUI містить багато інших корисних функцій:
- *Transaction Tool*: Дозволяє досліджувати деталі даної транзакції;
- *Address Tool*: Дозволяє підтвердити відстеження даної адреси вашим Dojo;
- *Rescan Blocks*: Змушує ваш вузол виконати нове сканування вказаного діапазону блоків.

Вкладка `Push Tx` є ще однією цікавою функцією RoninUI, яка дозволяє транслювати підписану транзакцію в мережі Bitcoin. Транзакцію потрібно ввести у шістнадцятковій формі.
Щодо інших вкладок, доступних на вашому дашборді RoninUI:
- `Apps`: Містить додаток Whirlpool і, безсумнівно, буде використовуватися для інтеграції нових додатків у майбутньому;
- `Logs`: Надає доступ до журналів подій вашого програмного забезпечення в реальному часі;
- `System Info`: Надає загальну інформацію про ваш вузол, таку як температура процесора, використання місця на сховищі або дані RAM. Також тут ви знайдете опції `Reboot` та `Shut down` для перезавантаження або вимкнення вашого вузла;
- `Settings`: Дозволяє змінити пароль користувача.

Ось і все! Дякую, що дотримувалися цього навчального посібника до кінця. Якщо вам сподобалося, я заохочую вас поділитися ним у соціальних мережах. Більше того, якщо у вас є можливість, розгляньте можливість підтримки розробників, які надають це безкоштовне та відкрите програмне забезпечення для нашої спільноти, зробивши пожертву: [https://donate.ronindojo.io/](https://donate.ronindojo.io/). Щоб поглибити свої знання про RoninDojo та відкрити більше ресурсів, я настійно рекомендую ознайомитися з посиланнями на зовнішні ресурси, зазначені нижче.

**Зовнішні ресурси:**
- [https://ronindojo.io/index.html](https://ronindojo.io/index.html)
- [https://wiki.ronindojo.io/en/home](https://wiki.ronindojo.io/en/home)
- [https://gist.github.com/LaurentMT/e758767ca4038ac40aaf](https://gist.github.com/LaurentMT/e758767ca4038ac40aaf)
- [https://medium.com/@laurentmt/introducing-boltzmann-85930984a159](https://medium.com/@laurentmt/introducing-boltzmann-85930984a159)
- [https://wiki.ronindojo.io/en/setup/V2_0_0-upgrade-raspberry](https://wiki.ronindojo.io/en/setup/V2_0_0-upgrade-raspberry)