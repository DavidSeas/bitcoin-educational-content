---
name: Samourai Wallet - Відновлення
description: Як відновити біткойни, що застрягли в Samourai Wallet?
---
![обкладинка](assets/cover.webp)

Після арешту засновників Samourai Wallet та конфіскації їх серверів 24 квітня, деякі функції додатку зараз не працюють, і користувачі, які не мають власного Dojo, більше не можуть здійснювати транзакції.

Після допомоги кільком користувачам у відновленні їхніх біткойнів останніми днями, я вважаю, що зіткнувся з більшістю проблем, які можуть виникнути під час відновлення Samourai Wallet. Тому цей навчальний посібник почнеться зі звіту про ситуацію, щоб визначити функції, які залишаються працездатними, та ті, які більше не доступні в екосистемі Samourai Wallet та програмному забезпеченні, постраждалому від цього інциденту. Далі ми будемо крок за кроком відновлювати Samourai Wallet за допомогою програмного забезпечення Sparrow Wallet. Ми розглянемо всі потенційні перешкоди, з якими можна зіткнутися під час цього процесу, і побачимо рішення для їх вирішення. Нарешті, в останній частині ви дізнаєтесь про потенційні ризики для вашої конфіденційності після конфіскації серверів.

*Велике спасибі [@Louferlou](https://twitter.com/Louferlou), який допоміг кільком користувачам у їх відновленні та поділився зі мною своїм досвідом, а також вніс свій вклад у тестування, щоб визначити, що все ще функціонує.*

## Чи все ще працює Samourai Wallet?

Так, **додаток Samourai Wallet все ще працює**, але за певних умов.

По-перше, необхідно, щоб додаток був раніше встановлений на ваш смартфон. Google Play Store видалив додаток, а APK було розміщено на конфіскованому веб-сайті. Тому зараз складно встановити Samourai. Ви можете знайти APK в Інтернеті, але я раджу не завантажувати їх, якщо ви не впевнені в джерелі.

Оскільки сторінка Samourai Wallet більше не доступна в Google Play Store, неможливо вимкнути автоматичні оновлення. Якщо додаток повернеться на платформи для завантаження, було б розумно **вимкнути автоматичні оновлення**, поки не буде доступно більше інформації щодо розвитку справи.

Якщо Samourai Wallet вже встановлено на вашому смартфоні, ви все ще повинні мати доступ до додатку. Для використання функціоналу гаманця Samourai необхідно підключити Dojo. Раніше користувачі без особистого Dojo залежали від серверів Samourai для доступу до інформації блокчейна Bitcoin та для здійснення транзакцій. З конфіскацією цих серверів додаток більше не може отримувати доступ до цих даних.
Якщо ви раніше не мали підключеного Dojo, але маєте його зараз, ви можете налаштувати його для повторного використання вашого додатку Samourai. Це передбачає перевірку ваших резервних копій, видалення гаманця (гаманця, а не додатку) та відновлення гаманця шляхом підключення вашого Dojo до додатку. Для отримання детальнішої інформації про ці кроки ви можете звернутися до [цього навчального посібника, у розділі "_Підготовка вашого Samourai Wallet_" : COINJOIN - DOJO](https://planb.network/en/tutorials/privacy/coinjoin-dojo).
Якщо ваш додаток Samourai вже був підключений до вашого власного Dojo, то частина гаманця працює для вас ідеально. Ви все ще можете бачити свій баланс і здійснювати транзакції. Незважаючи на все, що відбувається, я вважаю, що Samourai Wallet залишається найкращим програмним забезпеченням мобільного гаманця на даний момент. Особисто я планую продовжувати його використання.
Основною проблемою, з якою ви можете зіткнутися, є неможливість доступу до акаунтів Whirlpool через додаток. Зазвичай, Samourai намагається встановити з'єднання з вашим Whirlpool CLI та розпочати цикли coinjoin перед наданням вам доступу до цих акаунтів. Однак, оскільки це з'єднання більше не можливе, додаток продовжує шукати нескінченно, не надаючи вам доступу до акаунтів Whirlpool. У цьому випадку ви можете відновити ці акаунти в іншому програмному забезпеченні для гаманця, зберігаючи лише депозитний акаунт на Samourai.
### Які інструменти все ще доступні на Samourai?

З іншого боку, деякі інструменти або постраждали від вимкнення сервера, або повністю недоступні.

Що стосується індивідуальних інструментів витрат, все працює нормально, звичайно, за умови, що у вас є власний Dojo. Звичайні транзакції Stonewall (а не Stonewall x2) працюють без будь-яких проблем.

Коментарі на Twitter вказали, що приватність, яку надає транзакція Stonewall, може бути зараз зменшена. Додана вартість транзакції Stonewall полягає в тому, що вона невідрізнима від транзакції Stonewall x2 за структурою. Коли аналітик зустрічає цей конкретний шаблон, він не може визначити, чи є це стандартний Stonewall з одним користувачем або Stonewall x2 з двома користувачами. Однак, як ми побачимо в наступних абзацах, проведення транзакцій Stonewall x2 стало складнішим через недоступність Soroban. Деякі тому вважають, що аналітик тепер може припустити, що будь-яка транзакція з цією структурою є звичайним Stonewall. Особисто я не поділяю цього припущення. Хоча транзакції Stonewall x2 можуть бути менш частими (і я думаю, вони вже були до цього інциденту), факт того, що вони все ще можливі, може спростувати весь аналіз, заснований на припущенні, що вони не є такими.
**[-> Дізнатися більше про транзакції Stonewall.](https://planb.network/tutorials/privacy/stonewall)**
Що стосується Ricochet, я не зміг перевірити, чи сервіс все ще функціонує, оскільки не маю Dojo на Testnet, і я вважаю за краще не ризикувати витрачати `100 000 sats` на гаманець, який міг би контролюватися владою. Якщо ви мали можливість нещодавно протестувати цей інструмент, я запрошую вас зв'язатися зі мною, щоб ми могли оновити цю статтю.

Якщо вам потрібно використовувати Ricochet, майте на увазі, що ви завжди можете виконати цю операцію вручну з будь-яким програмним забезпеченням для гаманця. Щоб дізнатися, як правильно виконати різні стрибки вручну, я рекомендую проконсультуватися з цією іншою статтею: [**RICOCHET**](https://planb.network/tutorials/privacy/ricochet).

Інструмент JoinBot більше не функціонує, оскільки він повністю залежав від участі гаманця, керованого Samourai.

Що стосується інших типів спільних транзакцій, які часто називають "cahoots", вони залишаються можливими, але лише вручну. До вимкнення сервера у вас було два варіанти для виконання транзакцій Stonewall x2 або Stowaway (PayJoin):
- Використовуйте мережу Soroban для автоматичного та віддаленого обміну PSBTs;
- Або виконуйте ці обміни вручну, скануючи кілька QR-кодів.

Після кількох тестів з'ясувалося, що Soroban більше не функціонує. Для виконання цих спільних транзакцій обмін даними має бути здійснений вручну. Ось два варіанти для виконання цього обміну:
- Якщо ви фізично поруч зі своїм співпрацівником, ви можете послідовно сканувати QR-коди.
- Якщо ви знаходитесь далеко від свого співробітника, ви можете обмінюватися PSBT через зовнішній канал зв'язку до додатку. Однак будьте обережні, оскільки дані, що містяться в цих PSBT, є чутливими з точки зору конфіденційності. Я рекомендую використовувати сервіс зашифрованих повідомлень, щоб забезпечити конфіденційність обміну.
**[-> Дізнайтеся більше про транзакції Stonewall x2.](https://planb.network/tutorials/privacy/stonewall-x2)**

**[-> Дізнайтеся більше про транзакції Stowaway.](https://planb.network/tutorials/privacy/payjoin-samourai-wallet)**

Що стосується Whirlpool, протокол більше не здається функціональним, навіть для користувачів, які мають власний Dojo. Я спостерігав за моїм RoninDojo останніми днями і спробував деякі базові маніпуляції, але Whirlpool CLI не зміг підключитися з моменту зупинки сервера.

Однак я залишаюся в надії, що цей протокол може бути реактивований або, можливо, переосмислений по-іншому в найближчі тижні, залежно від того, як розвиватиметься ситуація. Ця пауза може бути можливістю для дослідження нових підходів або потенційних покращень цієї системи.
### Які зовнішні інструменти все ще доступні?
Що стосується інших інструментів, пов'язаних з середовищем Samourai, деякі з них все ще доступні, тоді як інші - ні.

Безкоштовний вебсайт аналізу ланцюгів OXT.me на жаль, наразі недоступний.

Інструмент статистики Whirlpool більше не доступний для завантаження, оскільки він був розміщений на GitLab Samourai. Навіть якщо ви раніше завантажили цей інструмент Python локально на свій комп'ютер, або якщо він був встановлений на вашому вузлі RoninDojo, WST не працюватиме наразі. Дійсно, він залежав від даних, наданих OXT.me для своєї роботи, і цей сайт більше не доступний. Наразі WST не особливо корисний, оскільки протокол Whirlpool неактивний.

Сайт KYCP.org наразі більше не доступний.

GitLab, який розміщував код для інструменту Python Boltzmann Calculator, також був захоплений. На цей час, отже, завантажити цей інструмент більше неможливо. Але якщо у вас є RoninDojo, ви можете продовжувати використовувати Boltzmann Calculator так само, як і раніше.

Що стосується RoninDojo, це програмне забезпечення вузла-в-коробці продовжує правильно функціонувати, незважаючи на недоступність деяких конкретних інструментів, таких як Whirlpool CLI та WST. Його все ще можна використовувати для іншого програмного забезпечення гаманця завдяки Fulcrum або Electrs. Якщо ви хочете отримати більше інформації про RoninDojo або маєте конкретні питання, я заохочую вас приєднатися до [їхньої групи Telegram](https://t.me/RoninDojoNode).

Однак, вихідний код для RoninDojo наразі більше не доступний, оскільки він був розміщений на GitLab Samourai. Тому наразі неможливо вручну встановити його на Raspberry Pi.

Що стосується програмного забезпечення для гаманця тільки для перегляду Sentinel, ситуація схожа на ту, що і з додатком Samourai. Якщо у вас є власний Dojo, ви можете продовжувати використовувати Sentinel без жодних проблем. Однак, якщо у вас немає Dojo, ви більше не зможете встановити з'єднання. На відміну від Samourai, вебсайт Sentinel все ще доступний онлайн. Але будьте обережні з цим сайтом та запропонованим там APK, оскільки незрозуміло, хто наразі контролює ці ресурси.

### Чи вплинуло це на Sparrow Wallet?
Sparrow Wallet продовжує працювати нормально, за винятком інструментів Samourai, які більше не доступні. Наразі неможливо виконати coinjoins через Sparrow. Так само, інструменти для спільних витрат більше не доступні, оскільки Sparrow не пропонує опцію ручного обміну PSBTs, на відміну від Samourai. Для всіх інших функцій Sparrow працює без проблем. Ви також можете використовувати це програмне забезпечення для відновлення гаманця Samourai, якщо це необхідно.

## Як відновити гаманець Samourai?
Як ми бачили в попередніх розділах, якщо ви володієте власним Dojo, не обов'язково потрібно змінювати програмне забезпечення. **Samourai залишається відмінним вибором гарячого гаманця** для щоденних витрат. Однак, якщо у вас немає Dojo або якщо ви віддаєте перевагу іншому програмному забезпеченню, я поясню процес повного відновлення, деталізуючи будь-які потенційні перешкоди, з якими ви можете зіткнутися.

У будь-якому випадку важливо не поспішати і переконатися, що ви не робите помилок. Пам'ятайте, немає причин для поспіху, оскільки ви володієте своїми приватними ключами, і захоплення серверів Samourai ніяк це не впливає. Що б там не сталося, вони очевидно не можуть отримати доступ до ваших приватних ключів.

### Перевірте парольну фразу

Для відновлення вашого гаманця вам потрібно мати вашу парольну фразу, навіть якщо ви вирішите відновлення через файл резервної копії. Почніть з перевірки дійсності цієї парольної фрази. Відкрийте ваш додаток Samourai Wallet, натисніть на ваш іконку Paynym у верхньому лівому куті, потім виберіть `Settings`.

![samourai](assets/1.webp)

Далі натисніть на `Troubleshooting` і потім на `Passphrase/backup test`.

![samourai](assets/2.webp)

Введіть вашу парольну фразу і натисніть `Ok`. Якщо вона правильна, Samourai підтвердить це. У вас також є можливість перевірити файл резервної копії, якщо ви плануєте використовувати його пізніше.

![samourai](assets/3.webp)

Цей крок є необов'язковим, але рекомендованим. Він підтверджує, що парольна фраза правильна, усуваючи потенційне джерело проблем пізніше. Якщо на цьому етапі Samourai вказує, що парольна фраза неправильна, відновлення буде неможливим. Переконайтеся, що ви правильно ввели парольну фразу і перевірте її ще раз.

### Опція 1: Відновлення гаманця на Sparrow за допомогою файлу резервної копії

Починаючи з версії 1.8.6 Sparrow Wallet, можливо безпосередньо імпортувати ваш гаманець Samourai, використовуючи текстовий файл резервної копії під назвою `samourai.txt`, який ваш додаток автоматично генерує. Цей файл містить всю необхідну інформацію для відновлення вашого гаманця і зашифрований вашою парольною фразою для безпеки.

Якщо ви вибрали цю опцію, вам буде потрібен ваш актуальний файл `samourai.txt` і ваша парольна фраза. Щоб згенерувати цей файл у Samourai Wallet, натисніть на три маленькі точки у верхньому правому куті, потім виберіть `Export wallet backup`.

![samourai](assets/4.webp)
Далі виберіть `Export to Clipboard`. Після цього вам потрібно буде безпечно передати цей файл на ваш ПК. Оскільки файл зашифрований, але парольна фраза сама по собі достатня для його розшифровки, важливо вжити заходів безпеки під час його передачі. Якщо ви вирішите здійснити пряму передачу у вигляді звичайного тексту, вам потрібно буде створити файл `samourai.txt` на вашому ПК і вставити вміст буфера обміну в нього. Альтернативою може бути безпосереднє отримання файлу `samourai.txt` з файлів, збережених на вашому телефоні.
Як тільки у вас буде доступ до файлу на вашому ПК, відкрийте Sparrow Wallet, натисніть на вкладку `File`, і виберіть `Import Wallet`, щоб почати імпорт вашого гаманця.

![samourai](assets/5.webp)
Прокрутіть вниз до `Samourai Backup`, натисніть на `Import File` та оберіть ваш файл `samourai.txt`.
![samourai](assets/6.webp)

Після цього Sparrow попросить вас ввести пароль для розшифрування файлу. Цей пароль насправді є вашою парольною фразою. Введіть її у відповідне поле та натисніть на `Import`.

![samourai](assets/7.webp)

Якщо на цьому етапі ваш гаманець не з'являється, можливо, ви зробили помилку при копіюванні файлу `samourai.txt` або при введенні парольної фрази. Ви можете звернутися до розділу з усунення неполадок для отримання додаткової допомоги.

![samourai](assets/8.webp)

Щодо типу скрипта, якщо ви не налаштовували інші скрипти в Samourai, вам зазвичай слід використовувати лише SegWit V0 (Native SegWit / P2WPKH). Залиште цей скрипт за замовчуванням та натисніть на `Import`.

![samourai](assets/9.webp)

Назвіть ваш гаманець, наприклад, "Samourai Recovery", та натисніть на `Create Wallet`.

![samourai](assets/10.webp)

Після цього Sparrow попросить вас обрати пароль. Цей пароль захищає лише доступ до вашого гаманця на цьому ПК і не стосується генерації ключів вашого гаманця. Обов'язково оберіть надійний пароль, запишіть його, щоб не забути, та натисніть на `Set Password`.

![samourai](assets/11.webp)

Після цього Sparrow згенерує ключі вашого гаманця та почне пошук відповідних транзакцій.

![samourai](assets/12.webp)

Наразі доступний лише ваш депозитний рахунок. Якщо ви використовували Samourai лише для цього рахунку, ви повинні бачити всі свої кошти. Однак, якщо ви також використовували Whirlpool, вам потрібно буде вивести рахунки `premix`, `postmix` та `badbank`. У Sparrow просто натисніть на вкладку `Settings`, потім на `Add Accounts...`.

![samourai](assets/13.webp)
У вікні, що відкриється, оберіть `Whirlpool Accounts` з випадаючого меню, потім натисніть на `OK`.
![samourai](assets/14.webp)

Після цього ви побачите ваші різні рахунки Whirlpool, і Sparrow згенерує необхідні ключі для використання асоційованих біткойнів.

![samourai](assets/15.webp)

Якщо ви використовуєте інше програмне забезпечення, ніж Sparrow, наприклад, Electrum, для відновлення вашого гаманця Samourai, ось індекси рахунків Whirlpool для ручного відновлення:
- Депозит: `m/84'/0'/0'`
- Bad Bank: `m/84'/0'/2147483644'`
- Premix: `m/84'/0'/2147483645'`
- Postmix: `m/84'/0'/2147483646'`

Тепер у вас є доступ до ваших біткойнів у Sparrow. Якщо вам потрібна допомога з використанням Sparrow Wallet, ви також можете переглянути [наш спеціалізований навчальний посібник](https://planb.network/tutorials/wallet/sparrow).

Я також рекомендую вручну імпортувати мітки, які ви асоціювали з вашими UTXO в Samourai. Це дозволить вам ефективно контролювати монети в Sparrow надалі.

### Варіант 2: Відновлення гаманця в Sparrow за допомогою мнемонічної фрази

Якщо ви не бажаєте виконувати відновлення за допомогою файлу резервної копії, ви можете обрати більш традиційний метод, просто використовуючи вашу 12-слівну відновлювальну фразу та парольну фразу. Цей другий варіант часто простіший.
Для початку, переконайтеся, що у вас є ваша фраза відновлення та ваш пароль. Потім відкрийте програмне забезпечення Sparrow Wallet, натисніть на вкладку `File` та виберіть `Import Wallet`, щоб розпочати імпорт вашого гаманця.
![samourai](assets/16.webp)

Виберіть `Mnemonic Words (BIP39)` і, у випадаючому меню, натисніть на `Use 12 Words`.

![samourai](assets/17.webp)

Введіть 12 слів вашої фрази відновлення у правильному порядку.

![samourai](assets/18.webp)

Якщо Sparrow показує повідомлення `Invalid Checksum`, це означає, що контрольна сума фрази відновлення недійсна, що, ймовірно, означає, що ви зробили помилку при введенні слів.

![samourai](assets/19.webp)

Якщо ваша фраза правильна, поставте галочку в полі `Use Passphrase?` та введіть ваш пароль у відведене поле. Нарешті, якщо все виглядає правильно, натисніть на кнопку `Discover Wallet`.

![samourai](assets/20.webp)

Назвіть ваш гаманець, наприклад, "Samourai Recovery", потім натисніть на `Create Wallet`.

![samourai](assets/21.webp)
Sparrow потім запропонує вам вибрати пароль. Цей пароль захищає доступ до вашого гаманця на цьому ПК і не стосується генерації ключів вашого гаманця. Переконайтеся, що вибрали надійний пароль, запишіть його, щоб пам'ятати, та натисніть на `Set Password`.
![samourai](assets/22.webp)

Sparrow потім виведе ключі для вашого гаманця та пошукає відповідні транзакції.

![samourai](assets/23.webp)

Якщо на цьому етапі ваш гаманець не з'являється, можливо, ви зробили помилку при введенні пароля або фрази відновлення. Ви можете звернутися до спеціального розділу з вирішення проблем для отримання додаткової допомоги.

Наразі доступний лише ваш рахунок для депозитів. Якщо ви використовували Samourai лише для цього рахунку, ви повинні бачити всі свої кошти. Однак, якщо ви також використовували Whirlpool, вам потрібно буде вивести рахунки `premix`, `postmix`, та `badbank`. У Sparrow просто натисніть на вкладку `Settings`, потім на `Add Accounts...`.

![samourai](assets/24.webp)

У вікні, що відкриється, виберіть `Whirlpool Accounts` з випадаючого списку, потім натисніть на `OK`.

![samourai](assets/25.webp)

Потім ви побачите ваші різні рахунки Whirlpool, і Sparrow виведе необхідні ключі для використання асоційованих біткойнів.

![samourai](assets/26.webp)

Якщо ви використовуєте інше програмне забезпечення, наприклад Electrum, для відновлення вашого гаманця Samourai, ось індекси рахунків Whirlpool для ручного відновлення:
- Депозит: `m/84'/0'/0'`
- Bad Bank: `m/84'/0'/2147483644'`
- Premix: `m/84'/0'/2147483645'`
- Postmix: `m/84'/0'/2147483646'`

Тепер у вас є доступ до ваших біткойнів у Sparrow. Якщо вам потрібна допомога з використанням Sparrow Wallet, ви також можете звернутися до [нашого спеціального навчального посібника](https://planb.network/tutorials/wallet/sparrow).

Я також рекомендую вручну імпортувати мітки, які ви асоціювали з вашими UTXO в Samourai. Це дозволить вам ефективно контролювати монети в Sparrow надалі.

### Які найпоширеніші проблеми, з якими стикаються?
Після допомоги кільком людям протягом останніх кількох днів, я вважаю, що зіткнувся з більшістю проблем, які можуть перешкоджати відновленню вашого гаманця. Якщо ви все ще не можете отримати доступ до свого гаманця, незважаючи на попередні навчальні матеріали, ось деякі додаткові рекомендації. Перш за все, для успішного відновлення абсолютно необхідно, щоб фраза відновлення була правильною. Якщо ви не можете знайти свою 12-слівну фразу, ви можете використати *опцію 1*, щоб відновити з файлу резервної копії Samourai. Ви також можете отримати доступ до своєї фрази відновлення безпосередньо в Samourai Wallet, перейшовши до `Налаштування`, потім `Гаманець`, і нарешті вибравши `Показати 12-слівну фразу відновлення`.

Далі, помилка при введенні вашої парольної фрази під час відновлення призведе до неправильних похідних ключів, що перешкоджатиме відновленню вашого гаманця на Sparrow. **Парольна фраза має бути абсолютно точною!**

Щоб вирішити цю проблему, я спочатку раджу вам перевірити валідність вашої парольної фрази в додатку Samourai, як описано в розділі "_Перевірка парольної фрази_" цієї статті:
1. **Перевірка в Samourai:** Якщо Samourai підтверджує, що парольна фраза правильна, спробуйте знову відновити з самого початку, переконавшись, що ви точно вводите парольну фразу в Sparrow без помилок;
2. **Помилка парольної фрази:** Якщо Samourai вказує, що парольна фраза неправильна, немає сенсу продовжувати спроби на Sparrow. Доки не буде знайдено правильну парольну фразу, відновлення вашого гаманця неможливе. Якщо ви назавжди втратили свою парольну фразу, зберігайте ваш додаток Samourai в безпеці. Все, що ви можете зробити, - це сподіватися, що сервери будуть перезапущені, так що ви зможете робити витрати безпосередньо з додатку без необхідності відновлення. **Не намагайтеся підключити Dojo в цьому випадку**, оскільки це передбачатиме скидання вашого гаманця на Samourai, що вимагає доступу до парольної фрази.

Серед інших зустрічених помилок, багато пов'язані з конфігурацією мережі на Sparrow.

Спочатку, переконайтеся, що Sparrow правильно налаштований у режимі `mainnet`, а не в режимі `testnet`. Дійсно, якщо Sparrow шукає ваші транзакції на Testnet, він нічого не знайде, оскільки ваш гаманець знаходиться на Mainnet. Testnet - це альтернативна версія Bitcoin, яка використовується виключно для тестування та розробки і працює на окремій мережі від основної мережі (Mainnet), зі своїми блоками та транзакціями. Щоб перевірити, на якій мережі ви знаходитесь, натисніть на вкладку `Інструменти`, потім на `Перезапустити в`. Якщо відображається опція `Mainnet`, то ви не на основній мережі. Виберіть її, щоб перезапустити Sparrow на Mainnet, а потім почніть процес відновлення знову.

![samourai](assets/27.webp)
Деякі також зіткнулися з труднощами підключення Sparrow до свого вузла. У нижньому правому куті Sparrow кольоровий перемикач вказує, чи правильно ваше програмне забезпечення підключено до вузла Bitcoin. Для отримання ваших транзакцій Samourai важливо, щоб програмне забезпечення було добре підключене. Перевірте, чи активований перемикач, як на моєму зображенні нижче (жовтий для публічного вузла, зелений для Bitcoin Core та синій для сервера Electrum).
![samourai](assets/28.webp)

Якщо перемикач не активований, натисніть на нього, щоб реактивувати підключення.

![samourai](assets/29.webp)

Якщо проблема не зникає, ось деякі можливі рішення:
- Якщо ви намагаєтеся підключитися до свого власного сервера Electrum (синій) або вашого Bitcoin Core (зелений) і Sparrow не може підключитися, перевірте інформацію про підключення в `Файл > Налаштування... > Сервер`;

![samourai](assets/30.webp)
- Якщо проблема з'єднанням продовжується, це може бути через неповну синхронізацію вашого вузла. Переконайтеся, що ваш вузол та індексатор синхронізовані на 100%. Якщо необхідно, як останній засіб, від'єднайте ваш вузол від Sparrow і підключіться до публічного вузла;
- Якщо ви вже були підключені до публічного вузла і з'єднання не вдається, спробуйте змінити вузол, вибравши інший зі списку.

![samourai](assets/31.webp)

Якщо вам вдалося успішно відновити ваш гаманець, але він здається неповним, можлива проблема, пов'язана з похідними.

Проблема може виникнути, якщо ви використовували ваш рахунок для депозитів Samourai з іншим типом скрипта, ніж `P2WPKH`. За замовчуванням, Samourai використовує цей тип скрипта, але якщо ви вручну змінили його, вам також потрібно внести ці зміни під час відновлення в Sparrow.

Щоб отримати гілки для інших типів скриптів, вам потрібно повторити процес відновлення для кожного використаного типу скрипта. Для цього перейдіть до `File > New Wallet` у Sparrow, виберіть інший тип скрипта зі списку, натисніть на `New or Imported Software Wallet` і слідуйте тим же крокам, що й у початковому навчанні.

![samourai](assets/32.webp)

Інша проблема з похідними, з якою я зіткнувся, пов'язана зі значенням Gap Limit. Це значення показує Sparrow, після скількох порожніх адрес він повинен припинити створення нових адрес. Якщо після відновлення ви помітили, що деякі транзакції відсутні, це може бути через занадто низьке значення Gap Limit. Щоб вирішити цю проблему, перейдіть до рахунку, який викликає проблему, наприклад, до рахунку postmix (якщо проблема стосується кількох рахунків, повторіть цю операцію для кожного).

![samourai](assets/33.webp)

Натисніть на вкладку `Settings` і потім на кнопку `Advanced...`.
![samourai](assets/34.webp)
Поступово збільшуйте значення Gap Limit, наприклад, я встановив його на `400` тут. Потім натисніть на кнопку `Close`.

![samourai](assets/35.webp)

Натисніть на `Apply`, щоб завершити. Sparrow тоді похідно створить більшу кількість адрес і пошукає на них кошти, що повинно допомогти відновити всі ваші транзакції.

![samourai](assets/36.webp)

Це покриває різні проблеми з відновленням, з якими я зіткнувся за останні кілька днів. Якщо, навіть після спроби всіх цих рішень, у вас все ще виникають проблеми, я запрошую вас приєднатися до [Discover Bitcoin Discord](https://discord.gg/xKKm29XGBb), щоб попросити допомоги. Я регулярно відвідую цей Discord і буду радий допомогти, якщо у мене буде рішення. Інші біткойнери також зможуть поділитися своїм досвідом і запропонувати свою допомогу. **У будь-якому випадку, важливо зберігати вашу фразу відновлення, файл резервної копії та парольну фразу в таємниці**. Не діліться ними з кимось, оскільки це може дозволити їм вкрасти ваші біткойни.

Після завершення відновлення ви тепер маєте доступ до своїх біткойнів. Це добре, але цього може бути недостатньо. Дійсно, захоплення серверів породжує нові потенційні ризики для вашої конфіденційності. У наступному розділі ми детально розглянемо ці ризики та окреслимо заходи безпеки, які слід вжити для захисту вашої конфіденційності.

## Які наслідки для конфіденційності ваших транзакцій?

### Як користувач Samourai без Dojo

Якщо ви використовували гаманець Samourai, не підключивши власний Dojo, ваші xpubs мусили бути передані на сервери Samourai для функціонування додатку. З захопленням цих серверів, існує можливість, що тепер влада має доступ до цих xpubs.
Цей сценарій залишається гіпотетичним. Ми не знаємо, чи були записані ці xpubs, чи потенційне сховище було знищено, чи влада їх відновила, і чи планують вони використовувати їх для аналізу ланцюга. Однак, у такій ситуації розумно розглядати найгірший сценарій, де влада має xpubs користувачів, які не підключили власний Dojo. Для довідки, xpub - це рядок символів, який містить усі необхідні елементи для генерації дочірніх публічних ключів (публічний ключ + код ланцюга). Він використовується в ієрархічно детермінованих гаманцях для генерації адрес отримання та спостереження за транзакціями облікового запису без розкриття асоційованих приватних ключів. Це дозволяє, наприклад, створення гаманця "тільки для спостереження". Однак, розкриття xpubs може порушити конфіденційність користувача, оскільки вони дозволяють третім сторонам відстежувати транзакції та бачити баланси асоційованих облікових записів.
Будь-хто, хто знає ваші xpubs, може таким чином бачити всі адреси отримання вашого гаманця, ті, що використовувалися в минулому, і ті, що будуть згенеровані в майбутньому.

Для користувачів без Dojo, потенційний витік ваших xpubs має дві основні наслідки:
- Coinjoins, які ви могли виконати, стають неефективними з точки зору конфіденційності для будь-кого, хто знає ваші xpubs, таким чином, ваші монети втрачають весь anonset;
- Ця особа також може відстежувати всі адреси отримання вашого гаманця Samourai.

Тому важливо розглядати найгірший сценарій і розлучитися з цим гаманцем, потенційно скомпрометованим з точки зору конфіденційності. Для цього створіть новий гаманець з нуля з іншим програмним забезпеченням, як-от Sparrow Wallet. Після перевірки валідності ваших резервних копій, переведіть усі свої кошти, здійснюючи транзакції. Хоча ця операція не розриває зв'язок слідування ваших монет, вона не дозволить владі з упевненістю знати адреси вашого нового гаманця.

Під час цієї операції переказу я рекомендую уникати консолідації ваших монет. Якщо ми припускаємо, що ваші xpubs скомпрометовані, консолідація не матиме впливу з точки зору особи, яка має доступ до цих xpubs, оскільки ваша конфіденційність вже порушена з ними. Однак, я раджу вам не консолідувати свої монети занадто сильно, головним чином для захисту вашої конфіденційності від інших людей. У найгіршому випадку, тільки влада може мати доступ до ваших xpubs, але решта світу про них не знає. Таким чином, з точки зору інших, консолідація ваших монет може значно зашкодити вашій конфіденційності через Гевристику Спільного Володіння Входами (CIOH).

Нарешті, для остаточного розриву відстеження, також розгляньте виконання coinjoins з цього нового гаманця.
**Увага:** Просте відновлення вашого гаманця Samourai у Sparrow Wallet недостатньо. Необхідно створити абсолютно новий гаманець з новою фразою відновлення, якщо ви хочете уникнути використання xpubs, які могли витекти. Якщо ви імпортуєте ваш існуючий seed у Sparrow, ви лише змінюєте програмне забезпечення для управління гаманцем, але сам гаманець залишається тим самим.

### Як користувач Sparrow або Samourai з Dojo

Якщо ваш гаманець управляється лише в Sparrow Wallet, ваші xpubs не могли витекти, незалежно від того, використовуєте ви публічний вузол чи власний Bitcoin вузол. Аналогічно, якщо ви використовуєте додаток Samourai і завжди підключали цей додаток до власного Dojo з моменту створення вашого гаманця, ваші xpubs також у безпеці.
Проте, якщо ви використовували один і той же гаманець протягом періоду **без власного Dojo** і потім з вашим власним Dojo, існує можливість, що сервери Samourai могли мати доступ до ваших xpubs, і тому влада могла б знати їх. Якщо ви знаходитесь у цій конкретній ситуації, я раджу вам слідувати рекомендаціям попереднього розділу та розглядати ваші xpubs як скомпрометовані.
Для тих, хто завжди використовував Sparrow або Samourai зі своїм власним Dojo, основний ризик полягає в тому, що анонімні набори ваших монет потенційно можуть бути зменшені. Припустимо, у найгіршому випадку, що всі користувачі без Dojo мають свої xpubs в руках влади, тоді шлях їхніх монет через цикли coinjoin може бути простежений цією владою.

Щоб ілюструвати це, давайте розглянемо конкретний приклад. Уявіть, що ви брали участь у першому циклі coinjoin, за яким слідували два додаткові нижньопотокові цикли coinjoin. Якщо xpubs користувачів без Dojo не витекли, тоді потенційний анонімний набір вашої монети становив би 13.

![samourai](assets/37.webp)

Однак, якщо ми вважаємо, що xpubs витекли і що ви зустріли користувача без dojo під час початкового coinjoin, а потім 2 під час першого нижньопотокового coinjoin, тоді ваш потенційний анонімний набір становив би лише 10 замість 13 з точки зору влади.

![samourai](assets/38.webp)
Це потенційне зменшення анонімного набору складно кількісно оцінити, оскільки воно залежить від численних факторів, і кожна монета впливається по-різному. Наприклад, користувач без Dojo, зустрінутий на ранніх циклах, впливає на потенційний анонімний набір набагато більше, ніж той, що зустрінутий на пізніших циклах. Щоб дати вам уявлення про ситуацію, яка залишається гіпотетичною, остання статистика, надана Samourai, вказувала, що між 85% і 90% монет, залучених у coinjoins, походили від користувачів з Dojo, Sparrow або Bitcoin Keeper, тобто користувачів, які, навіть у найгіршому випадку, не мали б своїх xpubs витекли.
Хоча ці цифри важко перевірити, вони здаються мені послідовними з двох причин:
- Sparrow Wallet широко використовується;
- Більшість програмного забезпечення для вузлів у коробці пропонує реалізації Dojo, і це основне програмне забезпечення, як-от Umbrel, дуже популярне в наші дні.

Таким чином, потрібно враховувати кілька аспектів. Якщо приватність ваших монет щодо влади є для вас надзвичайно важливою, було б розумно готуватися до найгіршого сценарію, і важко гарантувати на 100%, що ваші цикли Whirlpool coinjoin не могли б бути простежені через потенційний витік xpubs від користувачів без Dojo. Хоча це припущення є малоймовірним, воно не є неможливим.

З іншого боку, якщо приватність ваших монет щодо влади, потенційно володіючої цими xpubs, не є для вас критичною, тоді ситуацію можна розглядати по-іншому.

Я уточнюю "щодо влади", оскільки важливо пам'ятати, що лише влада, яка захопила сервери, потенційно знає про ці xpubs. Якщо вашою метою використання coinjoin було запобігти можливості вашого банкіра відстежувати ваші кошти, тоді він не краще проінформований, ніж до захоплення сервера.
Насамперед, важливо врахувати початковий anonset вашої монети, до захоплення сервера. Візьмемо для прикладу монету, яка досягла потенційного anonset у 40,000; потенційне зниження цього anonset, ймовірно, незначне. Дійсно, з вже дуже високим базовим anonset, малоймовірно, що присутність кількох користувачів без Dojo могла б радикально змінити ситуацію. Однак, якщо ваша монета мала anonset у 40, то ця потенційна витік міг би серйозно вплинути на ваші anonsets і потенційно дозволити відстеження. З інструментом WST, який тепер не працює після закриття OXT.me, ви можете лише оцінити ці anonsets. Щодо ретроспективного anonset, тут не дуже про що хвилюватися, оскільки модель Whirlpool забезпечує дуже високий рівень з першого coinjoin, завдяки спадщині ваших пірів. Єдина ситуація, коли це могло б стати проблемою, це якщо ваша монета не була перемішана протягом кількох років і була змішана на початку запуску пулу. Щодо перспективного anonset, ви можете розглянути тривалість, протягом якої ваша монета була доступна для coinjoins. Якщо це було кілька місяців, то, ймовірно, вона має дуже високий перспективний anonset. Навпаки, якщо вона була додана до пулу лише кілька годин до захоплення серверів, то її перспективний anonset, ймовірно, дуже низький.
[**-> Дізнайтеся більше про anonsets та метод їх розрахунку.**](https://planb.network/tutorials/privacy/wst-anonsets)

Інший аспект, який варто врахувати, це вплив консолідацій на anonsets монет, які були змішані. Оскільки облікові записи Whirlpool більше не доступні через додаток Samourai, ймовірно, багато користувачів перенесли свій гаманець на інше програмне забезпечення та намагалися вивести свої кошти з Whirlpool. Зокрема, минулого вікенду, коли комісії за транзакції в мережі Bitcoin були відносно високими, існував сильний технічний та економічний стимул для консолідації післяміксових монет. Це означає, що ймовірно, багато користувачів здійснили значні консолідації.

Проблема з цими післяміксовими консолідаціями полягає в тому, що вони завжди зменшують anonsets, не тільки для користувача, який їх виконує, але й для користувачів, з якими вони зустрічалися під час їхніх циклів coinjoin. Хоча я не міг точно перевірити або кількісно оцінити це явище, економічні стимули, пов'язані з комісіями за транзакції в той час, можуть призвести нас до припущення, що anonsets потенційно нижчі.

### Як користувач Sentinel

Робота мережі додатку для перегляду гаманця Sentinel схожа на роботу Samourai. Для доступу до інформації вашого гаманця додаток має передати xpubs, публічні ключі та адреси, які ви надали, до Dojo. Якщо ви завжди використовували власний Dojo на Sentinel, то проблем немає, і ви можете продовжувати використовувати додаток без занепокоєння. Однак, якщо ви залежали від серверів Samourai для вашого Sentinel, можливо, ваші xpubs були викриті. У цьому випадку рекомендується слідувати тому ж процесу зміни гаманця, що рекомендований для Samourai Wallet при підключенні до серверів Samourai.

У малоймовірному випадку, якщо ви використовували свій Dojo з Samourai, але не з Sentinel, було б розумніше вважати, що ваші xpubs скомпрометовані.

## Висновок
Дякую, що прочитали цю статтю до кінця. Якщо ви вважаєте, що інформації не вистачає або у вас є пропозиції, будь ласка, не соромтеся зв'язатися зі мною, щоб поділитися своїми думками. Крім того, якщо вам потрібна додаткова допомога у відновленні вашого Samourai Wallet, незважаючи на цей посібник, я запрошую вас приєднатися до [Discover Bitcoin Discord](https://discord.gg/xKKm29XGBb), щоб попросити допомоги. Я регулярно відвідую цей Discord і буду радий допомогти вам, якщо матиму рішення. Інші біткойнери також зможуть поділитися своїм досвідом і запропонувати свою підтримку. **У будь-якому випадку, важливо зберігати вашу фразу відновлення, файл резервної копії та парольну фразу в таємниці**. Не діліться ними з кимось, оскільки це може дозволити їм вкрасти ваші біткойни.